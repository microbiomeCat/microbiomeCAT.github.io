<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Docker 基本操作教程</title>
    <url>/20201001/Docker_tutorial/</url>
    <content><![CDATA[<h2><span id="摘要">摘要</span></h2>
<p>学习 Docker 的基本语法，看完这一篇，基本就能满足日常的使用。</p>
<a id="more"></a>
<hr>
<!-- toc -->
<ul>
<li><a href="#%E5%8A%A0%E8%BD%BD%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F">加载本地镜像</a></li>
<li><a href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E9%95%9C%E5%83%8F">查看当前系统中的镜像</a></li>
<li><a href="#%E5%9C%A8-docker-hub-%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93%E6%9F%A5%E6%89%BE%E5%85%AC%E5%85%B1%E9%95%9C%E5%83%8F">在 Docker Hub 镜像仓库查找公共镜像</a></li>
<li><a href="#%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F">拉取镜像</a></li>
<li><a href="#%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F">删除镜像</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8">创建容器</a></li>
<li><a href="#%E6%9F%A5%E7%9C%8B%E7%8E%B0%E6%9C%89%E5%AE%B9%E5%99%A8%E7%8A%B6%E6%80%81">查看现有容器状态</a></li>
<li><a href="#%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E5%AE%B9%E5%99%A8">删除一个或多个容器</a></li>
<li><a href="#%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E5%81%9C%E6%AD%A2%E7%9A%84%E5%AE%B9%E5%99%A8">启动一个或多个停止的容器</a></li>
<li><a href="#%E5%81%9C%E6%AD%A2%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E8%BF%90%E8%A1%8C%E4%B8%AD%E7%9A%84%E5%AE%B9%E5%99%A8">停止一个或多个运行中的容器</a></li>
<li><a href="#%E9%87%8D%E5%90%AF%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E5%AE%B9%E5%99%A8">重启一个或多个容器</a></li>
<li><a href="#%E5%9C%A8%E8%BF%90%E8%A1%8C%E7%9A%84%E5%AE%B9%E5%99%A8%E4%B8%AD%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4">在运行的容器中执行命令</a></li>
<li><a href="#%E5%AE%B9%E5%99%A8%E4%B8%8E%E5%AE%BF%E4%B8%BB%E4%B8%BB%E6%9C%BA%E4%B9%8B%E9%97%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E6%8B%B7%E8%B4%9D">容器与宿主主机之间的数据拷贝</a></li>
<li><a href="#%E4%BB%8E%E5%AE%B9%E5%99%A8%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E9%95%9C%E5%83%8F">从容器创建一个新的镜像</a></li>
<li><a href="#%E6%B8%85%E7%90%86docker%E7%A9%BA%E9%97%B4">清理docker空间</a></li>
</ul>
<!-- tocstop -->
<h2><span id="加载本地镜像">加载本地镜像</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">docker load -i D:\Documents\psn_qiime2.tar</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921132904537.png" alt="image-20200921132904537"></p>
<h2><span id="查看当前系统中的镜像">查看当前系统中的镜像</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">docker images</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921133756512.png" alt="image-20200921133756512"></p>
<h2><span id="在-docker-hub-镜像仓库查找公共镜像">在 Docker Hub 镜像仓库查找公共镜像</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">docker search python3</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921133721467.png" alt="image-20200921133721467"></p>
<h2><span id="拉取镜像">拉取镜像</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">docker pull rackspacedot/python37</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921134437901.png" alt="image-20200921134437901"></p>
<h2><span id="删除镜像">删除镜像</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">docker rmi rackspacedot/python37</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921134716476.png" alt="image-20200921134716476"></p>
<h2><span id="创建容器">创建容器</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#创建容器并以交互方式运行，映射宿主的D:/Documents位置到容器的/data路径</span></span><br><span class="line"></span><br><span class="line">docker run -it -v D:/Documents:/data --name qiime2_psn psn_qiime2</span><br><span class="line"></span><br><span class="line"><span class="comment">## 其中 -i: 以交互模式运行容器，通常与 -t 同时使用；</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## -t: 为容器重新分配一个伪输入终端，通常与 -i 同时使用；</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## --volume , -v: 绑定一个卷</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 还可以使用 --cpuset="0-2" or --cpuset="0,1,2": 指定容器使用特定的CPU运行；</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## -m :设置容器使用内存最大值；</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 推出容器并关闭</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#只创建容器，不启动，映射宿主的D:/Documents位置到容器的/data路径</span></span><br><span class="line"></span><br><span class="line">docker create -it -v D:/Documents:/data --name psn_qiime2-2020-8 psn_qiime2</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921143127948.png" alt="image-20200921143127948"></p>
<h2><span id="查看现有容器状态">查看现有容器状态</span></h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"># 查看当前运行的容器</span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line"># 查看所有容器</span><br><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921143150521.png" alt="image-20200921143150521"></p>
<h2><span id="删除一个或多个容器">删除一个或多个容器</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">docker rm qiime2_psn</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921143302052.png" alt="image-20200921143302052"></p>
<h2><span id="启动一个或多个停止的容器">启动一个或多个停止的容器</span></h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">docker start psn_qiime2-2020-8</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921143457628.png" alt="image-20200921143457628"></p>
<h2><span id="停止一个或多个运行中的容器">停止一个或多个运行中的容器</span></h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">docker stop psn_qiime2-2020-8</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921143840632.png" alt="image-20200921143840632"></p>
<h2><span id="重启一个或多个容器">重启一个或多个容器</span></h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">docker restart psn_qiime2-2020-8</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921144023692.png" alt="image-20200921144023692"></p>
<h2><span id="在运行的容器中执行命令">在运行的容器中执行命令</span></h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># hello world</span><br><span class="line">docker exec psn_qiime2-2020-8 echo &quot;hello world&quot;</span><br><span class="line"></span><br><span class="line"># 查看容器当前目录中的文件</span><br><span class="line">docker exec psn_qiime2-2020-8 ls</span><br><span class="line"></span><br><span class="line"># 交互模式进入容器中,并打开一个终端</span><br><span class="line">docker exec -it psn_qiime2-2020-8 &#x2F;bin&#x2F;bash</span><br><span class="line"></span><br><span class="line">## 注意，此时退出不会关闭容器</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921144823697.png" alt="image-20200921144823697"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921145113708.png" alt="image-20200921145113708"></p>
<h2><span id="容器与宿主主机之间的数据拷贝">容器与宿主主机之间的数据拷贝</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 拷贝宿主文件到容器的data目录下（即容器的主目录） # 反过来也是可以实现的</span></span><br><span class="line">docker cp C:\Users\personalbio\network2_legend.pdf psn_qiime2-2020-8:/data</span><br><span class="line"><span class="comment"># 查看主目录文件</span></span><br><span class="line">docker <span class="built_in">exec</span> psn_qiime2-2020-8 ls</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921150005597.png" alt="image-20200921150005597"></p>
<h2><span id="从容器创建一个新的镜像">从容器创建一个新的镜像</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">docker commit  -m <span class="string">"my qiime2"</span> -a <span class="string">"PSN"</span> psn_qiime2-2020-8  myqiime2:v1</span><br><span class="line"><span class="comment">## 其中 -m 为说明的文章</span></span><br><span class="line"><span class="comment">## -a 为作者名</span></span><br><span class="line"><span class="comment">## 后面依次接：容器名 镜像仓库名:标签</span></span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921151239192.png" alt="image-20200921151239192"></p>
<h2><span id="清理docker空间">清理docker空间</span></h2>
<p>通过docker rm 和docker rmi可删除无用的镜像和容器</p>
<p>对于磁盘空间，首先需用管理员身份打开powershell：右键点击 Powershell 图标，点击 “以管理员身份运行”。</p>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200924174531747.png" alt="image-20200924174531747" style="zoom:100%;">
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200924174701019.png" alt="image-20200924174701019" style="zoom:150%;">
<p>然后输入以下代码：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># docker system prune -a -f    # 这条代码会自动删除当前关闭的容器，以及没有容器在使用的镜像，所以还是手动删除的好。</span></span><br><span class="line">net stop com.docker.service</span><br><span class="line">taskkill /F /IM <span class="string">"Docker Desktop.exe"</span></span><br><span class="line">stop-vm DockerDesktopVM</span><br><span class="line">Optimize-VHD -Path <span class="string">"C:\ProgramData\DockerDesktop\vm-data\DockerDesktop.vhdx"</span> -Mode Full <span class="comment">## 这个地址从docker的settings 里面找，如下图。</span></span><br><span class="line">start-vm DockerDesktopVM</span><br><span class="line">start <span class="string">"C:\Program Files\Docker\Docker\Docker Desktop.exe"</span></span><br><span class="line">net start com.docker.service</span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200924182452739.png" alt="image-20200924182452739" style="zoom:150%;">
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200924174919251.png" alt="image-20200924174919251" style="zoom:150%;"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>其他</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown 实用语法</title>
    <url>/20200809/Markdown_Programming_Language/</url>
    <content><![CDATA[<h2><span id="摘要">摘要</span></h2>
<p><a href="https://baike.baidu.com/item/markdown/3245829?fr=aladdin" target="_blank" rel="noopener">Markdown</a> 一种轻量级的<strong>标记语言</strong>。我们熟悉的 HTML 网页文件，它的全称是：超文本标记语言 (英语：HyperText Markup Language) 其实也是一种标记语言。</p>
<p>而<strong>标记语言</strong>，则是通过一系列约定好的标记来对电子文档进行标记，以实现对电子文档的<u>语义、结构、及格式</u>的定义。</p>
<p>相比于其他的标记语言，markdown 更强调和关注<big><strong>内容</strong></big>，而尽可能<big><strong>简化</strong></big>对标记语法的编程要求。</p>
<p>可以说，如果要向所有人推荐一门编程语言，<u>那么Markdown 绝对是最简单、最实用</u>。</p>
<a id="more"></a>
<!-- toc -->
<ul>
<li><a href="#%E6%A0%87%E9%A2%98">标题</a>
<ul>
<li><a href="#%E6%A0%87%E9%A2%98%E6%95%88%E6%9E%9C">标题—效果</a></li>
</ul>
</li>
<li><a href="#%E6%A0%BC%E5%BC%8F%E5%AD%97%E4%BD%93">格式—字体</a>
<ul>
<li><a href="#%E6%A0%BC%E5%BC%8F%E5%AD%97%E4%BD%93%E6%95%88%E6%9E%9C">格式—字体—效果</a></li>
</ul>
</li>
<li><a href="#%E6%A0%BC%E5%BC%8F%E4%B8%8B%E5%88%92%E7%BA%BF%E4%B8%8E%E5%88%A0%E9%99%A4%E7%BA%BF">格式—下划线与删除线</a>
<ul>
<li><a href="#%E6%A0%BC%E5%BC%8F%E4%B8%8B%E5%88%92%E7%BA%BF%E4%B8%8E%E5%88%A0%E9%99%A4%E7%BA%BF%E6%95%88%E6%9E%9C">格式—下划线与删除线—效果</a></li>
</ul>
</li>
<li><a href="#%E6%A0%BC%E5%BC%8F%E5%88%86%E5%89%B2%E7%BA%BF">格式—分割线</a>
<ul>
<li><a href="#%E6%A0%BC%E5%BC%8F%E5%88%86%E5%89%B2%E7%BA%BF%E6%95%88%E6%9E%9C">格式—分割线—效果</a></li>
</ul>
</li>
<li><a href="#%E6%A0%BC%E5%BC%8F%E4%B8%8B%E6%A0%87%E4%B8%8E%E4%B8%8A%E6%A0%87">格式—下标与上标</a>
<ul>
<li><a href="#%E6%A0%BC%E5%BC%8F%E4%B8%8B%E6%A0%87%E4%B8%8E%E4%B8%8A%E6%A0%87%E6%95%88%E6%9E%9C">格式—下标与上标—效果</a></li>
</ul>
</li>
<li><a href="#%E6%A0%BC%E5%BC%8F%E8%84%9A%E6%B3%A8">格式—脚注</a>
<ul>
<li><a href="#%E6%A0%BC%E5%BC%8F%E8%84%9A%E6%B3%A8%E6%95%88%E6%9E%9C">格式—脚注—效果</a></li>
</ul>
</li>
<li><a href="#%E5%88%97%E8%A1%A8%E6%9C%89%E5%BA%8F%E5%88%97%E8%A1%A8">列表—有序列表</a>
<ul>
<li><a href="#%E5%88%97%E8%A1%A8%E6%9C%89%E5%BA%8F%E5%88%97%E8%A1%A8%E6%95%88%E6%9E%9C">列表—有序列表—效果</a></li>
</ul>
</li>
<li><a href="#%E5%88%97%E8%A1%A8%E6%97%A0%E5%BA%8F%E5%88%97%E8%A1%A8">列表—无序列表</a>
<ul>
<li><a href="#%E5%88%97%E8%A1%A8%E6%97%A0%E5%BA%8F%E5%88%97%E8%A1%A8%E6%95%88%E6%9E%9C">列表—无序列表—效果</a></li>
</ul>
</li>
<li><a href="#%E5%88%97%E8%A1%A8%E5%88%97%E8%A1%A8%E5%88%86%E5%B1%82">列表—列表分层</a>
<ul>
<li><a href="#%E5%88%97%E8%A1%A8%E5%88%97%E8%A1%A8%E5%88%86%E5%B1%82%E6%95%88%E6%9E%9C">列表—列表分层—效果</a></li>
</ul>
</li>
<li><a href="#%E5%8C%BA%E5%9D%971">区块1</a>
<ul>
<li><a href="#%E5%8C%BA%E5%9D%971%E6%95%88%E6%9E%9C">区块1—效果</a></li>
</ul>
</li>
<li><a href="#%E5%8C%BA%E5%9D%972">区块2</a>
<ul>
<li><a href="#%E5%8C%BA%E5%9D%972%E6%95%88%E6%9E%9C">区块2—效果</a></li>
</ul>
</li>
<li><a href="#%E9%93%BE%E6%8E%A5">链接</a>
<ul>
<li><a href="#%E9%93%BE%E6%8E%A5%E6%95%88%E6%9E%9C">链接—效果</a></li>
</ul>
</li>
<li><a href="#%E5%9B%BE%E7%89%87%E6%9D%A5%E8%87%AA%E7%BD%91%E7%BB%9C-%E5%9B%BE%E5%BA%8A">图片—来自网络、图床</a>
<ul>
<li><a href="#%E5%9B%BE%E7%89%87%E6%9D%A5%E8%87%AA%E7%BD%91%E7%BB%9C-%E5%9B%BE%E5%BA%8A%E6%95%88%E6%9E%9C">图片—来自网络、图床—效果</a></li>
</ul>
</li>
<li><a href="#%E5%9B%BE%E7%89%87%E6%9D%A5%E8%87%AA%E6%9C%AC%E5%9C%B0">图片—来自本地</a>
<ul>
<li><a href="#%E5%9B%BE%E7%89%87%E6%9D%A5%E8%87%AA%E6%9C%AC%E5%9C%B0%E6%95%88%E6%9E%9C">图片—来自本地—效果</a></li>
</ul>
</li>
<li><a href="#%E5%9B%BE%E7%89%87html-%E6%A0%BC%E5%BC%8F%E5%AE%9E%E7%8E%B0%E7%BC%A9%E6%94%BE">图片—HTML 格式实现缩放</a>
<ul>
<li><a href="#%E5%9B%BE%E7%89%87html-%E6%A0%BC%E5%BC%8F%E5%AE%9E%E7%8E%B0%E7%BC%A9%E6%94%BE%E6%95%88%E6%9E%9C">图片—HTML 格式实现缩放—效果</a></li>
</ul>
</li>
<li><a href="#%E8%A1%A8%E6%A0%BC">表格</a>
<ul>
<li><a href="#%E8%A1%A8%E6%A0%BC%E6%95%88%E6%9E%9C">表格—效果</a></li>
</ul>
</li>
<li><a href="#%E4%BB%A3%E7%A0%81%E5%9D%97">代码块</a>
<ul>
<li><a href="#%E4%BB%A3%E7%A0%81%E5%9D%97%E6%95%88%E6%9E%9C">代码块—效果</a></li>
</ul>
</li>
<li><a href="#%E8%BF%9B%E9%98%B6%E6%8A%80%E5%B7%A7%E4%BD%BF%E7%94%A8-html-%E5%85%83%E7%B4%A0">进阶技巧—使用 HTML 元素</a>
<ul>
<li><a href="#%E8%BF%9B%E9%98%B6%E6%8A%80%E5%B7%A7%E4%BD%BF%E7%94%A8-html-%E5%85%83%E7%B4%A0%E6%95%88%E6%9E%9C">进阶技巧—使用 HTML 元素—效果</a></li>
</ul>
</li>
<li><a href="#%E8%BF%9B%E9%98%B6%E6%8A%80%E5%B7%A7%E8%A1%A8%E6%83%85%E5%8C%85">进阶技巧—表情包</a>
<ul>
<li><a href="#%E8%BF%9B%E9%98%B6%E6%8A%80%E5%B7%A7%E8%A1%A8%E6%83%85%E5%8C%85%E6%95%88%E6%9E%9C">进阶技巧—表情包—效果</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h2><span id="标题">标题</span></h2>
<p>使用 # 号表示 1-6 级标题，一级标题对应一个 # 号，二级标题对应两个 # 号，以此类推。</p>
<figure class="highlight markdown"><figcaption><span>标题代码</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section"># 我是一级标题 </span></span><br><span class="line"><span class="section">## 我是二级标题</span></span><br><span class="line"><span class="section">### 我是三级标题</span></span><br><span class="line"><span class="section">#### 我是四级标题</span></span><br><span class="line"><span class="section">##### 我是五级标题</span></span><br><span class="line"><span class="section">###### 我是六级标题</span></span><br><span class="line">我不是标题:smile::smile::smile:</span><br></pre></td></tr></table></figure>
<h3><span id="标题效果">标题—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809153521.png" alt></p>
<hr>
<h2><span id="格式字体">格式—字体</span></h2>
<figure class="highlight markdown"><figcaption><span>格式—字体代码</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="emphasis">*斜体文本*</span></span><br><span class="line"><span class="emphasis">_斜体文本_</span></span><br><span class="line"><span class="strong">**粗体文本**</span></span><br><span class="line"><span class="strong">__粗体文本__</span></span><br><span class="line"><span class="strong">***粗斜体文本**</span>*</span><br><span class="line"><span class="strong">___粗斜体文本__</span>_</span><br></pre></td></tr></table></figure>
<h3><span id="格式字体效果">格式—字体—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809154026.png" alt></p>
<hr>
<h2><span id="格式下划线与删除线">格式—下划线与删除线</span></h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;u&gt;这句话很重要，我给它加了下划线&lt;&#x2F;u&gt;</span><br><span class="line">~~这句话现在不再适用了，我给它加个删除线~~</span><br></pre></td></tr></table></figure>
<p>注意：这里的下划线实际是通过 HTML 的 &lt;u&gt; 标签来实现的。</p>
<h3><span id="格式下划线与删除线效果">格式—下划线与删除线—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809154532.png" alt></p>
<hr>
<h2><span id="格式分割线">格式—分割线</span></h2>
<p>在一行中用三个以上的星号、减号、下滑线来建立一个分隔线，行内不能有其他内容，但可以在星号、减号、下划线中间插入任意空格。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">某段内容</span><br><span class="line">- - -</span><br><span class="line">另一段内容</span><br><span class="line">***</span><br><span class="line">另另一段内容</span><br><span class="line">___</span><br><span class="line">另另另一段内容</span><br><span class="line">_ _ _</span><br><span class="line">另另另另一段内容</span><br></pre></td></tr></table></figure>
<h3><span id="格式分割线效果">格式—分割线—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809155028.png" alt></p>
<hr>
<h2><span id="格式下标与上标">格式—下标与上标</span></h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">10^10^ &#x3D; 10,000,000,000</span><br><span class="line">$10^&#123;10&#125;$ &#x3D; 10,000,000,000</span><br><span class="line">未知数 $X_1$, $X_2$</span><br><span class="line"></span><br><span class="line">以下采用 HTML 的方法</span><br><span class="line">10&lt;sup&gt;10&lt;&#x2F;sup&gt; &#x3D; 10,000,000,000</span><br><span class="line">未知数 X&lt;sub&gt;1&lt;&#x2F;sub&gt;, X&lt;sub&gt;2&lt;&#x2F;sub&gt;</span><br></pre></td></tr></table></figure>
<p>注意：双 $ 符的写法为 Markdown 的公式写法，字体会有一定变化。</p>
<h3><span id="格式下标与上标效果">格式—下标与上标—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809155443.png" alt></p>
<hr>
<h2><span id="格式脚注">格式—脚注</span></h2>
<figure class="highlight markdown"><figcaption><span>格式—脚注代码</span></figcaption><table><tr><td class="code"><pre><span class="line">不知是谁说过：其实地上本没有路，走的人多了，也便成了路[^1]。</span><br><span class="line"></span><br><span class="line">一段输出之后。。。。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">脚注:</span><br><span class="line">[<span class="symbol">^1</span>]:<span class="link">其实是鲁迅说的。</span></span><br></pre></td></tr></table></figure>
<h3><span id="格式脚注效果">格式—脚注—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809160428.png" alt></p>
<hr>
<h2><span id="列表有序列表">列表—有序列表</span></h2>
<figure class="highlight markdown"><figcaption><span>列表—有序列表代码</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="section">#### 把大象装冰箱，总共分几步</span></span><br><span class="line"><span class="bullet">1. </span>把冰箱门打开</span><br><span class="line"><span class="bullet">2. </span>把大象装进去</span><br><span class="line"><span class="bullet">3. </span>把冰箱门关上</span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">1. </span>把冰箱门打开</span><br><span class="line"><span class="bullet">100. </span>把大象装进去</span><br><span class="line"><span class="bullet">20. </span>把冰箱门关上</span><br></pre></td></tr></table></figure>
<p>采用任意数字 + . + 空格的方式，自动排序。</p>
<h3><span id="列表有序列表效果">列表—有序列表—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809171333.png" alt></p>
<hr>
<h2><span id="列表无序列表">列表—无序列表</span></h2>
<figure class="highlight markdown"><figcaption><span>列表—无序列表代码</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="section">#### 我最喜欢的食物：</span></span><br><span class="line"><span class="bullet">- </span>粉蒸肉</span><br><span class="line"><span class="bullet">- </span>红烧肉</span><br><span class="line"><span class="bullet">- </span>回锅肉</span><br><span class="line"></span><br><span class="line"><span class="section">#### 我最喜欢的食物：</span></span><br><span class="line"><span class="bullet">* </span>烤鸡</span><br><span class="line"><span class="bullet">* </span>大盘鸡</span><br><span class="line"><span class="bullet">* </span>肯德基</span><br><span class="line"></span><br><span class="line"><span class="section">#### 我最喜欢的食物：</span></span><br><span class="line"><span class="bullet">+ </span>烤鱼</span><br><span class="line"><span class="bullet">+ </span>水煮鱼</span><br><span class="line"><span class="bullet">+ </span>酸菜鱼</span><br></pre></td></tr></table></figure>
<p>采用任意数字 + . + 空格的方式，自动排序。</p>
<h3><span id="列表无序列表效果">列表—无序列表—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809171334.png" alt></p>
<hr>
<h2><span id="列表列表分层">列表—列表分层</span></h2>
<figure class="highlight markdown"><figcaption><span>列表—列表分层代码</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="section">#### 我最喜欢的食物：</span></span><br><span class="line"><span class="bullet">- </span>回锅肉</span><br><span class="line"><span class="bullet">    - </span>四川回锅肉</span><br><span class="line"><span class="bullet">    - </span>湖南回锅肉</span><br><span class="line"><span class="bullet">    - </span>老干妈回锅肉</span><br><span class="line"><span class="bullet">- </span>红烧肉</span><br><span class="line"><span class="bullet">    - </span>甜的</span><br><span class="line"><span class="bullet">    - </span>不甜的</span><br></pre></td></tr></table></figure>
<p>二级列表要 - 之前加四个空格。</p>
<h3><span id="列表列表分层效果">列表—列表分层—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809171335.png" alt></p>
<hr>
<h2><span id="区块1">区块1</span></h2>
<figure class="highlight markdown"><figcaption><span>区块代码1</span></figcaption><table><tr><td class="code"><pre><span class="line">只有空想而不为其奋斗、追求、理想是不会实现的，正如那句话说的那样：</span><br><span class="line"></span><br><span class="line"><span class="quote">&gt; 其实地上本没有路，</span></span><br><span class="line"><span class="quote">&gt; 走的人多了，</span></span><br><span class="line"><span class="quote">&gt; 也便成了路</span></span><br><span class="line"><span class="quote">&gt;                                ----鲁迅</span></span><br><span class="line"></span><br><span class="line">所以，有了理想，并且始终如一的追求、奋斗、实践，那样理想才有可能实现。</span><br></pre></td></tr></table></figure>
<p>一个例子。</p>
<h3><span id="区块1效果">区块1—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809171336.png" alt></p>
<hr>
<h2><span id="区块2">区块2</span></h2>
<figure class="highlight markdown"><figcaption><span>区块代码2</span></figcaption><table><tr><td class="code"><pre><span class="line">&gt;警告：</span><br><span class="line">&gt;</span><br><span class="line">&gt;&gt; 千万不要学 markdown</span><br><span class="line">&gt;&gt; 否则你可能会再也离不开它！</span><br><span class="line">&gt;</span><br><span class="line">&gt;警告完毕！</span><br></pre></td></tr></table></figure>
<p>另一个例子。</p>
<h3><span id="区块2效果">区块2—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809171337.png" alt></p>
<hr>
<h2><span id="链接">链接</span></h2>
<figure class="highlight markdown"><figcaption><span>链接代码</span></figcaption><table><tr><td class="code"><pre><span class="line">学习 markdown，大家可以点击[<span class="string">这里</span>](<span class="link">https://www.runoob.com/markdown/md-tutorial.html</span>)。</span><br></pre></td></tr></table></figure>
<h3><span id="链接效果">链接—效果</span></h3>
<p>学习 markdown，大家可以点击<a href="https://www.runoob.com/markdown/md-tutorial.html" target="_blank" rel="noopener">这里</a>。</p>
<hr>
<h2><span id="图片来自网络-图床">图片—来自网络、图床</span></h2>
<figure class="highlight markdown"><figcaption><span>图片代码1</span></figcaption><table><tr><td class="code"><pre><span class="line">![<span class="string">图片1</span>](<span class="link">https://iknow-pic.cdn.bcebos.com/8b13632762d0f7030cd823a305fa513d2697c563?x-bce-process=image/resize,m_lfit,w_600,h_800,limit_1</span>)</span><br></pre></td></tr></table></figure>
<h3><span id="图片来自网络-图床效果">图片—来自网络、图床—效果</span></h3>
<p><img src="https://iknow-pic.cdn.bcebos.com/8b13632762d0f7030cd823a305fa513d2697c563?x-bce-process=image/resize,m_lfit,w_600,h_800,limit_1" alt="图片1"></p>
<hr>
<h2><span id="图片来自本地">图片—来自本地</span></h2>
<figure class="highlight markdown"><figcaption><span>图片代码2</span></figcaption><table><tr><td class="code"><pre><span class="line">![<span class="string">图片2</span>](<span class="link">images/安利markdown/鲁迅.jpg</span>)</span><br></pre></td></tr></table></figure>
<p>可以是绝对路径，也可以是相对当前 md 文件的相对路径。注意斜杠方向。</p>
<h3><span id="图片来自本地效果">图片—来自本地—效果</span></h3>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809171338.png" alt="图片2" style="zoom:100%;">
<hr>
<h2><span id="图片html-格式实现缩放">图片—HTML 格式实现缩放</span></h2>
<figure class="highlight markdown"><figcaption><span>图片代码2</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://iknow-pic.cdn.bcebos.com/8b13632762d0f7030cd823a305fa513d2697c563?x-bce-process=image/resize,m_lfit,w_600,h_800,limit_1"</span> <span class="attr">alt</span>=<span class="string">"图片2"</span> <span class="attr">style</span>=<span class="string">"zoom:40%;"</span> /&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>在 Typora 中可以简单实现哦。</p>
<h3><span id="图片html-格式实现缩放效果">图片—HTML 格式实现缩放—效果</span></h3>
<img src="https://iknow-pic.cdn.bcebos.com/8b13632762d0f7030cd823a305fa513d2697c563?x-bce-process=image/resize,m_lfit,w_600,h_800,limit_1" alt="图片2" style="zoom:40%;">
<hr>
<h2><span id="表格">表格</span></h2>
<p>Markdown 的表格，使用 | 来分隔不同的单元格，使用 - 来分隔表头和其他行。</p>
<figure class="highlight markdown"><figcaption><span>图片代码3</span></figcaption><table><tr><td class="code"><pre><span class="line">| 表头1 | 表头2 | 表头3 |</span><br><span class="line">| :---: | :--- | ---: |</span><br><span class="line">| 单元格 | 单元格 |单元格 |</span><br><span class="line">| 单元格 | 单元格 |单元格 |</span><br></pre></td></tr></table></figure>
<h3><span id="表格效果">表格—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809171339.png" alt></p>
<hr>
<h2><span id="代码块">代码块</span></h2>
<p>注意 前面的 $ 号请忽略</p>
<figure class="highlight plain"><figcaption><span>代码块代码</span></figcaption><table><tr><td class="code"><pre><span class="line">$ &#96;&#96;&#96;python</span><br><span class="line">$ def function()</span><br><span class="line">$ return &quot;llll&quot;</span><br><span class="line">$ &#96;&#96;&#96;</span><br><span class="line"></span><br><span class="line">$ &#96;&#96;&#96;R</span><br><span class="line">$ library(tidyverse)</span><br><span class="line">$ print(Hello world)</span><br><span class="line">$ &#96;&#96;&#96;</span><br></pre></td></tr></table></figure>
<h3><span id="代码块效果">代码块—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809171307.png" alt></p>
<hr>
<h2><span id="进阶技巧使用-html-元素">进阶技巧—使用 HTML 元素</span></h2>
<figure class="highlight markdown"><figcaption><span>使用HTML元素代码</span></figcaption><table><tr><td class="code"><pre><span class="line">使用<span class="xml"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span></span>Tab<span class="xml"><span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span>切换大小写</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>加粗<span class="xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">strong</span>&gt;</span></span>加粗<span class="xml"><span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">i</span>&gt;</span></span>斜体<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">em</span>&gt;</span></span>斜体<span class="xml"><span class="tag">&lt;/<span class="name">em</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">big</span>&gt;</span></span>变大<span class="xml"><span class="tag">&lt;/<span class="name">big</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">small</span>&gt;</span></span>变小<span class="xml"><span class="tag">&lt;/<span class="name">small</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3><span id="进阶技巧使用-html-元素效果">进阶技巧—使用 HTML 元素—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809171244.png" alt></p>
<hr>
<h2><span id="进阶技巧表情包">进阶技巧—表情包</span></h2>
<figure class="highlight markdown"><figcaption><span>表情包代码</span></figcaption><table><tr><td class="code"><pre><span class="line">:smile::laughing::blush::smiley::relaxed::smirk::heart<span class="emphasis">_eyes::kissing_</span>heart::kissing<span class="emphasis">_closed_</span>eyes::flushed:</span><br><span class="line">:relieved::satisfied::grin::wink::stuck<span class="emphasis">_out_</span>tongue<span class="emphasis">_winking_</span>eye::stuck<span class="emphasis">_out_</span>tongue<span class="emphasis">_closed_</span>eyes::grinning::kissing::kissing<span class="emphasis">_smiling_</span>eyes::confounded:</span><br><span class="line">:stuck<span class="emphasis">_out_</span>tongue::sleeping::worried::frowning::open_mouth::grimacing::confused::hushed::expressionless::unamused:</span><br></pre></td></tr></table></figure>
<p>更多 emoji 请到<a href="https://www.webfx.com/tools/emoji-cheat-sheet/" target="_blank" rel="noopener">这里</a>查找，个别 emoji 表情可能你的md编辑器不支持，所以不要强求。</p>
<h3><span id="进阶技巧表情包效果">进阶技巧—表情包—效果</span></h3>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/20200809171236.png" alt></p>
<hr>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>其他</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo 标签插件语法</title>
    <url>/20200809/HexoTagPlugins_Programming_Language/</url>
    <content><![CDATA[<p>标签插件和 <a href="https://hexo.io/zh-cn/docs/front-matter" target="_blank" rel="noopener">Front-matter</a> 中的标签不同，它们是用于在文章中快速插入特定内容的插件。</p>
<p>官方文档请看<a href="https://hexo.io/zh-cn/docs/tag-plugins" target="_blank" rel="noopener">这里</a>,本文为基于官方文档的演绎。</p>
<a id="more"></a>
<!-- toc -->
<ul>
<li><a href="#%E5%BC%95%E7%94%A8%E5%9D%97">引用块</a>
<ul>
<li><a href="#%E6%A8%A1%E6%9D%BF">模板</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B">实例</a></li>
</ul>
</li>
<li><a href="#%E4%BB%A3%E7%A0%81%E5%9D%97">代码块</a>
<ul>
<li><a href="#%E6%A8%A1%E6%9D%BF-1">模板</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B-1">实例</a></li>
</ul>
</li>
<li><a href="#%E5%8F%8D%E5%BC%95%E5%8F%B7%E4%BB%A3%E7%A0%81%E5%9D%97">反引号代码块</a></li>
<li><a href="#%E9%86%92%E7%9B%AE%E5%BC%95%E7%94%A8pull-quote">醒目引用|Pull Quote</a>
<ul>
<li><a href="#%E6%A8%A1%E6%9D%BF-2">模板</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B-2">实例</a></li>
</ul>
</li>
<li><a href="#jsfiddle">jsFiddle</a></li>
<li><a href="#gist">Gist</a>
<ul>
<li><a href="#%E6%A8%A1%E6%9D%BF-3">模板</a></li>
</ul>
</li>
<li><a href="#iframe">iframe</a>
<ul>
<li><a href="#%E6%A8%A1%E6%9D%BF-4">模板</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B-3">实例</a></li>
</ul>
</li>
<li><a href="#image">Image</a></li>
<li><a href="#link">Link</a></li>
<li><a href="#include-code">Include Code</a>
<ul>
<li><a href="#%E6%A8%A1%E6%9D%BF-5">模板</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B1%E5%B5%8C%E5%85%A5-demosh-%E6%96%87%E4%BB%B6%E5%85%A8%E6%96%87">实例1：嵌入 demo.sh 文件全文</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B2%E5%B5%8C%E5%85%A5-demosh-%E6%96%87%E4%BB%B6-%E5%8F%AA%E5%B5%8C%E5%85%A5%E7%AC%AC-2-%E8%A1%8C">实例2：嵌入 demo.sh 文件, 只嵌入第 2 行</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B3%E5%B5%8C%E5%85%A5-demosh-%E6%96%87%E4%BB%B6-%E5%B5%8C%E5%85%A5%E7%AC%AC-2-%E8%A1%8C%E8%87%B3%E7%AC%AC-3-%E8%A1%8C">实例3：嵌入 demo.sh 文件, 嵌入第 2 行至第 3 行</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B4%E5%B5%8C%E5%85%A5-demosh-%E6%96%87%E4%BB%B6-%E5%B5%8C%E5%85%A5%E7%AC%AC-2-%E8%A1%8C%E8%87%B3%E6%96%87%E4%BB%B6%E7%BB%93%E6%9D%9F">实例4：嵌入 demo.sh 文件, 嵌入第 2 行至文件结束</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B4%E5%B5%8C%E5%85%A5-demosh-%E6%96%87%E4%BB%B6-%E5%B5%8C%E5%85%A5%E7%AC%AC-1-%E8%A1%8C%E8%87%B3%E7%AC%AC-3-%E8%A1%8C">实例4：嵌入 demo.sh 文件, 嵌入第 1 行至第 3 行</a></li>
</ul>
</li>
<li><a href="#youtube">Youtube</a>
<ul>
<li><a href="#%E6%A8%A1%E6%9D%BF-6">模板</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B1%E8%A7%86%E9%A2%91">实例1：视频</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B2%E6%92%AD%E6%94%BE%E5%88%97%E8%A1%A8">实例2：播放列表</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B2%E9%9A%90%E7%A7%81%E6%A8%A1%E5%BC%8F">实例2：隐私模式</a></li>
</ul>
</li>
<li><a href="#vimeo">Vimeo</a></li>
<li><a href="#%E5%BC%95%E7%94%A8%E6%96%87%E7%AB%A0">引用文章</a>
<ul>
<li><a href="#%E6%A8%A1%E6%9D%BF-7">模板</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B1%E9%93%BE%E6%8E%A5%E4%BD%BF%E7%94%A8%E6%96%87%E7%AB%A0%E7%9A%84%E6%A0%87%E9%A2%98">实例1：链接使用文章的标题</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B2%E9%93%BE%E6%8E%A5%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%96%87%E5%AD%97">实例2：链接使用自定义文字</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B3%E7%A6%81%E6%AD%A2%E5%AF%B9%E6%A0%87%E9%A2%98%E7%9A%84%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%BD%AC%E4%B9%89">实例3：禁止对标题的特殊字符进行转义</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B4%E5%AF%B9%E6%A0%87%E9%A2%98%E7%9A%84%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%BD%AC%E4%B9%89">实例4：对标题的特殊字符进行转义</a></li>
</ul>
</li>
<li><a href="#%E5%BC%95%E7%94%A8%E8%B5%84%E6%BA%90">引用资源</a>
<ul>
<li><a href="#%E6%A8%A1%E6%9D%BF-8">模板</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87">实例：插入图片</a></li>
</ul>
</li>
<li><a href="#raw">Raw</a>
<ul>
<li><a href="#%E6%A8%A1%E6%9D%BF-9">模板</a></li>
</ul>
</li>
<li><a href="#%E6%96%87%E7%AB%A0%E6%91%98%E8%A6%81%E5%92%8C%E6%88%AA%E6%96%AD">文章摘要和截断</a></li>
</ul>
<!-- tocstop -->
<h2><span id="引用块">引用块</span></h2>
<p>在文章中插入别处发表、刊登、分享的文字；此外也可以用于作为重要的提示进行强调。</p>
<h3><span id="模板">模板</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% blockquote [作者[, 出处]] [出处链接] [出处链接的标题] %&#125;</span><br><span class="line">内容</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure>
<br>
<h3><span id="实例">实例</span></h3>
<p><strong>实例1 只输出普通的引用块</strong><br>
输出一个提示信息</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% blockquote %&#125;</span><br><span class="line">提示：</span><br><span class="line">这是我编的!</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure>
<blockquote><p>提示：<br>
这是我编的!</p>
</blockquote>
<br>
<p><strong>实例2 引用书上的内容</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% blockquote 鲁迅, 《故乡》%&#125;</span><br><span class="line">其实地上本没有路，走的人多了，也便成了路。</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure>
<blockquote><p>其实地上本没有路，走的人多了，也便成了路。</p>
<footer><strong>鲁迅</strong><cite>《故乡》</cite></footer></blockquote>
<br>
<p><strong>实例3 引用微博</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% blockquote @央视新闻 https:&#x2F;&#x2F;weibo.com&#x2F;2656274875&#x2F;Jf1dzmI3r?type&#x3D;comment 点击查看详情 %&#125;</span><br><span class="line">【[#白岩松谈张玉环案#](https:&#x2F;&#x2F;s.weibo.com&#x2F;weibo?q&#x3D;%23%E7%99%BD%E5%B2%A9%E6%9D%BE%E8%B0%88%E5%BC%A0%E7%8E%89%E7%8E%AF%E6%A1%88%23&amp;from&#x3D;default) 27年，人生失去多少？】白岩松：张玉环蒙冤27年，起点是在1993年，我想想自己，那一年25岁，走进东方时空当主持，今年已经52岁，想想这27年人生翻天覆地的变化，就更能明白对于张玉环来说，这27年在人生当中失去多少？祝愿未来张玉环的人生之路顺畅一些，能够幸福快乐多一些，更盼望这样的错案，今后不要再有了，过去有的也都能够迅速纠错，谁的人生都经不起折腾。</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure>
<blockquote><p>【<a href="https://s.weibo.com/weibo?q=%23%E7%99%BD%E5%B2%A9%E6%9D%BE%E8%B0%88%E5%BC%A0%E7%8E%89%E7%8E%AF%E6%A1%88%23&amp;from=default" target="_blank" rel="noopener">#白岩松谈张玉环案#</a> 27年，人生失去多少？】白岩松：张玉环蒙冤27年，起点是在1993年，我想想自己，那一年25岁，走进东方时空当主持，今年已经52岁，想想这27年人生翻天覆地的变化，就更能明白对于张玉环来说，这27年在人生当中失去多少？祝愿未来张玉环的人生之路顺畅一些，能够幸福快乐多一些，更盼望这样的错案，今后不要再有了，过去有的也都能够迅速纠错，谁的人生都经不起折腾。</p>
<footer><strong>@央视新闻</strong><cite><a href="https://weibo.com/2656274875/Jf1dzmI3r?type=comment" target="_blank" rel="noopener">点击查看详情</a></cite></footer></blockquote>
<br>
<p><strong>实例4 引用网络上的文章</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% blockquote 猴子老湿 https:&#x2F;&#x2F;www.zhihu.com&#x2F;question&#x2F;412595987&#x2F;answer&#x2F;1391041851 [如何看待特朗普正式封杀TikTok和微信，这意味着什么？] %&#125;</span><br><span class="line">我在法学院的时候，一个偏左的法理学教授意味深长地对我们说了一句话——去政治化本身就是一种政治。</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure>
<blockquote><p>我在法学院的时候，一个偏左的法理学教授意味深长地对我们说了一句话——去政治化本身就是一种政治。</p>
<footer><strong>猴子老湿</strong><cite><a href="https://www.zhihu.com/question/412595987/answer/1391041851" target="_blank" rel="noopener">知乎：如何看待特朗普正式封杀TikTok和微信，这意味着什么？</a></cite></footer></blockquote>
<hr>
<h2><span id="代码块">代码块</span></h2>
<p>在文章中插入代码。</p>
<h3><span id="模板">模板</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% codeblock [标题] [lang:语言] [链接地址url] [链接名称] [其他选项] %&#125;</span><br><span class="line">一至多段代码</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure>
<p>其中，其他选项可以是如下内容，表达方式如：<code>line_number:false first_line:5</code>.</p>
<table>
<thead>
<tr>
<th>其他选项</th>
<th>选项描述</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>line_number</code></td>
<td>Show line number</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>highlight</code></td>
<td>Enable code highlighting</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>first_line</code></td>
<td>Specify the first line number</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>mark</code></td>
<td>Line highlight specific line(s), each value separated by a comma. Specify number range using a dash Example: <code>mark:1,4-7,10</code> will mark line 1, 4 to 7 and 10.</td>
<td></td>
</tr>
<tr>
<td><code>wrap</code></td>
<td>Wrap the code block in <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/table" target="_blank" rel="noopener">``</a></td>
<td><code>true</code></td>
</tr>
</tbody>
</table>
<h3><span id="实例">实例</span></h3>
<p><strong>实例1 普通的代码块</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% codeblock %&#125;</span><br><span class="line">echo &quot;Hello World!&quot;</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo &quot;Hello World!&quot;</span><br></pre></td></tr></table></figure>
<p><strong>实例2 指定语言</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% codeblock lang:bash %&#125;</span><br><span class="line">echo &quot;Hello World!&quot;</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"Hello World!"</span></span><br></pre></td></tr></table></figure>
<p><strong>实例3 增加代码块标题并指定语言</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% codeblock 在Powershell中输入： lang:bash %&#125;</span><br><span class="line">echo &quot;Hello World!&quot;</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><figcaption><span>在Powershell中输入：</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"Hello World!"</span></span><br></pre></td></tr></table></figure>
<p><strong>实例4 增加代码块标题并指定语言，给出链接, 不显示行号</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% codeblock HTML5示例： lang:html https:&#x2F;&#x2F;www.runoob.com&#x2F;html&#x2F;html5-intro.html runoob.com line_number:false %&#125;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;文档标题&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">文档内容......</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;html&gt;</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><figcaption><span>HTML5示例：</span><a href="https://www.runoob.com/html/html5-intro.html" target="_blank" rel="noopener">runoob.com</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>文档标题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">文档内容......</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h2><span id="反引号代码块">反引号代码块</span></h2>
<p>反引号代码块是另一种形式的代码块（即 markdown 形式），它使用三个反引号来包裹；同时它也支持添加标题、链接、链接名称。这里不足赘述</p>
<p>``` [language] [title] [url] [link text] code snippet ```</p>
<hr>
<h2><span id="醒目引用pull-quote">醒目引用|Pull Quote</span></h2>
<p>在文章中插入 Pull quote, 重要应用？个人对这个不是很理解。</p>
<h3><span id="模板">模板</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% pullquote [class] %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endpullquote %&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="实例">实例</span></h3>
<p><strong>实例1：绘制本博客的结构脑图</strong><br>
通过<code>npm install hexo-simple-mindmap</code>安装mindmap后使用</p>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>microbiomecat
<ul>
<li>测序数据生息处理分析
<ul>
<li>扩增子数据分析
<ul>
<li>16S、18S、ITS等数据分析</li>
<li>功能基因数据分析</li>
</ul>
</li>
<li>宏基因组数据分析</li>
<li>宏转录组数据分析</li>
<li>宏病毒组数据分析</li>
<li>功能预测分析</li>
<li>网络分析</li>
</ul>
</li>
<li>统计绘图
<ul>
<li>柱状图</li>
<li>散点图</li>
<li>散点图</li>
<li>热图</li>
<li>树图</li>
<li>富集分析</li>
<li>网络绘图</li>
<li>差异分析
<ul>
<li>秩和检验</li>
<li>lefse分析</li>
<li>metagenomeSeq分析</li>
<li>edgeR分析</li>
<li>DESeq2</li>
</ul>
</li>
</ul>
</li>
<li>编程语言
<ul>
<li>linux基本操作</li>
<li>git</li>
<li>docker</li>
<li>R</li>
<li>python</li>
<li>html&amp;css</li>
<li>markdown</li>
<li>perl</li>
<li>hexo</li>
<li>reveal.js</li>
</ul>
</li>
<li>研究论文
<ul>
<li>研究进展</li>
<li>分析方法</li>
</ul>
</li>
<li>其他<br>
- 生活<br>
- 摄影</li>
</ul>
</li>
</ul>
</blockquote>
<hr>
<h2><span id="jsfiddle">jsFiddle</span></h2>
<p>在文章中嵌入 jsFiddle。展示不知道如何使用。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% jsfiddle shorttag [tabs] [skin] [width] [height] %&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="gist">Gist</span></h2>
<p>在文章中嵌入 Gist。如何使用 Gist 可以查看<a href="https://www.zhihu.com/question/21343711" target="_blank" rel="noopener">这篇文章</a>。</p>
<h3><span id="模板">模板</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% gist gist_id [filename] %&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="iframe">iframe</span></h2>
<p>在文章中插入 iframe，实现在博客的一个 page 中嵌套另一个网页的某个页面。</p>
<h3><span id="模板">模板</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% iframe url [width] [height] %&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="实例">实例</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;iframe width&#x3D;&quot;100%&quot; scrolling&#x3D;no height&#x3D;&quot;800&quot; frameborder&#x3D;&quot;0&quot; src&#x3D;&quot;https:&#x2F;&#x2F;microbiomecat.gitee.io&#x2F;20200726&#x2F;QIIME2-based-amplicon-analysis-tutorial(Preparation)&#x2F;#more&quot;&gt;&lt;&#x2F;iframe&gt;</span><br></pre></td></tr></table></figure>
<iframe width="100%" scrolling="yes" height="800" frameborder="1" src="https://microbiomecat.gitee.io/20200726/QIIME2-based-amplicon-analysis-tutorial(Preparation)/#more"></iframe>
<h2><span id="image">Image</span></h2>
<p>在文章中插入指定大小的图片。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% img [class names] &#x2F;path&#x2F;to&#x2F;image [width] [height] &#39;&quot;title text&quot; &quot;alt text&quot;&#39; %&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="link">Link</span></h2>
<p>在文章中插入链接，并自动给外部链接添加 <code>target=&quot;_blank&quot;</code> 属性。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% link text url [external] [title] %&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="include-code">Include Code</span></h2>
<p>插入 <code>source/downloads/code</code> 文件夹内的代码文件。<code>source/downloads/code</code> 不是固定的，可以在配置文件中的 <code>code_dir</code> 进行修改的配置。</p>
<h3><span id="模板">模板</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% include_code [title] [lang:language] [from:line] [to:line] path&#x2F;to&#x2F;file %&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="实例1嵌入-demosh-文件全文">实例1：嵌入  文件全文</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% include_code lang:bash demo.sh %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><figcaption><span>demo.sh</span><a href="/downloads/code/demo.sh">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"Hello world"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Hello Hexo"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Hello Markdown"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Hello Microbiomecat"</span></span><br></pre></td></tr></table></figure>
<h3><span id="实例2嵌入-demosh-文件-只嵌入第-2-行">实例2：嵌入  文件, 只嵌入第 2 行</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% include_code lang:javascript from:2 to:2 demo.sh %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>demo.sh</span><a href="/downloads/code/demo.sh">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line">echo <span class="string">"Hello Hexo"</span></span><br></pre></td></tr></table></figure>
<h3><span id="实例3嵌入-demosh-文件-嵌入第-2-行至第-3-行">实例3：嵌入  文件, 嵌入第 2 行至第 3 行</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% include_code lang:javascript from:2 to:3 demo.sh %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>demo.sh</span><a href="/downloads/code/demo.sh">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line">echo <span class="string">"Hello Hexo"</span></span><br><span class="line">echo <span class="string">"Hello Markdown"</span></span><br></pre></td></tr></table></figure>
<h3><span id="实例4嵌入-demosh-文件-嵌入第-2-行至文件结束">实例4：嵌入  文件, 嵌入第 2 行至文件结束</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% include_code lang:javascript from:2 demo.sh %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>demo.sh</span><a href="/downloads/code/demo.sh">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line">echo <span class="string">"Hello Hexo"</span></span><br><span class="line">echo <span class="string">"Hello Markdown"</span></span><br><span class="line">echo <span class="string">"Hello Microbiomecat"</span></span><br></pre></td></tr></table></figure>
<h3><span id="实例4嵌入-demosh-文件-嵌入第-1-行至第-3-行">实例4：嵌入  文件, 嵌入第 1 行至第 3 行</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% include_code lang:javascript to:3 test.js %&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="youtube">Youtube</span></h2>
<p>在文章中插入 Youtube 视频。实际我们不怎么使用。</p>
<h3><span id="模板">模板</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% youtube video_id [type] [cookie] %&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="实例1视频">实例1：视频</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% youtube lJIrF4YjHfQ %&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="实例2播放列表">实例2：播放列表</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% youtube PL9hW1uS6HUfscJ9DHkOSoOX45MjXduUxo &#39;playlist&#39; %&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="实例2隐私模式">实例2：隐私模式</span></h3>
<p>禁止 YouTube cookie</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% youtube lJIrF4YjHfQ false %&#125;</span><br><span class="line">&#123;% youtube PL9hW1uS6HUfscJ9DHkOSoOX45MjXduUxo &#39;playlist&#39; false %&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="vimeo">Vimeo</span></h2>
<p>在文章中插入 Vimeo 视频。暂时没有尝试。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% vimeo video_id %&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="引用文章">引用文章</span></h2>
<p>引用其他文章的链接。</p>
<h3><span id="模板">模板</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% post_path filename %&#125;</span><br><span class="line">&#123;% post_link filename [title] [escape] %&#125;</span><br></pre></td></tr></table></figure>
<p>在使用此标签时可以忽略文章文件所在的路径或者文章的永久链接信息、如语言、日期。</p>
<p>例如，在文章中使用 <code></code> 时，只需有一个名为 <code>how-to-bake-a-cake.md</code> 的文章文件即可。即使这个文件位于站点文件夹的 <code>source/posts/2015-02-my-family-holiday</code> 目录下、或者文章的永久链接是 <code>2018/en/how-to-bake-a-cake</code>，都没有影响。</p>
<p>默认链接文字是文章的标题，你也可以自定义要显示的文本。此时不应该使用 Markdown 语法 <code>[]()</code>。</p>
<p>默认对文章的标题和自定义标题里的特殊字符进行转义。可以使用<code>escape</code>选项，禁止对特殊字符进行转义。</p>
<h3><span id="实例1链接使用文章的标题">实例1：链接使用文章的标题</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">点击查看&#123;% post_link Markdown实用语法 %&#125;</span><br></pre></td></tr></table></figure>
<p>点击查看<a href="/20200809/Markdown_Programming_Language/" title="Markdown 实用语法">Markdown 实用语法</a></p>
<h3><span id="实例2链接使用自定义文字">实例2：链接使用自定义文字</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">点击查看&#123;% post_link Markdown实用语法 &#39;我的第二篇文章&#39; %&#125;</span><br></pre></td></tr></table></figure>
<p>点击查看<a href="/20200809/Markdown_Programming_Language/" title="我的第二篇文章">我的第二篇文章</a></p>
<h3><span id="实例3禁止对标题的特殊字符进行转义">实例3：禁止对标题的特殊字符进行转义</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% post_link QIIME2分析教程-准备篇 &#39;How to use &lt;b&gt; qiime2 &lt;&#x2F;b&gt;&#39; true %&#125;这个标题就不对了。</span><br></pre></td></tr></table></figure>
<a href="/20200726/QIIME2-based-amplicon-analysis-tutorial(Preparation)/" title="How to use &lt;b&gt; qiime2 &lt;&#x2F;b&gt;">How to use &lt;b&gt; qiime2 &lt;&#x2F;b&gt;</a>
<h3><span id="实例4对标题的特殊字符进行转义">实例4：对标题的特殊字符进行转义</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% post_link QIIME2分析教程-准备篇 &#39;How to use &lt;b&gt; qiime2 &lt;&#x2F;b&gt;&#39; false %&#125;</span><br></pre></td></tr></table></figure>
<a href="/20200726/QIIME2-based-amplicon-analysis-tutorial(Preparation)/" title="How to use &lt;b&gt; qiime2 &lt;&#x2F;b&gt;">How to use <b> qiime2 </b></a>这个标题才是对的。
<h2><span id="引用资源">引用资源</span></h2>
<p>Asset 指的是那些不在 source 目录下的资源，比如图片、CSS 文件或者 Javascript 文件。Hexo 提供一种更方便的方法来管理这些资源。使用前需要修改站点的配置文件中的 post_asset_folder 的设置，将其值改为 true 。<br>
当生效后，在你创建文章的时候，Hexo会创建一个同名目录，你可以将该文章关联的资源全部放到该目录下。这样就可以更加方便的使用它们了。</p>
<h3><span id="模板">模板</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% asset_path filename %&#125;</span><br><span class="line">&#123;% asset_img filename [title] %&#125;</span><br><span class="line">&#123;% asset_link filename [title] [escape] %&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="实例插入图片">实例：插入图片</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% asset_img reward1.jpg 喜欢就赞赏一下吧 %&#125;</span><br></pre></td></tr></table></figure>
<img src="/20200809/HexoTagPlugins_Programming_Language/reward1.jpg" class title="喜欢就赞赏一下吧">
<h2><span id="raw">Raw</span></h2>
<p>如果您想在文章中插入 Swig 标签，可以尝试使用 Raw 标签，以免发生解析异常。展示不懂。</p>
<h3><span id="模板">模板</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">内容</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="文章摘要和截断">文章摘要和截断</span></h2>
<p>在文章中使用 <code>&lt;!-- more --&gt;</code>，那么 <code>&lt;!-- more --&gt;</code> 之前的文字将会被视为摘要。首页中将只出现这部分文字，同时这部分文字也会出现在正文之中。</p>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">## 摘要</span><br><span class="line">1，我很棒</span><br><span class="line">2. 你也是</span><br><span class="line">&lt;!-- more --&gt;</span><br><span class="line">巴拉巴拉</span><br></pre></td></tr></table></figure>
<p>首页中将只会出现</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">## 摘要</span><br><span class="line">1，我很棒</span><br><span class="line">2. 你也是</span><br></pre></td></tr></table></figure>
<p>正文中则会出现</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">## 摘要</span><br><span class="line">1，我很棒</span><br><span class="line">2. 你也是</span><br><span class="line"></span><br><span class="line">巴拉巴拉</span><br></pre></td></tr></table></figure>
<p>注意，摘要可能会被 Front Matter 中的 <code>excerpt</code> 覆盖。</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>其他</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>基于 QIIME2 的扩增子分析教程-准备篇</title>
    <url>/20200726/QIIME2-based-amplicon-analysis-tutorial(Preparation)/</url>
    <content><![CDATA[<h2><span id="摘要">摘要</span></h2>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img-1.png" class="[class names]" width="400" height="320" title="Docker and QIIME2 " alt="使用 Docker Desktop for Windows 搭建 QIIME2 分析平台">
<ul>
<li>使用 Docker Desktop for Windows 搭建 QIIME2 分析平台</li>
<li>Docker 的使用方法简介</li>
<li>准备扩增子测序所需的测试数据</li>
</ul>
<a id="more"></a>
<hr>
<!-- toc -->
<ul>
<li><a href="#%E5%BA%8F">序</a></li>
<li><a href="#%E8%83%8C%E6%99%AF">背景</a></li>
<li><a href="#%E6%90%AD%E5%BB%BA%E5%88%86%E6%9E%90%E7%8E%AF%E5%A2%83">搭建分析环境</a>
<ul>
<li><a href="#%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F%E7%AE%80%E4%BB%8B">安装方式简介</a>
<ul>
<li><a href="#%E7%B1%BBunix%E5%8E%9F%E7%94%9F%E5%AE%89%E8%A3%85">类Unix原生安装</a></li>
<li><a href="#%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF">虚拟化技术</a></li>
</ul>
</li>
<li><a href="#%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4">安装步骤</a>
<ul>
<li><a href="#%E5%BC%80%E5%90%AF%E8%99%9A%E6%8B%9F%E5%8C%96">开启虚拟化</a></li>
<li><a href="#%E5%AE%89%E8%A3%85-docker-desktop-for-windows">安装 Docker Desktop for Windows</a></li>
<li><a href="#docker-%E5%8A%A0%E9%80%9F%E9%95%9C%E5%83%8F">Docker 加速镜像</a></li>
<li><a href="#%E4%B8%8B%E8%BD%BD-qiime2-%E9%95%9C%E5%83%8F">下载 QIIME2 镜像</a></li>
<li><a href="#docker-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C">Docker 的基本操作</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E5%87%86%E5%A4%87%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE">准备原始数据</a></li>
</ul>
<!-- tocstop -->
<h2><span id="序">序</span></h2>
<p>其实本文之前有过一个版本，但是忘记了上传github（懒癌晚期患者），源文件又不知为何丢失了（个人分析是开了两个文件，一个编辑了，一个没有，后者也进行了保存而导致的）😭😭😭，所以这个版本笔者是快速重新写了一遍，和之前那个版本相比，可能简略了一部分内容，毕竟心态崩了😔😔😔，之后本人会慢慢修改完善的。</p>
<hr>
<h2><span id="背景">背景</span></h2>
<p><strong>扩增子测序</strong>，特别是基于 16S rRNA 基因相应可变区域的扩增子测序，是当下微生物研究者们普遍采用的一种检测分析手段。而对于这一研究手段，其难点就在于如何对测序数据进行处理分析。而目前最为流行的两大分析工具，分别是 <a href="https://qiime2.org/" target="_blank" rel="noopener">QIIME2</a> 和 <a href="http://www.drive5.com/usearch/" target="_blank" rel="noopener">USEARCH</a>。国内知名的科研公众号<a href="https://blog.csdn.net/woodcorpse/" target="_blank" rel="noopener">宏基因组</a>对这两个分析工具都进行了详细的分析教程，包括中文翻译的使用文档。这些文档可以作为分析时查看相应命令参数的工具书👍👍👍，但在实际分析中，分析者其实仍旧会遇到各种各样的问题，特别是如何选择参数😵😵😵，要知道，轻微地修改某些参数，就可能导致最终分析结果的巨大变化；而这些是普通文档没有讲清楚的，也是本分析教程要着重帮助大家学习。</p>
<p>目前初步打算将本教程设计为一个系列教程，从如何搭建分析平台和环境，到详细讲解 <a href="https://qiime2.org/" target="_blank" rel="noopener">QIIME2</a> 实战分析的几种 pipeline 流程，如其中的 DADA2 pipeline、VSEARCH pipeline等等；之后再考虑基于分析的结果，拓展一些绘图分析的教程。</p>
<p>关于 QIIME2 的简介可以点击<a href="https://docs.qiime2.org/2020.6/getting-started/" target="_blank" rel="noopener">这里</a>（官网，英文）和<a href="https://blog.csdn.net/woodcorpse/article/details/75103929" target="_blank" rel="noopener">这里</a>（宏基因组，中文）查看。推荐在学习本教程的过程中，通过以上链接来学习相应的基本概念😀😀😀。也就是说，<u>本教程是进阶版的教程</u>。</p>
<hr>
<h2><span id="搭建分析环境">搭建分析环境</span></h2>
<h3><span id="安装方式简介">安装方式简介</span></h3>
<h4><span id="类unix原生安装">类Unix原生安装</span></h4>
<p>原生的 QIIME2 是在 linux 系统上搭建的，因此，原生的安装也需要在linux系统上进行；此外，由于MAC OS系统其实和 linux 系统一样，也属于 Unix 系统的衍生👪，所以也可以原生地安装 QIIME2 软件 (具体的安装方式和 Linux 其实是一致的)。说 QIIME2 是一个软件，其实倒不如说 QIIME2 是一堆软件或脚本，它通过将已有的一些分析脚本/软件的输入输出文件格式以及参数范式化，而达到将这些分析脚本/软件串联成分析流程/网络的目的。而正因如此，QIIME2 需要将这些分析脚本/软件全部安装到系统中去，才能完成这个分析平台的搭建。因此，我们就需要安装 Minconda 来提供 <a href="https://docs.conda.io/en/latest/" target="_blank" rel="noopener">conda</a> 环境（<u>“环境”的作用是解决软件之间的冲突问题</u>）并快速安装和管理 QIIME2 所需的主程序和插件。以下是原文的描述：</p>
<blockquote>
<p>Miniconda provides the conda environment and package manager, and is the recommended way to install QIIME 2. Follow the Miniconda instructions for downloading and installing Miniconda. You may choose either Miniconda2 or Miniconda3 (i.e. Miniconda Python 2 or 3). QIIME 2 will work with either version of Miniconda.</p>
</blockquote>
<p>所以Miniconda2和Minconda3都是可以的，当然，更推荐Minconda3，因为所对应的是 Python3（这就别问为什么了😶😶😶）。<br>
安装的方法也非常的简单，直接按照<a href="https://docs.qiime2.org/2020.6/install/native/" target="_blank" rel="noopener">官网流程</a>来就行了，或者参考宏基因组的翻译的<a href="https://blog.csdn.net/woodcorpse/article/details/75103929" target="_blank" rel="noopener">中文流程</a>。当然实际安装中可能会遇到一些包下载不了的问题，当然，最直接的方法就是<strong>多试几次</strong>😅😅😅，或者有机会的话，我会在以后的教程中叫大家如何有效解决😏😏😏。因此，这里再不展开介绍如何原生安装 QIIME2。</p>
<hr>
<h4><span id="虚拟化技术">虚拟化技术</span></h4>
<ol>
<li>
<p>VirtualBox虚拟机</p>
</li>
<li>
<p>VMware虚拟机</p>
</li>
<li>
<p>云服务器</p>
</li>
<li>
<p>Docker容器引擎<br>
<a href="https://www.docker.com/" target="_blank" rel="noopener">Docker</a> 其实和一般的虚拟机是有本质区别的（他不是一个虚拟“机”而是一个容“器”），它基于 GO 语言，是一个开源的应用容器引擎。他可以提供一个轻量级、可移植的容器，以加载开发者的应用、脚本、依赖，并发布到目前常见的 Linux、Mac OS 以及 Windows 系统上去，后者即为虚拟化。<br>
相比其他的虚拟化技术，Docker 最大的特点是<u>容器性能的开销极低</u>❤️❤️❤️。因此，非常适合于作为教程学习软件来在 Windows 的系统中搭建 QIIME2 使用。</p>
</li>
</ol>
<hr>
<h3><span id="安装步骤">安装步骤</span></h3>
<p>本教程选择具有低资源门槛，多系统兼容和可移植性的 docker 技术来搭建/安装 QIIME2 分析平台；初学者可以先在 windows 系统上安装配置该分析平台，并满足对本分析教程的学习以及小规模数据的分析，而在有大规模数据分析需求的时候，docker 也可以快速移植到工作站和服务器上面（当然，这部分教程我会在以后补充😝😝😝）。<br>
安装的过程大致为：</p>
<ul>
<li>开启虚拟化</li>
<li>安装 Docker for Windows</li>
<li>下载 QIIME2 镜像</li>
<li>Docker 的基本操作</li>
</ul>
<h4><span id="开启虚拟化">开启虚拟化</span></h4>
<p>我们将使用 <a href="https://docs.docker.com/docker-for-windows/install/" target="_blank" rel="noopener">Docker Desktop for Windows</a> 软件来实现在 Windows 系统上安装和运行 docker。开始安装之前，我们得首先确定自己的系统可以安装这个软件。安装<br>
Docker for Windows 需要你的 Windows 版本为 64 位的 Windows 10 Pro <strong>专业版</strong>、<strong>企业版</strong>和<strong>教育版</strong>（1607 年纪念更新，版本 14393 或更高版本）。<u>家庭版的安装不能使用本教程，或许可以参考<a href="https://docs.docker.com/docker-for-windows/install-windows-home/" target="_blank" rel="noopener">这里</a></u>。如果你的 Windows版本不是这些，那么建议你先升级自己的 Windows。比如家庭版 Windows 10 其实只需要购买一个专业版的 key 就可以快速升级了，别问我哪里能买到哦㊙️㊙️㊙️。或者你也可以安装 <a href="https://docs.docker.com/toolbox/overview/" target="_blank" rel="noopener">Docker Toolbox</a>，至于怎么安装，请自行百度了，毕竟我也没用过😝😝😝。比如我的笔记本是 windows 10 专业版的：</p>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img0.jpg" class="[class names]" width="750" height="480" title="windows版本">
<p>确定自己的系统满足以上要求后,我们需要先确认自己的电脑打开了虚拟化，首先键盘按 Ctrl + Alt + Delete 来调出任务管理器：</p>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img0.1.jpg" class="[class names]" width="645" height="585" title="查看虚拟化">
<p>我这边显示“已启用”，如果你的电脑显示“未启用”之类的，那么请执行以下操作：<u><strong>打开“程序与功能”–&gt;选中“启用或关闭 Windows 功能”中的“Hyper-V”–&gt;确定后重启电脑</strong></u>。</p>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img1.jpg" class="[class names]" width="600" height="600" title="程序与功能">
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img2.jpg" class="[class names]" width="660" height="330" title="Hyper-V">
<p>重启电脑后，我们再次 Ctrl + Alt + Delete 调出任务管理器查看是否开启了虚拟化。<br>
<small>对于安装了、安装过 VMware 的系统，请彻底卸载 VMware 后再执行以上过程。</small></p>
<h4><span id="安装-docker-desktop-for-windows">安装 Docker Desktop for Windows</span></h4>
<p>开启虚拟化后，到 Docker 官网下载 Docker Desktop for Windows，点击<a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">这里</a>或<a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">这里</a>跳转到下载页面如下。</p>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img3.jpg" class="[class names]" width="540" height="300" title="下载Docker1">
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img3.2.jpg" class="[class names]" width="780" height="480" title="下载Docker2">
<p>以上下载页面只需要选择一个哦☝️。<br>
打开下载的安装包，依次点击就可以进行安装了，需要注意的是，安装包会自行判断你的系统是否可以安装 Docker Desktop for Windows。如果你的虚拟化没有打开，那可能就会安装失败了。<br>
<small>对于安装了、安装过 VMware 的系统，这一步如果失败了，可以尝试关闭 Hyper-V 后重启，再打开 Hyper-V 再重启，也许就可以解决问题了（这是我当时的解决方式）。</small><br>
完成安装后，可以看到 Docker Desktop 已经在开始菜单中了：</p>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img4.jpg" class="[class names]" width="410" height="460" title="打开Docker1">
<p>我们点击图标打开它。此时可以发现屏幕右下角的任务栏系统托盘区，出现了一个鲸鱼🐋的图标，并且鼠标放在上面后显示“Docker Desktop is running”，这说明 Docker 引擎已经启动了。</p>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img5.jpg" class="[class names]" width="500" height="165" title="打开Docker2">
<p>第一次安装启用可能会弹出 Docker Cloud 的登录界面，可以先关掉，也可以去注册然后登录，使用和git有点类似，这里先不讲：</p>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img4.5.jpg" class="[class names]" width="500" height="300" title="打开Docker3">
<hr>
<h4><span id="docker-加速镜像">Docker 加速镜像</span></h4>
<p>国内从 DockerHub 拉取镜像时，会很慢，此时可以尝试配置镜像加速器。可以尝试百度查找可用的国内加速器服务。我们这里使用阿里云的镜像:<a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors" target="_blank" rel="noopener">https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors</a>，可以用你的支付宝/淘宝账号登陆。</p>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img8.1.jpg" class="[class names]" width="750" height="320" title="获取镜像1">
<p>登陆后，点击左侧菜单栏中的镜像加速器，就可以看到属于你的专属地址：</p>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img8.jpg" class="[class names]" width="500" height="300" title="获取镜像2">
<p>先复制这个地址。然后右键点击屏幕右下角的任务栏系统托盘区，并点击弹出的列表中的 Settings。此时会弹出一个设置窗口，我们点击 Docker Engine，并修改 registry-mirrors 项（也就是 registry-mirrors 一行下面双引号的内容）为刚才复制的地址；如果没有 registry-mirrors，那么则自己手动添加</p>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img9.jpg" class="[class names]" width="800" height="400" title="获取镜像3">
<p>之后点击 Apply &amp; Restart, Docker 就会重启并应用我们配置的镜像地址了。</p>
<hr>
<h4><span id="下载-qiime2-镜像">下载 QIIME2 镜像</span></h4>
<p>我们打开 window 10 自带的 Powershell，如果你使用的是 VScode 编辑器，也可以用它里面的终端（其实也就是 Powershell）：</p>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img6.jpg" class="[class names]" width="500" height="500" title="下载镜像1">
<p>我们可以先看一下镜像加速地址是否配置正确，在 Powershell 的终端中输入 docker info，可以看到出现的信息的最后部分，就有 “Registry Mirrors”，检查其下的地址是否正确。</p>
<figure class="highlight bash"><figcaption><span>查docker信息</span></figcaption><table><tr><td class="code"><pre><span class="line">docker info</span><br></pre></td></tr></table></figure>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img14.jpg" class="[class names]" width="700" height="200" title="下载镜像2">
<p>接着我们再在终端输入</p>
<figure class="highlight bash"><figcaption><span>拉取镜像</span></figcaption><table><tr><td class="code"><pre><span class="line">docker pull qiime2/core:2020.6</span><br></pre></td></tr></table></figure>
<p><small>此操作类似于 git 的拉取</small><br>
此时就开始下载 QIIME2 的镜像了。</p>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img7.jpg" class="[class names]" width="700" height="230" title="下载镜像3">
<p>如果下载中出现问题，或者下载速度归零，那么可以使用 Ctrl + C 结束当前的进行，并按“上”键（键盘右下角的上下左右键哦），获取刚才输入的命令，然后“回车”键重新运行拉取命令。我花了大概两个小时才下载完成，一个经验是在夜里 12 点之后，下载速度会快很多。</p>
<hr>
<h4><span id="docker-的基本操作">Docker 的基本操作</span></h4>
<p>下载完成后，我们在终端输入以下命令，查看当前系统中的镜像有哪些？</p>
<figure class="highlight bash"><figcaption><span>查看镜像</span></figcaption><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img10.jpg" class="[class names]" width="750" height="185" title="运行docker1">
<p>我们发现除了 qiime2:2020.6 的最新版本，我们可以发现，系统中还有一个 qiime2:2020.2 的老版本，我希望把它删除掉，释放一些空间出来，那么，就在终端中输入：</p>
<figure class="highlight bash"><figcaption><span>删除镜像</span></figcaption><table><tr><td class="code"><pre><span class="line">docker rmi qiime2/core:2020.2</span><br></pre></td></tr></table></figure>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img11.png" class="[class names]" width="750" height="299" title="运行docker2">
<p>再次查看系统中的镜像，便可发现 qiime2:2020.2 的老版本已经被移除掉了。</p>
<p>接下来，我们可以尝试运行这个刚下载的镜像 qiime2/core:2020.6。需要注意的是，我们用 “–name” 给创建的容器命名为 “qiime2-2020-6”；再不修改容器名的情况下，我们不能重新运行以下命令（因为已经有这个容器了）。</p>
<figure class="highlight bash"><figcaption><span>第一次运行docker镜像</span></figcaption><table><tr><td class="code"><pre><span class="line">docker run --name qiime2-2020-6 -it qiime2/core:2020.6</span><br></pre></td></tr></table></figure>
<p>参数解析：</p>
<p>–name 容器名</p>
<p>-t: 在新容器内指定一个伪终端或终端。</p>
<p>-i: 允许你对容器内的标准输入 (STDIN) 进行交互。</p>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img12.jpg" class="[class names]" width="650" height="500" title="运行docker3">
<p>注意第二行的 root@5d0b9481a30e:/data#，可以发现，我们其实已进入了一个安装有 qiime2 的 linux 系统的容器。</p>
<p>我们可以输入</p>
<figure class="highlight bash"><figcaption><span>查看docker中安装的QIIME2的信息</span></figcaption><table><tr><td class="code"><pre><span class="line">qiime info</span><br></pre></td></tr></table></figure>
<p>查看 qiime2 是否真的在这个系统里了。如果没有什么纰漏，那么我们将看到 qiime2:2020.6 的相应信息，具体请参见上图。</p>
<p>若要退出容器，可以在命令行输入<code>exit</code>或是在键盘上同时按 Ctrl + D。</p>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img13.jpg" class="[class names]" width="900" height="90" title="运行docker4">
<p>现在，我们不光下载了一个 QIIME2 的镜像，而且其实也创建了一个名为 qiime2-2020-6 的 Docker 容器（注意刚才 docker run 命令）。</p>
<p>我们可以使用以下命令查看当前系统中的容器（结果见上图）。我们可以发现这个容器目前的状态为 “Exited”。</p>
<figure class="highlight bash"><figcaption><span>查看容器</span></figcaption><table><tr><td class="code"><pre><span class="line">docker ps -a <span class="comment">## 查看全部的容器</span></span><br><span class="line"></span><br><span class="line">docker ps <span class="comment">## 查看启动的容器</span></span><br></pre></td></tr></table></figure>
<p>此时我们若需要重新运行这个容器，测需要使用如下命令。</p>
<figure class="highlight bash"><figcaption><span>启动与重启docker</span></figcaption><table><tr><td class="code"><pre><span class="line">docker start qiime2-2020-6 <span class="comment">## 启动一个已停止的容器</span></span><br><span class="line"></span><br><span class="line">docker restart qiime2-2020-6 <span class="comment">## 无论是否停止，直接重启一个容器</span></span><br></pre></td></tr></table></figure>
<p>若此时再使用 <code>docker ps -a</code> 命令，则会发现，此时的容器已经处于 “Up” 状态。但是，与第一次启动容器不同，我们并没有进入容器中。</p>
<p>我们可使用 attach 命令进入容器:</p>
<figure class="highlight bash"><figcaption><span>进入docker的一种方式</span></figcaption><table><tr><td class="code"><pre><span class="line">docker attach qiime2-2020-6</span><br></pre></td></tr></table></figure>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img15.jpg" class="[class names]" width="850" height="230" title="运行docker5">
<p>可以发现，在退出时，这个容器也停止了。<br>
我们再使用 exec 命令进入容器:</p>
<figure class="highlight bash"><figcaption><span>进入docker的另一种方式</span></figcaption><table><tr><td class="code"><pre><span class="line">docker start qiime2-2020-6 <span class="comment">## 首先需要重新运行这个容器</span></span><br><span class="line"></span><br><span class="line">docker <span class="built_in">exec</span> -it qiime2-2020-6 /bin/bash <span class="comment">## 进入容器，并执行“打开一个bash”的命令</span></span><br></pre></td></tr></table></figure>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img16.jpg" class="[class names]" width="800" height="200" title="运行docker6">
<p>可以发现，在退出时，这个容器并没有停止。</p>
<p>若我们想要关闭这个容器，则使用 kill 命令:</p>
<figure class="highlight bash"><figcaption><span>杀死正在运行中的容器</span></figcaption><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">kill</span> -s KILL qiime2-2020-6</span><br></pre></td></tr></table></figure>
<img src="/../image/QIIME2%E5%88%86%E6%9E%90%E6%95%99%E7%A8%8B-%E5%87%86%E5%A4%87%E7%AF%87/img17.jpg" class="[class names]" width="800" height="200" title="运行docker7">
<p>我们尝试在容器中运行命令 cat /proc/version和ls分别查看当前系统的版本信息和当前目录下的文件列表</p>
<hr>
<h2><span id="准备原始数据">准备原始数据</span></h2>
<p>以后教程所用到的原始文件，可点击<a href="https://microbiomecat.lanzous.com/if8MMf85h2h" target="_blank" rel="noopener">这里</a>下载，并将下载的文件放到相应位置，以便挂在到 Docker 中去。<br>
你也可以在 Docker 环境中使用如下代码下载并解压。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir tutorial; <span class="built_in">cd</span> tutorial</span><br><span class="line"></span><br><span class="line">wget https://github.com/microbiomeCat/tutorials/blob/master/qiime2_dada2/rawdata.tar.gz</span><br><span class="line"></span><br><span class="line">tar -xzvf rawdata.tar.gz</span><br></pre></td></tr></table></figure>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>扩增子</category>
      </categories>
      <tags>
        <tag>QIIME2</tag>
        <tag>扩增子</tag>
      </tags>
  </entry>
  <entry>
    <title>基于 QIIME2 的扩增子分析教程-实战篇</title>
    <url>/20201006/QIIME2-based-amplicon-analysis-tutorial(Practical)/</url>
    <content><![CDATA[<h2><span id="摘要">摘要</span></h2>
<p>使用 QIIME2 2020-8 进行扩增子测序的实际下机数据 (PE250) 的分析。</p>
<a id="more"></a>
<hr>
<!-- toc -->
<ul>
<li><a href="#%E4%B8%80-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE">一、获取数据</a></li>
<li><a href="#%E4%BA%8C-%E5%8F%82%E6%95%B0%E6%B1%87%E6%80%BB">二、参数汇总</a></li>
<li><a href="#%E4%B8%89-%E5%88%9B%E5%BB%BAmanifest%E6%96%87%E4%BB%B6">三、创建manifest文件</a></li>
<li><a href="#%E5%9B%9B-%E4%B8%80%E4%B8%AA%E6%96%87%E5%BA%93%E7%9A%84%E6%93%8D%E4%BD%9C%E6%BC%94%E7%A4%BA">(四)、一个文库的操作演示</a>
<ul>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5-qiime2">数据导入 QIIME2</a></li>
<li><a href="#%E5%88%87%E9%99%A4%E5%BC%95%E7%89%A9">切除引物</a></li>
<li><a href="#dada2">DADA2</a></li>
</ul>
</li>
<li><a href="#%E5%9B%9B-%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E6%96%87%E5%BA%93">四、一个或多个文库</a></li>
<li><a href="#%E4%BA%94-%E5%90%88%E5%B9%B6%E7%89%B9%E5%BE%81%E5%BA%8F%E5%88%97%E4%B8%8E%E7%89%B9%E5%BE%81%E8%A1%A8%E6%A0%BC">五、合并特征序列与特征表格</a></li>
<li><a href="#%E5%85%AD-%E5%BB%BA%E6%A0%91">六、建树</a></li>
<li><a href="#%E4%B8%83-%E7%89%A9%E7%A7%8D%E6%B3%A8%E9%87%8A">七、物种注释</a></li>
<li><a href="#%E5%85%AB-%E6%A0%B8%E5%BF%83%E5%A4%9A%E6%A0%B7%E6%80%A7%E6%8C%87%E6%95%B0">八、核心多样性指数</a></li>
<li><a href="#%E5%8D%81-qiime2r-%E5%8F%AF%E8%A7%86%E5%8C%96%E6%8E%A2%E7%B4%A2">十、qiime2R 可视化探索</a>
<ul>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5">数据导入</a></li>
<li><a href="#%E7%BB%98%E5%9B%BE">绘图</a></li>
</ul>
</li>
<li><a href="#%E9%99%84%E6%9E%84%E5%BB%BA%E6%B3%A8%E9%87%8A%E6%95%B0%E6%8D%AE%E5%BA%93">附：构建注释数据库</a></li>
</ul>
<!-- tocstop -->
<h2><span id="一-获取数据">一、获取数据</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 重启psn_qiime2容器</span></span><br><span class="line">docker restart psn_qiime2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 交互模式，打开容器的一个终端</span></span><br><span class="line">docker <span class="built_in">exec</span> -it psn_qiime2 bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line">rm -rf  qiime2-tutorial/qiime2-practical_tutorial/</span><br><span class="line">mkdir -p qiime2-tutorial/qiime2-practical_tutorial/</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> qiime2-tutorial/qiime2-practical_tutorial/</span><br><span class="line"></span><br><span class="line">cp /data/qiime2/data/02_data/practical_rawdata.tar.gz .</span><br><span class="line">cp /data/qiime2/data/02_data/practical_metadata.tsv .</span><br><span class="line"></span><br><span class="line">tar -xzvf practical_rawdata.tar.gz </span><br><span class="line">rm practical_rawdata.tar.gz</span><br><span class="line"></span><br><span class="line">mv rawdata/ 1_rawdata</span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设样本测序数据来自两个文库</span></span><br><span class="line"><span class="built_in">cd</span> 1_rawdata</span><br><span class="line">gzip *</span><br><span class="line">mkdir lib1 lib2</span><br><span class="line">mv B* G* lib1</span><br><span class="line">mv H* S* lib2</span><br><span class="line"><span class="built_in">cd</span> -</span><br><span class="line"></span><br><span class="line"><span class="comment">#  说明：</span></span><br><span class="line"><span class="comment">## 这样便完成了数据层面的准备，如下图。</span></span><br><span class="line"><span class="comment">## 注意，每个序列的原始数据文件都有两个，命名需要符合以下规则：以_分隔样本名和R1或R2，格式为fq.gz (即fastq格式,并进行gzip压缩)。</span></span><br><span class="line"><span class="comment">## 以上的脚本需要根据具体的原始数据的位置、命名进行灵活调整。</span></span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200923152644270.png" alt="image-20200923152644270" style="zoom:200%;">
<h2><span id="二-参数汇总">二、参数汇总</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 输入引物序列</span></span><br><span class="line">front_f=<span class="string">"GTGCCAGCMGCCGCGGTAA"</span></span><br><span class="line">front_r=<span class="string">"CCGTCAATTCCTTTGAGTTT"</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用核数</span></span><br><span class="line">thread=2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 扩增子类型与区域</span></span><br><span class="line">region=<span class="string">"16S_V4V5"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 物种注释数据库</span></span><br><span class="line">db=gg_13_8_99_16S_V4V5_classifier.qza</span><br></pre></td></tr></table></figure>
<h2><span id="三-创建manifest文件">三、创建manifest文件</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"sample-id"</span> &gt; sample-id</span><br><span class="line">ls 1_rawdata/*/*R1* | sed <span class="string">"s/.*\///"</span> | cut -f 1 -d <span class="string">"_"</span> &gt;&gt; sample-id</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"forward-absolute-filepath"</span> &gt; forward-absolute-filepath</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"reverse-absolute-filepath"</span> &gt; reverse-absolute-filepath</span><br><span class="line">ls 1_rawdata/*/*R1* | xargs -i <span class="built_in">echo</span> <span class="string">"<span class="variable">$PWD</span>/&#123;&#125;"</span> &gt;&gt;  forward-absolute-filepath </span><br><span class="line">ls 1_rawdata/*/*R2* | xargs -i <span class="built_in">echo</span> <span class="string">"<span class="variable">$PWD</span>/&#123;&#125;"</span> &gt;&gt;  reverse-absolute-filepath </span><br><span class="line"></span><br><span class="line">paste sample-id forward-absolute-filepath reverse-absolute-filepath &gt; manifest_all</span><br><span class="line">rm sample-id forward-absolute-filepath reverse-absolute-filepath</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200923153925004.png" alt="image-20200923153925004"></p>
<h2><span id="四-一个文库的操作演示">(四)、一个文库的操作演示</span></h2>
<h3><span id="数据导入-qiime2">数据导入 QIIME2</span></h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">i=1_rawdata/lib1</span><br><span class="line">lib=`<span class="built_in">echo</span> <span class="variable">$i</span> | cut -f2 -d<span class="string">"/"</span> `</span><br><span class="line"></span><br><span class="line">manifest_f=`<span class="built_in">echo</span> <span class="variable">$i</span> | sed <span class="string">"s/1_rawdata\//manifest_/"</span>`</span><br><span class="line">head -n1 manifest_all &gt; <span class="variable">$manifest_f</span></span><br><span class="line">ls <span class="variable">$i</span>/*R1* | xargs -i grep &#123;&#125; manifest_all &gt;&gt; <span class="variable">$manifest_f</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将结果放到2_dada2 里面去</span></span><br><span class="line">mkdir -p 2_dada2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">qiime tools import \</span><br><span class="line">	--<span class="built_in">type</span> <span class="string">'SampleData[PairedEndSequencesWithQuality]'</span> \</span><br><span class="line">    --input-path <span class="variable">$manifest_f</span> \</span><br><span class="line">    --output-path 2_dada2/demux_<span class="variable">$lib</span>.qza \</span><br><span class="line">    --input-format PairedEndFastqManifestPhred33V2</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200923155639628.png" alt="image-20200923155639628"></p>
<h3><span id="切除引物">切除引物</span></h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># cutadapt</span></span><br><span class="line">qiime cutadapt trim-paired  \</span><br><span class="line">	--i-demultiplexed-sequences 2_dada2/demux_<span class="variable">$lib</span>.qza \</span><br><span class="line">    --p-cores <span class="variable">$thread</span> \</span><br><span class="line">    --p-error-rate 0.2 \</span><br><span class="line">    --p-times 1 \</span><br><span class="line">    --p-overlap $[<span class="variable">$&#123;#front_f&#125;</span>*9/10] \</span><br><span class="line">    --p-front<span class="_">-f</span> <span class="variable">$front_f</span> \</span><br><span class="line">    --o-trimmed-sequences 2_dada2/demux_no_primer_<span class="variable">$&#123;lib&#125;</span>_1.qza \</span><br><span class="line">    --p-discard-untrimmed True</span><br><span class="line"> </span><br><span class="line">qiime cutadapt trim-paired  \</span><br><span class="line">	--i-demultiplexed-sequences 2_dada2/demux_no_primer_<span class="variable">$&#123;lib&#125;</span>_1.qza \</span><br><span class="line">    --p-cores <span class="variable">$thread</span> \</span><br><span class="line">    --p-error-rate 0.2 \</span><br><span class="line">    --p-times 1 \</span><br><span class="line">    --p-overlap $[<span class="variable">$&#123;#front_r&#125;</span>*9/10] \</span><br><span class="line">    --p-front-r <span class="variable">$front_r</span> \</span><br><span class="line">    --o-trimmed-sequences 2_dada2/demux_no_primer_<span class="variable">$&#123;lib&#125;</span>.qza \</span><br><span class="line">    --p-discard-untrimmed True</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看序列长度与质量分布</span></span><br><span class="line">qiime demux summarize \</span><br><span class="line">  --i-data 2_dada2/demux_no_primer_<span class="variable">$lib</span>.qza \</span><br><span class="line">  --o-visualization 2_dada2/demux_no_primer_<span class="variable">$lib</span>.qzv</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200923172129340.png" alt="image-20200923172129340"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200923172206120.png" alt="image-20200923172206120"></p>
<h3><span id="dada2">DADA2</span></h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 计算参数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## PE300还是250？</span></span><br><span class="line">PE_length=`cut -f2 <span class="variable">$manifest_f</span> | grep <span class="string">"fq.gz"</span> | </span><br><span class="line">head -n 1 | xargs -i zcat &#123;&#125; | </span><br><span class="line">awk <span class="string">'FNR%4==2&#123;print length&#125;'</span> | </span><br><span class="line">sort -n | tail -n 1000 | head -n 1`</span><br><span class="line"></span><br><span class="line">PElength=PE250</span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$PE_length</span> -ge 260 ]]; <span class="keyword">then</span></span><br><span class="line">  PElength=PE300</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$PE_length</span> -lt 260 ]]; <span class="keyword">then</span></span><br><span class="line">  PElength=PE250</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$PE_length</span> -lt 160 ]]; <span class="keyword">then</span></span><br><span class="line">  PElength=PE150</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 使用记载的dada2参数</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$region</span> == <span class="string">"16S_V3V4"</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE300"</span> ]; <span class="keyword">then</span></span><br><span class="line">      tlf=230</span><br><span class="line">      tlr=220</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE250"</span> ]; <span class="keyword">then</span></span><br><span class="line">      tlf=220</span><br><span class="line">      tlr=225</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$region</span> == <span class="string">"16S_V4"</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE300"</span> ]; <span class="keyword">then</span></span><br><span class="line">      tlf=170</span><br><span class="line">      tlr=130</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE250"</span> ]; <span class="keyword">then</span></span><br><span class="line">      tlf=170</span><br><span class="line">      tlr=130</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$region</span> == <span class="string">"16S_V4V5"</span> ]; <span class="keyword">then</span></span><br><span class="line"> <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE300"</span> ]; <span class="keyword">then</span></span><br><span class="line">      tlf=230</span><br><span class="line">      tlr=160</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE250"</span> ]; <span class="keyword">then</span></span><br><span class="line">      tlf=220</span><br><span class="line">      tlr=170</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$region</span> == <span class="string">"16S_V4V5_archaea"</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE300"</span> ]; <span class="keyword">then</span></span><br><span class="line">      tlf=220</span><br><span class="line">      tlr=180</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE250"</span> ]; <span class="keyword">then</span></span><br><span class="line">      tlf=210</span><br><span class="line">      tlr=190</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$region</span> == <span class="string">"ITS_V1"</span> ]; <span class="keyword">then</span></span><br><span class="line">  tlf=0</span><br><span class="line">  tlr=0</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"正向序列长度切割为: "</span><span class="variable">$tlf</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"反向序列长度切割为: "</span><span class="variable">$tlr</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  DADA2去噪   </span></span><br><span class="line"><span class="comment">## 引物已去除，故--p-trim-left-f --p-trim-left-r 都设0</span></span><br><span class="line"><span class="comment">## 需要根据扩增区域长度变化范围、序列读长确定--p-trunc-len-f 和--p-trunc-len-r 的值 (我们使用了经验值); </span></span><br><span class="line"><span class="comment">## 由于qiime2里的DADA2要求overlap在12bp及以上，那么切割后的正反序列的长度和要大于目标序列 12bp 以上。</span></span><br><span class="line"><span class="comment">## --p-min-fold-parent-over-abundance 的值，可以根据数据削减情况调整，一般来说，目前扩增子序列的PCR循环数并不算高，故不会产生大量的嵌合体 (如超过30%)，所以如果这一步，你发现去除了超过预期的嵌合体，那么可以尝试提高这个阈值。</span></span><br><span class="line">qiime dada2 denoise-paired \</span><br><span class="line">  --i-demultiplexed-seqs 2_dada2/demux_no_primer_<span class="variable">$lib</span>.qza \</span><br><span class="line">  --p-trim-left<span class="_">-f</span> 0 \</span><br><span class="line">  --p-trim-left-r 0 \</span><br><span class="line">  --p-trunc-len<span class="_">-f</span> <span class="variable">$tlf</span> \</span><br><span class="line">  --p-trunc-len-r <span class="variable">$tlr</span> \</span><br><span class="line">  --p-max-ee<span class="_">-f</span> 2 \</span><br><span class="line">  --p-max-ee-r 4 \</span><br><span class="line">  --p-n-threads <span class="variable">$thread</span> \</span><br><span class="line">  --p-n-reads-learn 1000000 \</span><br><span class="line">  --o-table 2_dada2/table_<span class="variable">$lib</span>.qza \</span><br><span class="line">  --o-representative-sequences 2_dada2/rep-seqs_<span class="variable">$lib</span>.qza \</span><br><span class="line">  --o-denoising-stats 2_dada2/denoising-stats_<span class="variable">$lib</span>.qza </span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看去噪结果统计</span></span><br><span class="line">qiime metadata tabulate \</span><br><span class="line">	--m-input-file 2_dada2/denoising-stats_<span class="variable">$lib</span>.qza \</span><br><span class="line">    --o-visualization 2_dada2/denoising-stats_<span class="variable">$lib</span>.qzv</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200923172509827.png" alt="image-20200923172509827"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200923173136041.png" alt="image-20200923173136041"></p>
<h2><span id="四-一个或多个文库">四、一个或多个文库</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(ls -d 1_rawdata/* )</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="comment"># i=1_rawdata/lib1</span></span><br><span class="line">    lib=`<span class="built_in">echo</span> <span class="variable">$i</span> | cut -f2 -d<span class="string">"/"</span> `</span><br><span class="line"></span><br><span class="line">    manifest_f=`<span class="built_in">echo</span> <span class="variable">$i</span> | sed <span class="string">"s/1_rawdata\//manifest_/"</span>`</span><br><span class="line">    head -n1 manifest_all &gt; <span class="variable">$manifest_f</span></span><br><span class="line">    ls <span class="variable">$i</span>/*R1* | xargs -i grep &#123;&#125; manifest_all &gt;&gt; <span class="variable">$manifest_f</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将结果放到2_dada2 里面去</span></span><br><span class="line">    mkdir -p 2_dada2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    qiime tools import \</span><br><span class="line">        --<span class="built_in">type</span> <span class="string">'SampleData[PairedEndSequencesWithQuality]'</span> \</span><br><span class="line">        --input-path <span class="variable">$manifest_f</span> \</span><br><span class="line">        --output-path 2_dada2/demux_<span class="variable">$lib</span>.qza \</span><br><span class="line">        --input-format PairedEndFastqManifestPhred33V2</span><br><span class="line"></span><br><span class="line">    <span class="comment"># cutadapt</span></span><br><span class="line">    qiime cutadapt trim-paired  \</span><br><span class="line">        --i-demultiplexed-sequences 2_dada2/demux_<span class="variable">$lib</span>.qza \</span><br><span class="line">        --p-cores <span class="variable">$thread</span> \</span><br><span class="line">        --p-error-rate 0.2 \</span><br><span class="line">        --p-times 1 \</span><br><span class="line">        --p-overlap $[<span class="variable">$&#123;#front_f&#125;</span>*9/10] \</span><br><span class="line">        --p-front<span class="_">-f</span> <span class="variable">$front_f</span> \</span><br><span class="line">        --o-trimmed-sequences 2_dada2/demux_no_primer_<span class="variable">$&#123;lib&#125;</span>_1.qza \</span><br><span class="line">        --p-discard-untrimmed True</span><br><span class="line"></span><br><span class="line">    qiime cutadapt trim-paired  \</span><br><span class="line">        --i-demultiplexed-sequences 2_dada2/demux_no_primer_<span class="variable">$&#123;lib&#125;</span>_1.qza \</span><br><span class="line">        --p-cores <span class="variable">$thread</span> \</span><br><span class="line">        --p-error-rate 0.2 \</span><br><span class="line">        --p-times 1 \</span><br><span class="line">        --p-overlap $[<span class="variable">$&#123;#front_r&#125;</span>*9/10] \</span><br><span class="line">        --p-front-r <span class="variable">$front_r</span> \</span><br><span class="line">        --o-trimmed-sequences 2_dada2/demux_no_primer_<span class="variable">$&#123;lib&#125;</span>.qza \</span><br><span class="line">        --p-discard-untrimmed True</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 查看序列长度与质量分布</span></span><br><span class="line">    qiime demux summarize \</span><br><span class="line">      --i-data 2_dada2/demux_no_primer_<span class="variable">$lib</span>.qza \</span><br><span class="line">      --o-visualization 2_dada2/demux_no_primer_<span class="variable">$lib</span>.qzv</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 计算参数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## PE300还是250？</span></span><br><span class="line">    PE_length=`cut -f2 <span class="variable">$manifest_f</span> |</span><br><span class="line">    grep <span class="string">"fq.gz"</span> |head -n 1 | </span><br><span class="line">    xargs -i zcat &#123;&#125; | awk <span class="string">'FNR%4==2&#123;print length&#125;'</span> |</span><br><span class="line">    sort -n | tail -n 1000 | head -n 1`</span><br><span class="line"></span><br><span class="line">    PElength=PE250</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$PE_length</span> -ge 260 ]]; <span class="keyword">then</span></span><br><span class="line">      PElength=PE300</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$PE_length</span> -lt 260 ]]; <span class="keyword">then</span></span><br><span class="line">      PElength=PE250</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$PE_length</span> -lt 160 ]]; <span class="keyword">then</span></span><br><span class="line">      PElength=PE150</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## 使用记载的dada2参数</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$region</span> == <span class="string">"16S_V3V4"</span> ]; <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE300"</span> ]; <span class="keyword">then</span></span><br><span class="line">          tlf=230</span><br><span class="line">          tlr=220</span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">      <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE250"</span> ]; <span class="keyword">then</span></span><br><span class="line">          tlf=220</span><br><span class="line">          tlr=225</span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$region</span> == <span class="string">"16S_V4"</span> ]; <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE300"</span> ]; <span class="keyword">then</span></span><br><span class="line">          tlf=170</span><br><span class="line">          tlr=130</span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">      <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE250"</span> ]; <span class="keyword">then</span></span><br><span class="line">          tlf=170</span><br><span class="line">          tlr=130</span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$region</span> == <span class="string">"16S_V4V5"</span> ]; <span class="keyword">then</span></span><br><span class="line">     <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE300"</span> ]; <span class="keyword">then</span></span><br><span class="line">          tlf=230</span><br><span class="line">          tlr=160</span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">      <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE250"</span> ]; <span class="keyword">then</span></span><br><span class="line">          tlf=220</span><br><span class="line">          tlr=170</span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$region</span> == <span class="string">"16S_V4V5_archaea"</span> ]; <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE300"</span> ]; <span class="keyword">then</span></span><br><span class="line">          tlf=220</span><br><span class="line">          tlr=180</span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">      <span class="keyword">if</span> [ <span class="variable">$PElength</span> == <span class="string">"PE250"</span> ]; <span class="keyword">then</span></span><br><span class="line">          tlf=210</span><br><span class="line">          tlr=190</span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$region</span> == <span class="string">"ITS_V1"</span> ]; <span class="keyword">then</span></span><br><span class="line">      tlf=0</span><br><span class="line">      tlr=0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"正向序列长度切割为: "</span><span class="variable">$tlf</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"反向序列长度切割为: "</span><span class="variable">$tlr</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#  DADA2去噪   </span></span><br><span class="line">    <span class="comment">## 引物已去除，故--p-trim-left-f --p-trim-left-r 都设0</span></span><br><span class="line">    <span class="comment">## 需要根据扩增区域长度变化范围、序列读长确定--p-trunc-len-f 和--p-trunc-len-r 的值 (我们使用了经验值); </span></span><br><span class="line">    <span class="comment">## 由于qiime2里的DADA2要求overlap在12bp及以上，那么切割后的正反序列的长度和要大于目标序列 12bp 以上。</span></span><br><span class="line">    <span class="comment">## --p-min-fold-parent-over-abundance 的值，可以根据数据削减情况调整，一般来说，目前扩增子序列的PCR循环数并不算高，故不会产生大量的嵌合体 (如超过30%)，所以如果这一步，你发现去除了超过预期的嵌合体，那么可以尝试提高这个阈值。</span></span><br><span class="line">    qiime dada2 denoise-paired \</span><br><span class="line">      --i-demultiplexed-seqs 2_dada2/demux_no_primer_<span class="variable">$lib</span>.qza \</span><br><span class="line">      --p-trim-left<span class="_">-f</span> 0 \</span><br><span class="line">      --p-trim-left-r 0 \</span><br><span class="line">      --p-trunc-len<span class="_">-f</span> <span class="variable">$tlf</span> \</span><br><span class="line">      --p-trunc-len-r <span class="variable">$tlr</span> \</span><br><span class="line">      --p-max-ee<span class="_">-f</span> 2 \</span><br><span class="line">      --p-max-ee-r 4 \</span><br><span class="line">      --p-n-threads <span class="variable">$thread</span> \</span><br><span class="line">      --p-n-reads-learn 1000000 \</span><br><span class="line">      --o-table 2_dada2/table_<span class="variable">$lib</span>.qza \</span><br><span class="line">      --o-representative-sequences 2_dada2/rep-seqs_<span class="variable">$lib</span>.qza \</span><br><span class="line">      --o-denoising-stats 2_dada2/denoising-stats_<span class="variable">$lib</span>.qza </span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查看去噪结果统计</span></span><br><span class="line">    qiime metadata tabulate \</span><br><span class="line">        --m-input-file 2_dada2/denoising-stats_<span class="variable">$lib</span>.qza \</span><br><span class="line">        --o-visualization 2_dada2/denoising-stats_<span class="variable">$lib</span>.qzv </span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200923175247448.png" alt="image-20200923175247448" style="zoom:150%;">
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200923175456345.png" alt="image-20200923175456345" style="zoom:150%;">
<h2><span id="五-合并特征序列与特征表格">五、合并特征序列与特征表格</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir -p 3_ASV </span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并表格</span></span><br><span class="line">qiime feature-table merge  \</span><br><span class="line">	--i-tables 2_dada2/table_*.qza  \</span><br><span class="line">	--p-overlap-method <span class="string">'sum'</span> \</span><br><span class="line">	--o-merged-table 3_ASV/table.qza &amp;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并序列</span></span><br><span class="line">qiime feature-table merge-seqs \</span><br><span class="line">	--i-data 2_dada2/rep-seqs_*.qza \</span><br><span class="line">	--o-merged-data 3_ASV/rep-seqs.qza &amp;</span><br><span class="line"></span><br><span class="line"><span class="built_in">wait</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">qiime feature-table summarize \</span><br><span class="line">	--i-table 3_ASV/table.qza \</span><br><span class="line">	--o-visualization 3_ASV/table.qzv \</span><br><span class="line">	--m-sample-metadata-file practical_metadata.tsv &amp;</span><br><span class="line"></span><br><span class="line">qiime feature-table tabulate-seqs \</span><br><span class="line">	--i-data 3_ASV/rep-seqs.qza \</span><br><span class="line">	--o-visualization 3_ASV/rep-seqs.qzv &amp;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获得fasta格式的特征序列文件和biom格式的特征表格文件</span></span><br><span class="line"></span><br><span class="line">qiime tools <span class="built_in">export</span> \</span><br><span class="line">	--input-path 3_ASV/table.qza \</span><br><span class="line">    --output-path 3_ASV/table &amp;</span><br><span class="line"></span><br><span class="line">qiime tools <span class="built_in">export</span> \</span><br><span class="line">	--input-path 3_ASV/rep-seqs.qza \</span><br><span class="line">	--output-path 3_ASV/rep-seqs &amp;</span><br><span class="line"></span><br><span class="line"><span class="built_in">wait</span></span><br><span class="line"></span><br><span class="line">cp 3_ASV/rep-seqs/dna-sequences.fasta 3_ASV/rep_seqs.fa</span><br><span class="line"></span><br><span class="line">cp 3_ASV/table/feature-table.biom 3_ASV/table.biom</span><br></pre></td></tr></table></figure>
<h2><span id="六-建树">六、建树</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">qiime phylogeny align-to-tree-mafft-fasttree \</span><br><span class="line">	--p-n-threads <span class="variable">$thread</span> \</span><br><span class="line">	--i-sequences 3_ASV/rep-seqs.qza \</span><br><span class="line">	--o-alignment 3_ASV/aligned-rep-seqs.qza \</span><br><span class="line">	--o-masked-alignment 3_ASV/masked-aligned-rep-seqs.qza \</span><br><span class="line">	--o-tree 3_ASV/unrooted-tree.qza \</span><br><span class="line">	--o-rooted-tree 3_ASV/rooted-tree.qza</span><br></pre></td></tr></table></figure>
<p><img src="C:%5CUsers%5C86199%5CDesktop%5Cqiime2%5Cdata%5Cimage-20200923220047881.png" alt="image-20200923220047881"></p>
<h2><span id="七-物种注释">七、物种注释</span></h2>
<p>请先下载数据库 <a href="https://microbiomecat.lanzous.com/ijMpcgvikpa%E3%80%82%E5%B9%B6%E5%B0%86%E5%85%B6%E6%94%BE%E5%88%B0%E5%B7%A5%E4%BD%9C%E6%96%87%E4%BB%B6%E5%A4%B9" target="_blank" rel="noopener">https://microbiomecat.lanzous.com/ijMpcgvikpa。并将其放到工作文件夹</a> (qiime2-tutorial) 中</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解压 数据库</span></span><br><span class="line">unzip  ../classifier.zip; rm ../classifier.zip</span><br><span class="line">mv classifier.qza gg_13_8_99_16S_V4V5_classifier.qza</span><br><span class="line"></span><br><span class="line"><span class="comment"># 物种注释</span></span><br><span class="line">mkdir -p  4_taxonomy</span><br><span class="line"></span><br><span class="line">qiime feature-classifier classify-sklearn \</span><br><span class="line">	--p-n-jobs <span class="variable">$thread</span> \</span><br><span class="line">	--i-classifier <span class="variable">$db</span> \</span><br><span class="line">    --i-reads 3_ASV/rep-seqs.qza \</span><br><span class="line">    --o-classification 4_taxonomy/taxonomy.qza</span><br><span class="line"></span><br><span class="line">qiime metadata tabulate \</span><br><span class="line">	--m-input-file 4_taxonomy/taxonomy.qza \</span><br><span class="line">	--o-visualization 4_taxonomy/taxonomy.qzv &amp;</span><br><span class="line">  </span><br><span class="line">qiime taxa barplot \</span><br><span class="line">	--i-table 3_ASV/table.qza \</span><br><span class="line">    --i-taxonomy 4_taxonomy/taxonomy.qza \</span><br><span class="line">    --m-metadata-file practical_metadata.tsv \</span><br><span class="line">    --o-visualization 4_taxonomy/taxa-bar-plots.qzv</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200923223303485.png" alt="image-20200923223303485"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200923223411020.png" alt="image-20200923223411020"></p>
<h2><span id="八-核心多样性指数">八、核心多样性指数</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rm -r -f 5_core-metrics-results</span><br><span class="line">qiime diversity core-metrics-phylogenetic \</span><br><span class="line">	--i-phylogeny 3_ASV/rooted-tree.qza \</span><br><span class="line">    --i-table 3_ASV/table.qza \</span><br><span class="line">    --p-sampling-depth 300 \</span><br><span class="line">    --m-metadata-file practical_metadata.tsv \</span><br><span class="line">     --p-n-jobs-or-threads <span class="variable">$thread</span> \</span><br><span class="line">    --output-dir 5_core-metrics-results</span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200923224132572.png" alt="image-20200923224132572" style="zoom:150%;">
<h2><span id="十-qiime2r-可视化探索">十、qiime2R 可视化探索</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 切换conda环境</span></span><br><span class="line">conda deactivate</span><br><span class="line">conda activate R4.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调整 metadata 注意下面这是一行，直接复制可能会有问题</span></span><br><span class="line">sed <span class="string">'2i\#q2:types\tcategorical\tcategorical\tcategorical\tnumeric\tcategorical'</span> practical_metadata.tsv &gt;  practical_metadata_new.tsv   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开R</span></span><br><span class="line">R</span><br></pre></td></tr></table></figure>
<p>以下为R编程环境中脚本</p>
<h3><span id="数据导入">数据导入</span></h3>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="comment">###############################################################</span></span><br><span class="line"><span class="comment"># 加载R包</span></span><br><span class="line"><span class="keyword">library</span>(qiime2R)</span><br><span class="line"> <span class="keyword">library</span>(dplyr)</span><br><span class="line"> </span><br><span class="line"><span class="comment">###############################################################</span></span><br><span class="line"><span class="comment"># 读取QZA</span></span><br><span class="line">SVs&lt;-read_qza(<span class="string">"3_ASV/table.qza"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看帮助</span></span><br><span class="line">?read_qza</span><br><span class="line"></span><br><span class="line"><span class="comment">## SVs 是一个list,查看list的元素都是啥？</span></span><br><span class="line"> names(SVs)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看我们导入的这个QZA是什么类型的artifact</span></span><br><span class="line">SVs$type</span><br><span class="line"></span><br><span class="line"><span class="comment">## 我们最关注的，其实还是丰度，看下内容</span></span><br><span class="line">SVs$data[<span class="number">1</span>:<span class="number">5</span>,<span class="number">1</span>:<span class="number">5</span>] </span><br><span class="line"></span><br><span class="line"><span class="comment">###############################################################</span></span><br><span class="line"><span class="comment"># 读取元数据 就是分组表哦</span></span><br><span class="line">metadata&lt;-read_q2metadata(<span class="string">"practical_metadata_new.tsv"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看前几行</span></span><br><span class="line">head(metadata) </span><br><span class="line"></span><br><span class="line"><span class="comment">################################################################</span></span><br><span class="line"><span class="comment"># 读取taxonomy文件</span></span><br><span class="line">taxonomy&lt;-read_qza(<span class="string">"4_taxonomy/taxonomy.qza"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看前几行</span></span><br><span class="line">head(taxonomy$data)</span><br><span class="line"></span><br><span class="line"><span class="comment">################################################################</span></span><br><span class="line"><span class="comment"># 直接导入phyloseq</span></span><br><span class="line">physeq&lt;-qza_to_phyloseq(</span><br><span class="line">    features=<span class="string">"3_ASV/table.qza"</span>,</span><br><span class="line">    tree=<span class="string">"3_ASV/rooted-tree.qza"</span>,</span><br><span class="line">    taxonomy=<span class="string">"4_taxonomy/taxonomy.qza"</span>,</span><br><span class="line">    metadata = <span class="string">"practical_metadata_new.tsv"</span></span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200924001539896.png" alt="image-20200924001539896" style="zoom: 200%;">
<h3><span id="绘图">绘图</span></h3>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装tidyverse包</span></span><br><span class="line">install.packages(<span class="string">"tidyverse"</span>)</span><br><span class="line">install.packages(<span class="string">"gplots"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 载入R包</span></span><br><span class="line"><span class="keyword">library</span>(tidyverse)</span><br><span class="line"><span class="keyword">library</span>(qiime2R)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取数据</span></span><br><span class="line">metadata&lt;-read_q2metadata(<span class="string">"practical_metadata_new.tsv"</span>)</span><br><span class="line">shannon&lt;-read_qza(<span class="string">"5_core-metrics-results/shannon_vector.qza"</span>) </span><br><span class="line"></span><br><span class="line">names(shannon)</span><br><span class="line"></span><br><span class="line">shannon&lt;-shannon$data %&gt;% rownames_to_column(<span class="string">"SampleID"</span>) </span><br><span class="line"></span><br><span class="line">head(shannon)</span><br><span class="line"></span><br><span class="line"><span class="comment">## VENN图</span></span><br><span class="line">pdf(<span class="string">'venn.pdf'</span>,onefile=<span class="literal">F</span>,width=<span class="number">10</span>,bg=<span class="string">"white"</span>)</span><br><span class="line">	gplots::venn(list(metadata=metadata$SampleID,</span><br><span class="line">                      shannon=shannon$SampleID))</span><br><span class="line">dev.off()</span><br><span class="line"></span><br><span class="line"><span class="comment">## 折线图</span></span><br><span class="line">metadata&lt;- metadata %&gt;% </span><br><span class="line">  left_join(shannon)</span><br><span class="line"></span><br><span class="line">head(metadata)</span><br><span class="line"></span><br><span class="line">metadata %&gt;%</span><br><span class="line">  filter(!is.na(metadata$shannon_entropy)) %&gt;%</span><br><span class="line">  ggplot(aes(x=`Treat2`, y=shannon_entropy, color=`Treat1`)) +</span><br><span class="line">  stat_summary(geom=<span class="string">"errorbar"</span>, fun.data=mean_se, width=<span class="number">0</span>) +</span><br><span class="line">  stat_summary(geom=<span class="string">"line"</span>, fun.data=mean_se) +</span><br><span class="line">  stat_summary(geom=<span class="string">"point"</span>, fun.data=mean_se) +</span><br><span class="line">  xlab(<span class="string">"Days"</span>) +</span><br><span class="line">  ylab(<span class="string">"Shannon Diversity"</span>) +</span><br><span class="line">  theme_q2r() + </span><br><span class="line">  scale_color_viridis_d(name=<span class="string">"Sampling Region"</span>) </span><br><span class="line">  ggsave(<span class="string">"Shannon_by_time.pdf"</span>, </span><br><span class="line">         height=<span class="number">3</span>, width=<span class="number">4</span>, device=<span class="string">"pdf"</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment">## 柱状图</span></span><br><span class="line">metadata %&gt;%</span><br><span class="line">  filter(!is.na(metadata$shannon_entropy)) %&gt;%</span><br><span class="line">  ggplot(aes(x=`Treat1`, y=shannon_entropy, fill=`Treat1`)) +</span><br><span class="line">  stat_summary(geom=<span class="string">"bar"</span>, fun.data=mean_se, color=<span class="string">"black"</span>) + </span><br><span class="line">  geom_jitter(shape=<span class="number">21</span>, width=<span class="number">0.2</span>, height=<span class="number">0</span>) +</span><br><span class="line">  coord_cartesian(ylim=c(<span class="number">2</span>,<span class="number">7</span>)) + <span class="comment"># adjust y-axis</span></span><br><span class="line"> <span class="comment"># facet_grid(~`Treat1`) +</span></span><br><span class="line">  xlab(<span class="string">"regions"</span>) +</span><br><span class="line">  ylab(<span class="string">"Shannon Diversity"</span>) +</span><br><span class="line">  theme_q2r() +</span><br><span class="line">  scale_fill_manual(values=c(<span class="string">"cornflowerblue"</span>,</span><br><span class="line">                             <span class="string">"indianred"</span>,<span class="string">"green"</span>,<span class="string">"yellow"</span>)) +</span><br><span class="line">  theme(legend.position=<span class="string">"none"</span>) </span><br><span class="line">  ggsave(<span class="string">"Shannon_by_abx.pdf"</span>, height=<span class="number">3</span>,</span><br><span class="line">         width=<span class="number">4</span>, device=<span class="string">"pdf"</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment">## 散点图</span></span><br><span class="line">uwunifrac&lt;-read_qza(</span><br><span class="line">    <span class="string">"5_core-metrics-results/unweighted_unifrac_pcoa_results.qza"</span>)</span><br><span class="line"></span><br><span class="line">uwunifrac$data$Vectors %&gt;%</span><br><span class="line">  select(SampleID, PC1, PC2) %&gt;%</span><br><span class="line">  left_join(metadata) %&gt;%</span><br><span class="line">  left_join(shannon) %&gt;%</span><br><span class="line">  ggplot(aes(x=PC1, y=PC2, color=`Treat1`,</span><br><span class="line">             shape=`Treat1`, size=shannon_entropy)) +</span><br><span class="line">  geom_point(alpha=<span class="number">0.5</span>) + </span><br><span class="line">  theme_q2r() +</span><br><span class="line">  scale_shape_manual(values=c(<span class="number">16</span>,<span class="number">1</span>,<span class="number">21</span>,<span class="number">22</span>), name=<span class="string">"regions"</span>) +</span><br><span class="line">  scale_size_continuous(name=<span class="string">"Shannon Diversity"</span>) +</span><br><span class="line">  scale_color_discrete(name=<span class="string">"regions"</span>)</span><br><span class="line">  ggsave(<span class="string">"PCoA.pdf"</span>, height=<span class="number">4</span>, width=<span class="number">5</span>, device=<span class="string">"pdf"</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment">## 热图</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">make_percent&lt;-<span class="keyword">function</span>(features)&#123;</span><br><span class="line">  features&lt;-apply(features,<span class="number">2</span>, <span class="keyword">function</span>(x)&#123;<span class="number">100</span>*(x/sum(x))&#125;)</span><br><span class="line">  <span class="keyword">return</span>(features)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">summarize_taxa &lt;- <span class="keyword">function</span>(features, taxonomy) &#123;</span><br><span class="line">	taxlevels&lt;-c(<span class="string">"Kingdom"</span>,<span class="string">"Phylum"</span>,<span class="string">"Class"</span>,<span class="string">"Order"</span>,</span><br><span class="line">                 <span class="string">"Family"</span>,<span class="string">"Genus"</span>,<span class="string">"Species"</span>)</span><br><span class="line">    <span class="keyword">if</span>(missing(features))&#123;</span><br><span class="line">        <span class="keyword">stop</span>(<span class="string">"Feature table not provided"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(missing(taxonomy))&#123;</span><br><span class="line">        <span class="keyword">stop</span>(<span class="string">"taxonomy table not provided"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(sum(colnames(taxonomy) %<span class="keyword">in</span>% taxlevels)!=<span class="number">7</span>)&#123;</span><br><span class="line">        <span class="keyword">stop</span>(<span class="string">"Taxonomy does not contain expected columns containing Kingdom,Phylum,Class,Order,Family,Genus,Species."</span>)</span><br><span class="line">    &#125;  </span><br><span class="line">    output&lt;-list()</span><br><span class="line">    <span class="keyword">for</span>(lvl <span class="keyword">in</span> taxlevels)&#123;</span><br><span class="line">    suppressMessages(</span><br><span class="line">      output[[lvl]]&lt;-</span><br><span class="line">        features %&gt;%</span><br><span class="line">        as.data.frame() %&gt;%</span><br><span class="line">        rownames_to_column(<span class="string">"FeatureID"</span>) %&gt;%</span><br><span class="line">        gather(-FeatureID, key=<span class="string">"SampleID"</span>, value=<span class="string">"Counts"</span>) %&gt;%</span><br><span class="line">        left_join(</span><br><span class="line">          taxonomy %&gt;% </span><br><span class="line">          rownames_to_column(<span class="string">"FeatureID"</span>) %&gt;%</span><br><span class="line">          unite(<span class="string">"Taxon"</span>,</span><br><span class="line">                taxlevels[<span class="number">1</span>:grep(lvl,taxlevels)],</span><br><span class="line">                sep=<span class="string">"; "</span>) %&gt;%</span><br><span class="line">          select(FeatureID, Taxon)</span><br><span class="line">        ) %&gt;%</span><br><span class="line">        group_by(SampleID, Taxon) %&gt;%</span><br><span class="line">        summarize(Counts=sum(Counts)) %&gt;%</span><br><span class="line">        ungroup() %&gt;%</span><br><span class="line">        spread(key=SampleID, value=Counts) %&gt;%</span><br><span class="line">        as.data.frame() %&gt;%</span><br><span class="line">        column_to_rownames(<span class="string">"Taxon"</span>)</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>(output)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">taxa_heatmap&lt;-<span class="keyword">function</span>(features,metadata,</span><br><span class="line">                       category,normalize,ntoplot)&#123;</span><br><span class="line">  <span class="keyword">if</span>(missing(ntoplot) &amp; nrow(features)&gt;<span class="number">30</span>)&#123;</span><br><span class="line">      ntoplot=<span class="number">30</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (missing(ntoplot))&#123;</span><br><span class="line">      ntoplot=nrow(features)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(missing(normalize))&#123;normalize&lt;-<span class="string">"log10(percent)"</span>&#125;</span><br><span class="line">  <span class="keyword">if</span>(normalize==<span class="string">"log10(percent)"</span>)&#123;</span><br><span class="line">      features&lt;-log10(make_percent(features+<span class="number">1</span>))</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(normalize==<span class="string">"clr"</span>)&#123;</span><br><span class="line">      features&lt;-make_clr(features)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(missing(metadata))&#123;</span><br><span class="line">      metadata&lt;-data.frame(SampleID=colnames(features))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(!<span class="string">"SampleID"</span> %<span class="keyword">in</span>% colnames(metadata))&#123;</span><br><span class="line">      metadata &lt;- metadata %&gt;% rownames_to_column(<span class="string">"SampleID"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(!missing(category))&#123;</span><br><span class="line">    <span class="keyword">if</span>(!category %<span class="keyword">in</span>% colnames(metadata))&#123;</span><br><span class="line">        message(<span class="keyword">stop</span>(category,</span><br><span class="line">                     <span class="string">" not found as column in metdata"</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  plotfeats&lt;-names(sort(rowMeans(features),</span><br><span class="line">                        decreasing = <span class="literal">TRUE</span>)[<span class="number">1</span>:ntoplot]) </span><br><span class="line">  roworder&lt;-hclust(dist(features[plotfeats,]))</span><br><span class="line">  roworder&lt;-roworder$labels[roworder$order]</span><br><span class="line">  colorder&lt;-hclust(dist(t(features[plotfeats,])))</span><br><span class="line">  colorder&lt;-colorder$labels[colorder$order]</span><br><span class="line">  suppressMessages(</span><br><span class="line">  suppressWarnings(</span><br><span class="line">  fplot&lt;-</span><br><span class="line">    features %&gt;%</span><br><span class="line">    as.data.frame() %&gt;%</span><br><span class="line">    rownames_to_column(<span class="string">"Taxon"</span>) %&gt;%</span><br><span class="line">    gather(-Taxon, key=<span class="string">"SampleID"</span>, value=<span class="string">"Abundance"</span>) %&gt;%</span><br><span class="line">    filter(Taxon %<span class="keyword">in</span>% plotfeats) %&gt;%</span><br><span class="line">    mutate(Taxon=factor(Taxon, levels=rev(plotfeats))) %&gt;%</span><br><span class="line">    left_join(metadata) %&gt;%</span><br><span class="line">    mutate(Taxon=factor(Taxon, levels=roworder)) %&gt;%</span><br><span class="line">    mutate(SampleID=factor(SampleID, levels=colorder))</span><br><span class="line">  ))</span><br><span class="line"></span><br><span class="line">  bplot&lt;-</span><br><span class="line">    ggplot(fplot, aes(x=SampleID, y=Taxon, fill=Abundance)) +</span><br><span class="line">    geom_tile(stat=<span class="string">"identity"</span>) +</span><br><span class="line">    theme_q2r() +</span><br><span class="line">    theme(axis.text.x = element_text(angle=<span class="number">45</span>, hjust=<span class="number">1</span>)) +</span><br><span class="line">    coord_cartesian(expand=<span class="literal">FALSE</span>) +</span><br><span class="line">    xlab(<span class="string">"Sample"</span>) +</span><br><span class="line">    ylab(<span class="string">"Feature"</span>) +</span><br><span class="line">    scale_fill_viridis_c()</span><br><span class="line">  <span class="keyword">if</span>(!missing(category))&#123;</span><br><span class="line">      bplot&lt;-bplot + </span><br><span class="line">      facet_grid(~get(category),scales=<span class="string">"free_x"</span>,space=<span class="string">"free"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span>(bplot)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SVs&lt;-read_qza(<span class="string">"3_ASV/table.qza"</span>)$data</span><br><span class="line">taxonomy&lt;-read_qza(<span class="string">"4_taxonomy/taxonomy.qza"</span>)$data %&gt;% </span><br><span class="line">parse_taxonomy()</span><br><span class="line"></span><br><span class="line">taxasums&lt;-summarize_taxa(SVs, taxonomy)$Genus</span><br><span class="line">taxa_heatmap(taxasums, metadata, <span class="string">"Treat1"</span>)</span><br><span class="line"></span><br><span class="line">ggsave(<span class="string">"heatmap.pdf"</span>, height=<span class="number">4</span>, width=<span class="number">8</span>, device=<span class="string">"pdf"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 物种柱状图</span></span><br><span class="line"></span><br><span class="line">taxa_barplot&lt;-<span class="keyword">function</span>(features,metadata,category,normalize,ntoplot)&#123;</span><br><span class="line">  q2r_palette&lt;-c(</span><br><span class="line">    <span class="string">"blue4"</span>,</span><br><span class="line">    <span class="string">"olivedrab"</span>,</span><br><span class="line">    <span class="string">"firebrick"</span>,</span><br><span class="line">    <span class="string">"gold"</span>,</span><br><span class="line">    <span class="string">"darkorchid"</span>,</span><br><span class="line">    <span class="string">"steelblue2"</span>,</span><br><span class="line">    <span class="string">"chartreuse1"</span>,</span><br><span class="line">    <span class="string">"aquamarine"</span>,</span><br><span class="line">    <span class="string">"yellow3"</span>,</span><br><span class="line">    <span class="string">"coral"</span>,</span><br><span class="line">    <span class="string">"grey"</span></span><br><span class="line">  )</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(missing(ntoplot) &amp; nrow(features)&gt;<span class="number">10</span>)&#123;</span><br><span class="line">      ntoplot=<span class="number">10</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (missing(ntoplot))&#123;</span><br><span class="line">      ntoplot=nrow(features)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(missing(normalize))&#123;</span><br><span class="line">      normalize&lt;-<span class="string">"percent"</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(normalize==<span class="string">"percent"</span>)&#123;</span><br><span class="line">      features&lt;-make_percent(features)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(normalize==<span class="string">"proportion"</span>)&#123;</span><br><span class="line">      features&lt;-make_proportion(features)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(missing(metadata))&#123;</span><br><span class="line">      metadata&lt;-data.frame(SampleID=colnames(features))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(!<span class="string">"SampleID"</span> %<span class="keyword">in</span>% colnames(metadata))&#123;</span><br><span class="line">      metadata &lt;- metadata %&gt;% rownames_to_column(<span class="string">"SampleID"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(!missing(category))&#123;</span><br><span class="line">    <span class="keyword">if</span>(!category %<span class="keyword">in</span>% colnames(metadata))&#123;</span><br><span class="line">        message(<span class="keyword">stop</span>(category, <span class="string">" not found as column in metdata"</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  plotfeats&lt;-names(sort(rowMeans(features),</span><br><span class="line">                        decreasing=<span class="literal">TRUE</span>)[<span class="number">1</span>:ntoplot]) </span><br><span class="line">  suppressMessages(</span><br><span class="line">  suppressWarnings(</span><br><span class="line">  fplot&lt;-</span><br><span class="line">    features %&gt;%</span><br><span class="line">    as.data.frame() %&gt;%</span><br><span class="line">    rownames_to_column(<span class="string">"Taxon"</span>) %&gt;%</span><br><span class="line">    gather(-Taxon, key=<span class="string">"SampleID"</span>, </span><br><span class="line">           value=<span class="string">"Abundance"</span>) %&gt;%</span><br><span class="line">    mutate(Taxon=if_else(Taxon %<span class="keyword">in</span>% plotfeats,</span><br><span class="line">                         Taxon,<span class="string">"Remainder"</span>)) %&gt;%</span><br><span class="line">    group_by(Taxon, SampleID) %&gt;%</span><br><span class="line">    summarize(Abundance=sum(Abundance)) %&gt;%</span><br><span class="line">    ungroup() %&gt;%</span><br><span class="line">    mutate(Taxon=factor(Taxon, </span><br><span class="line">                        levels=rev(c(plotfeats,<span class="string">"Remainder"</span>)))) %&gt;%</span><br><span class="line">    left_join(metadata)</span><br><span class="line">  ))</span><br><span class="line"></span><br><span class="line">  bplot&lt;-</span><br><span class="line">    ggplot(fplot, aes(x=SampleID, y=Abundance, fill=Taxon)) +</span><br><span class="line">    geom_bar(stat=<span class="string">"identity"</span>) +</span><br><span class="line">    theme_q2r() +</span><br><span class="line">    theme(axis.text.x = element_text(angle=<span class="number">45</span>, hjust=<span class="number">1</span>)) +</span><br><span class="line">    coord_cartesian(expand=<span class="literal">FALSE</span>) +</span><br><span class="line">    xlab(<span class="string">"Sample"</span>) +</span><br><span class="line">    ylab(<span class="string">"Abundance"</span>)</span><br><span class="line">  <span class="keyword">if</span>(ntoplot&lt;=<span class="number">10</span>)&#123;</span><br><span class="line">      bplot&lt;-bplot+scale_fill_manual(values=rev(q2r_palette),</span><br><span class="line">                                     name=<span class="string">""</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(!missing(category))&#123;</span><br><span class="line">      bplot&lt;-bplot+facet_grid(~get(category),</span><br><span class="line">                              scales=<span class="string">"free_x"</span>,space=<span class="string">"free"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span>(bplot)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">taxa_barplot(taxasums, metadata, <span class="string">"Treat1"</span>)</span><br><span class="line"></span><br><span class="line">ggsave(<span class="string">"barplot.pdf"</span>, height=<span class="number">4</span>, width=<span class="number">8</span>, device=<span class="string">"pdf"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 退出 R</span></span><br><span class="line"></span><br><span class="line">q()</span><br></pre></td></tr></table></figure>
<h2><span id="附构建注释数据库">附：构建注释数据库</span></h2>
<p>第一次使用，需要先构建 classify-sklearn 专用的注释数据库，也可以去官网下载。</p>
<ul>
<li><a href="https://data.qiime2.org/2020.8/common/silva-138-99-nb-classifier.qza" target="_blank" rel="noopener">Silva 138 99% OTUs full-length sequences</a> (MD5: <code>fddefff8bfa2bbfa08b9cad36bcdf709</code>)</li>
<li><a href="https://data.qiime2.org/2020.8/common/silva-138-99-515-806-nb-classifier.qza" target="_blank" rel="noopener">Silva 138 99% OTUs from 515F/806R region of sequences</a> (MD5: <code>28105eb0f1256bf38b9bb310c701dc4e</code>)</li>
<li><a href="https://data.qiime2.org/2020.8/common/gg-13-8-99-nb-classifier.qza" target="_blank" rel="noopener">Greengenes 13_8 99% OTUs full-length sequences</a> (MD5: <code>03078d15b265f3d2d73ce97661e370b1</code>)</li>
<li><a href="https://data.qiime2.org/2020.8/common/gg-13-8-99-515-806-nb-classifier.qza" target="_blank" rel="noopener">Greengenes 13_8 99% OTUs from 515F/806R region of sequences</a> (MD5: <code>682be39339ef36a622b363b8ee2ff88b</code>)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">## 耗内存，需要提高docker的内存配置,silva 预计可能需要超过 8G</span></span><br><span class="line"></span><br><span class="line">mkdir -p training-feature-classifiers</span><br><span class="line"><span class="built_in">cd</span> training-feature-classifiers</span><br><span class="line"></span><br><span class="line">cp /data/qiime2/data/02_data/99_otus.fasta .   </span><br><span class="line">cp /data/qiime2/data/02_data/99_otu_taxonomy.txt .     </span><br><span class="line"></span><br><span class="line">qiime tools import \</span><br><span class="line">  --<span class="built_in">type</span> <span class="string">'FeatureData[Sequence]'</span> \</span><br><span class="line">  --input-path 99_otus.fasta  \</span><br><span class="line">  --output-path 99_otus.qza </span><br><span class="line"></span><br><span class="line">qiime tools import \</span><br><span class="line">  --<span class="built_in">type</span> <span class="string">'FeatureData[Taxonomy]'</span> \</span><br><span class="line">  --input-format HeaderlessTSVTaxonomyFormat \</span><br><span class="line">  --input-path 99_otu_taxonomy.txt \</span><br><span class="line">  --output-path ref-taxonomy.qza</span><br><span class="line"></span><br><span class="line"><span class="comment">#16SV4V5</span></span><br><span class="line">qiime feature-classifier extract-reads \</span><br><span class="line">  --i-sequences 99_otus.qza  \</span><br><span class="line">  --p<span class="_">-f</span>-primer <span class="variable">$front_f</span> \</span><br><span class="line">  --p-r-primer  <span class="variable">$front_r</span>  \</span><br><span class="line">  --p-trunc-len 0 \</span><br><span class="line">  --p-min-length 100 \</span><br><span class="line">  --p-max-length 500 \</span><br><span class="line">  --o-reads ref-seqs.qza</span><br><span class="line">  </span><br><span class="line">qiime feature-classifier fit-classifier-naive-bayes \</span><br><span class="line">  --i-reference-reads ref-seqs.qza \</span><br><span class="line">  --i-reference-taxonomy ref-taxonomy.qza \</span><br><span class="line">  --o-classifier gg_13_8_99_16S_V4V5_classifier.qza</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200923210736980.png" alt="image-20200923210736980"></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>扩增子</category>
      </categories>
      <tags>
        <tag>QIIME2</tag>
        <tag>扩增子</tag>
      </tags>
  </entry>
  <entry>
    <title>小家越住越大-收纳篇</title>
    <url>/20200818/small_house_big_home_(storage)/</url>
    <content><![CDATA[<blockquote><p>你如何对待家，家便如何对待你。</p>
<p>**House ≠ Home **<br>
那个灰色的水泥壳子，并不是家。<br>
人可以没有房，却不能没有家。<br>
好好住的地方就是家。</p>
<p>**Designer ≠ Dweller **<br>
设计者，只能提供半成品的“住宅”。<br>
居住者，才能搭建独一无二的“家”。</p>
<p>**Bigger ≠ Better **<br>
与其烦恼买不起大房子考虑改善型居住，不如好好提升自己内在的“住商”。</p>
<p>**M<sup>2</sup> ≠ M<sup>3</sup> **<br>
收纳是管理好小房子的大智慧。</p>
<footer><strong>逯薇</strong><cite>《小家越住越大》</cite></footer></blockquote>
<p><br><br></p>
<p>本文为阅读逯薇《小家越住越大》三部曲的读书笔记。</p>
<p>本篇主要整理其中的收纳部分。</p>
<a id="more"></a>
<!-- toc -->
<ul>
<li><a href="#%E6%94%B6%E7%BA%B3">收纳</a>
<ul>
<li><a href="#%E5%AD%A6%E4%BC%9A%E4%B8%A2%E5%BC%83%E6%98%AF%E6%94%B6%E7%BA%B3%E7%9A%84%E5%89%8D%E6%8F%90">学会“丢弃”是收纳的前提</a></li>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%94%B6%E7%BA%B3">什么是收纳？</a></li>
<li><a href="#%E5%AE%B6%E7%9A%84%E5%9B%9B%E7%BA%A7%E6%94%B6%E7%BA%B3%E5%AE%B9%E5%99%A8">家的四级收纳容器</a></li>
<li><a href="#%E6%94%B6%E7%BA%B3%E8%A7%84%E5%88%99">收纳规则</a>
<ul>
<li><a href="#%E5%A1%AB%E8%89%B2%E6%B8%B8%E6%88%8F">填色游戏</a></li>
<li><a href="#%E6%A0%87%E5%87%86">标准</a></li>
</ul>
</li>
<li><a href="#%E7%BB%9F%E4%B8%80%E5%AE%B9%E5%99%A8">统一容器</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h2><span id="收纳">收纳</span></h2>
<h3><span id="学会丢弃是收纳的前提">学会“丢弃”是收纳的前提</span></h3>
<p>学会“丢弃”，也就是我们常说的“断舍离”，是需要一些底层逻辑作为支撑的：</p>
<ul>
<li>
<p>大几万一平米的房子被用于存放价格低廉、使用频率极低或闲置的杂物？</p>
</li>
<li>
<p>贵买贱用才是浪费：房子是世界上最昂贵的生活必需品。</p>
</li>
<li>
<p>享受仍有大量富余空间的松快感，就像减肥成功的喜悦。</p>
</li>
</ul>
<h3><span id="什么是收纳">什么是收纳？</span></h3>
<ul>
<li>收纳是家居第一元素。</li>
<li>收纳释放新的生活空间。</li>
<li>收纳无处不在：大到房子，小到包包，抑或是虚拟的数据。</li>
</ul>
<h3><span id="家的四级收纳容器">家的四级收纳容器</span></h3>
<ul>
<li>
<p>房子是家的容器</p>
</li>
<li>
<p>房间是人和家居的容器</p>
</li>
<li>
<p>大型家具是具体物品的收纳</p>
</li>
<li>
<p>细分储物件是提高效率的核心工具</p>
</li>
</ul>
<h3><span id="收纳规则">收纳规则</span></h3>
<h4><span id="填色游戏">填色游戏</span></h4>
<p>将收纳区域在户型图上画出，收纳区域的颜色涂成黄色（版权问题，不使用图书中图绘）。</p>
<h4><span id="标准">标准</span></h4>
<ol>
<li>
<p>各处均布，分门别类：收纳容器应在使用位置附近。</p>
</li>
<li>
<p>收纳占比(地) ≥ 12%：房屋面积<strong>越小</strong>，收纳比例<strong>越大</strong>。</p>
</li>
<li>
<p>立体集成；消除厚重和压迫感：嵌入墙体、浅色简洁、隐藏拉手。</p>
</li>
<li>
<p>有藏有露，二八原则：隐藏80%的乱，才能展露20%的美（艺术品，最常用的物品）。</p>
</li>
</ol>
<h3><span id="统一容器">统一容器</span></h3>
<p><strong>凌乱物品 + 统一容器 = 瞬间整洁</strong></p>
<p>统一的标准：形制统一，尺寸统一，色彩协调，材质相近——变化越少越好</p>
<p>易补货才易统一：品牌稳定，款式经典，价格适中</p>
<p>五个关键词：</p>
<ol>
<li>
<p>方，方形优先</p>
</li>
<li>
<p>摞，易于摞放</p>
</li>
<li>
<p>美，外露容器需考虑美观，外表精致</p>
</li>
<li>
<p>透，对内容一目了然</p>
</li>
<li>
<p>通，多处通用</p>
</li>
</ol>
<p>用容器管理物品：有限的容器，限制购买力<br>
如何区分容器：<strong>贴标签</strong>，<strong>快行动</strong>，<strong>直白</strong><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>文字 &gt; 图像 &gt; 序号 &gt; 没有 <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>生活</category>
        <category>装修</category>
      </categories>
      <tags>
        <tag>装修</tag>
        <tag>读书笔记</tag>
        <tag>收纳</tag>
      </tags>
  </entry>
  <entry>
    <title>小家越住越大-收纳篇</title>
    <url>/20200818/small_house_big_home_(storage)/</url>
    <content><![CDATA[<blockquote><p>你如何对待家，家便如何对待你。</p>
<p>**House ≠ Home **<br>
那个灰色的水泥壳子，并不是家。<br>
人可以没有房，却不能没有家。<br>
好好住的地方就是家。</p>
<p>**Designer ≠ Dweller **<br>
设计者，只能提供半成品的“住宅”。<br>
居住者，才能搭建独一无二的“家”。</p>
<p>**Bigger ≠ Better **<br>
与其烦恼买不起大房子考虑改善型居住，不如好好提升自己内在的“住商”。</p>
<p>**M<sup>2</sup> ≠ M<sup>3</sup> **<br>
收纳是管理好小房子的大智慧。</p>
<footer><strong>逯薇</strong><cite>《小家越住越大》</cite></footer></blockquote>
<p><br><br></p>
<p>本文为阅读逯薇《小家越住越大》三部曲的读书笔记。</p>
<p>本篇主要整理其中的收纳部分。</p>
<a id="more"></a>
<!-- toc -->
<ul>
<li><a href="#%E6%94%B6%E7%BA%B3">收纳</a></li>
</ul>
<!-- tocstop -->
<h2><span id="收纳">收纳</span></h2>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>生活</category>
        <category>装修</category>
      </categories>
      <tags>
        <tag>装修</tag>
        <tag>读书笔记</tag>
        <tag>收纳</tag>
      </tags>
  </entry>
  <entry>
    <title>基于 QIIME2 的扩增子分析教程-基础篇</title>
    <url>/20201005/QIIME2-based-amplicon-analysis-tutorial(Basic)/</url>
    <content><![CDATA[<h2><span id="摘要">摘要</span></h2>
<ul>
<li>本教程为基于 QIIME2 的扩增子分析教程的第二篇。</li>
<li>本教程为基于 QIIME2 的 2020-8 版本的 “Moving Pictures” 教程进行的中文翻译 (非直译)。</li>
<li>本教程旨在帮助理解 QIIME2 以及扩增子测序的相关概念和基本分析模块和流程。</li>
</ul>
<a id="more"></a>
<hr>
<!-- toc -->
<ul>
<li><a href="#%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95">创建目录</a></li>
<li><a href="#%E6%8B%B7%E8%B4%9D%E6%95%B0%E6%8D%AE">拷贝数据</a></li>
<li><a href="#%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE">导入数据</a></li>
<li><a href="#%E6%8B%86%E5%88%86%E6%A0%B7%E5%93%81">拆分样品</a></li>
<li><a href="#%E8%B4%A8%E6%8E%A7%E4%B8%8E%E7%94%9F%E6%88%90%E7%89%B9%E5%BE%81%E8%A1%A8">质控与生成特征表</a>
<ul>
<li><a href="#1-dada2-%E6%B5%81%E7%A8%8B">1. DADA2 流程</a></li>
<li><a href="#2-deblur-%E6%B5%81%E7%A8%8B">2. Deblur 流程</a></li>
</ul>
</li>
<li><a href="#%E7%89%B9%E5%BE%81%E5%BA%8F%E5%88%97%E4%B8%8E%E7%89%B9%E5%BE%81%E8%A1%A8%E6%B1%87%E6%80%BB">特征序列与特征表汇总</a>
<ul>
<li><a href="#%E4%BA%8C%E9%80%89%E4%B8%80">二选一</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E5%8F%AF%E8%A7%86%E5%8C%96%E6%91%98%E8%A6%81">创建可视化摘要</a></li>
<li><a href="#%E7%9C%BC%E8%A7%81%E4%B8%BA%E5%AE%9E">眼见为实</a></li>
</ul>
</li>
<li><a href="#%E5%BB%BA%E6%A0%91">建树</a></li>
<li><a href="#%E7%89%A9%E7%A7%8D%E6%B3%A8%E9%87%8A">物种注释</a></li>
<li><a href="#%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90">统计分析</a>
<ul>
<li><a href="#1-%E7%89%A9%E7%A7%8D%E7%BB%84%E6%88%90%E5%88%86%E6%9E%90">1. 物种组成分析</a></li>
<li><a href="#2-alpha-%E5%92%8C-beta-%E5%A4%9A%E6%A0%B7%E6%80%A7%E5%88%86%E6%9E%90">2. Alpha 和 Beta 多样性分析</a>
<ul>
<li><a href="#21-%E8%AE%A1%E7%AE%97-alpha-%E5%A4%9A%E6%A0%B7%E6%80%A7%E6%8C%87%E6%95%B0%E5%92%8C-beta-%E5%A4%9A%E6%A0%B7%E6%80%A7%E8%B7%9D%E7%A6%BB%E7%9F%A9%E9%98%B5">2.1 计算 alpha 多样性指数和 Beta 多样性距离矩阵</a></li>
<li><a href="#22-alpha-%E5%A4%9A%E6%A0%B7%E6%80%A7%E6%8C%87%E6%95%B0%E7%9A%84%E7%BB%84%E9%97%B4%E5%B7%AE%E5%BC%82%E5%88%86%E6%9E%90">2.2 Alpha 多样性指数的组间差异分析</a></li>
<li><a href="#23-beta-%E5%A4%9A%E6%A0%B7%E6%80%A7%E6%8C%87%E6%95%B0%E7%9A%84%E7%BB%84%E9%97%B4%E5%B7%AE%E5%BC%82%E5%88%86%E6%9E%90">2.3 Beta 多样性指数的组间差异分析</a></li>
<li><a href="#24-%E8%87%AA%E5%AE%9A%E4%B9%89-emperor-%E7%9A%84%E7%AC%AC%E4%B8%89%E8%BD%B4">2.4 自定义 emperor 的第三轴</a></li>
</ul>
</li>
<li><a href="#3-alpha-%E7%A8%80%E7%96%8F%E6%9B%B2%E7%BA%BF">3. Alpha 稀疏曲线</a></li>
<li><a href="#4-ancom-%E7%89%A9%E7%A7%8D%E5%B7%AE%E5%BC%82%E5%88%86%E6%9E%90">4. ANCOM 物种差异分析</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h2><span id="创建目录">创建目录</span></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 重启psn_qiime2容器</span></span><br><span class="line">docker restart psn_qiime2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建目录  注意下面代码，直接复制可能会有问题，请参考下面的图片</span></span><br><span class="line">docker <span class="built_in">exec</span> psn_qiime2 mkdir -p qiime2-tutorial/qiime2-moving-pictures-tutorial/emp-single-end-sequences/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">docker <span class="built_in">exec</span> psn_qiime2 ls qiime2-tutorial/qiime2-moving-pictures-tutorial</span><br><span class="line"></span><br><span class="line"><span class="comment">########################################### 另一种方式是</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启psn_qiime2容器</span></span><br><span class="line">docker restart psn_qiime2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 交互模式，打开容器的一个终端</span></span><br><span class="line">docker <span class="built_in">exec</span> -it psn_qiime2 /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建目录 注意下面代码，直接复制可能会有问题，请参考下面的图片</span></span><br><span class="line">mkdir -p qiime2-tutorial/qiime2-moving-pictures-tutorial/emp-single-end-sequences/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">ls qiime2-tutorial/qiime2-moving-pictures-tutorial</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭终端</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 更直接的方法是直接在相应的位置新建文件夹 </span></span><br><span class="line"><span class="comment">## (因为我们创建容器时使用了-v /PATH/，即宿主和容器可以同时对该位置进行操作)</span></span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921172304277.png" alt="image-20200921172304277" style="zoom:150%;">
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921172620700.png" alt="image-20200921172620700" style="zoom:150%;">
<h2><span id="拷贝数据">拷贝数据</span></h2>
<p>关于数据的来源可参见<a href="https://docs.qiime2.org/2020.8/tutorials/moving-pictures/#sample-metadata" target="_blank" rel="noopener">QIIME2官网</a>，或**<u>对应的PPT教材</u>**。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 拷贝 样本信息元数据 注意下面代码，直接复制可能会有问题，请参考下面的图片</span></span><br><span class="line">docker cp D:\qiime2\data\02_data\sample_metadata.tsv psn_qiime2:/data/qiime2-tutorial/qiime2-moving-pictures-tutorial</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拷贝barcode序列文件 注意下面代码，直接复制可能会有问题，请参考下面的图片</span></span><br><span class="line">docker cp D:\qiime2\data\02_data\barcodes.fastq.gz psn_qiime2:/data/qiime2-tutorial/qiime2-moving-pictures-tutorial/emp-single-end-sequences/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拷贝序列文件 注意下面代码，直接复制可能会有问题，请参考下面的图片</span></span><br><span class="line">docker cp D:\qiime2\data\02_data\sequences.fastq.gz psn_qiime2:/data/qiime2-tutorial/qiime2-moving-pictures-tutorial/emp-single-end-sequences/</span><br><span class="line"></span><br><span class="line"><span class="comment">## 更直接的方法是将以上文件直接复制在相应的位置 </span></span><br><span class="line"><span class="comment">## (因为我们创建容器时使用了-v /PATH/，即宿主和容器可以同时对该位置进行操作)</span></span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921173332598.png" alt="image-20200921173332598"></p>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921173442418.png" alt="image-20200921173442418" style="zoom:150%;">
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921173412478.png" alt="image-20200921173412478"></p>
<h2><span id="导入数据">导入数据</span></h2>
<p>为什么要导入数据？</p>
<p>这是因为 QIIME2 中操作的几乎所有数据，都是以 QIIME 2 对象 (<em>QIIME 2 artifacts</em>) 的形式存储的，其中不关包含主要的数据 (如序列数据、表格数据等)，也包含有关数据类型和数据源的信息。因此，使用 QIIME2 分析的第一地步，也是最关键的一步，就是将序列数据文件导入到 QIIME 2 对象（也就是我们见到的 .qza 文件）中。关于 QIIME 2 对象的详细说明，请参见我们的 <u><strong>PPT 教材</strong></u>。</p>
<p>如何导入？</p>
<p>QIIME2 使用<code>qiime tools import</code>命令语句进行导入，并需要通过<code>--type</code>参数指定导入的方式。关于原始数据的所有导入方式，可参见官网相应<a href="https://docs.qiime2.org/2020.8/tutorials/importing/" target="_blank" rel="noopener">教程</a>，也可参考我们的 <strong><u>PPT 教材</u></strong>，Moving Pictures” 采用的是 EMP 单端格式的导入方式 (这种方式并未将不同样本的序列拆分开来)。而国内研究者在测序公司测序后到手的原始数据并不符合 EMP 规则（<u>我们之后的实战分析教程将会解决这一问题</u>）。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 交互模式，打开容器的一个终端</span></span><br><span class="line">docker <span class="built_in">exec</span> -it psn_qiime2 /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入工作目录</span></span><br><span class="line"><span class="built_in">cd</span> qiime2-tutorial/qiime2-moving-pictures-tutorial/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入数据</span></span><br><span class="line">qiime tools import \</span><br><span class="line">  --<span class="built_in">type</span> EMPSingleEndSequences \</span><br><span class="line">  --input-path emp-single-end-sequences \</span><br><span class="line">  --output-path emp-single-end-sequences.qza</span><br><span class="line">  </span><br><span class="line"> <span class="comment">## 注意，这里的“\”后接换行符是为了分隔长脚本为多行，没有具体意义。</span></span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921173917530.png" alt="image-20200921173917530" style="zoom:150%;">
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921175251049.png" alt="image-20200921175251049" style="zoom:150%;">
<p>我们可以使用<code>qiime tools peek</code>命令查看 QIIME 2 对象 (.qza 和 .qzv) 的基本信息。如：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看帮助文档</span></span><br><span class="line">qiime tools peek --<span class="built_in">help</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">## 其他的命令也可以采用这种方式查看帮助文档哦,</span></span><br><span class="line"><span class="comment">## 并且命令的每一个层次都是调用帮助，如：</span></span><br><span class="line"></span><br><span class="line">qiime --<span class="built_in">help</span>  <span class="comment">### 第一级</span></span><br><span class="line"></span><br><span class="line">qiime tools --<span class="built_in">help</span>  <span class="comment">### 第二级</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看刚刚生成的emp-single-end-sequences.qza文件的基本信息</span></span><br><span class="line">qiime tools peek emp-single-end-sequences.qza</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921180306454.png" alt="image-20200921180306454"></p>
<blockquote>
<p><strong>TIPs</strong></p>
<p>可以通过输入 <code>qiime    </code>后键盘点击两次 TAB 键 (qiime 后面需要加)，让 QIIME2 自动补全可能的命令，如下图。</p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921181456436.png" alt="image-20200921181456436"></p>
<p>这个技巧也可以用于快速补全输入到一半的单词。</p>
</blockquote>
<h2><span id="拆分样品">拆分样品</span></h2>
<p>我们知道采用 EMP 格式导入的序列数据，是没有拆分样品的，所有样本的序列序列都混合在一起 (sequences.fastq.gz)；测序时，我们其实是通过连接在正向引物之前 barcode 序列 (一般出现在正向序列的最前面)；和/或连接在反向引物 (如果是双端测序) 之前的 barcode 序列 (一般出现在反向序列的最前面)，对不同的样本进行区分的，教程中这部分序列已被提取为一个文件 (barcodes.fastq.gz)。</p>
<p>因此，我们需要依据 barcode 序列的样本归属 (此信息包含在样本元数据文件中)，辨别相应 ID (barcode 序列 ID 与序列 ID 一一对应) 的样本归属，进而辨别序列的样本归属。对应单端序列，QIIME2 采用 <code>demux emp-single</code> 命令进行样本拆分。</p>
<p>一般测序公司已经将样本拆分好了，所以对于普通分析者来说，这个步骤是可以跳过的，详见后续实战分析教程。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">qiime demux emp-single \</span><br><span class="line">  --i-seqs emp-single-end-sequences.qza \</span><br><span class="line">  --m-barcodes-file sample_metadata.tsv \</span><br><span class="line">  --m-barcodes-column barcode-sequence \</span><br><span class="line">  --o-per-sample-sequences demux.qza \</span><br><span class="line">  --o-error-correction-details demux-details.qza  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># --i-seqs                      输入待拆分的数据</span></span><br><span class="line"><span class="comment"># --m-barcodes-file             提供 barcode-样本ID对应信息的文件</span></span><br><span class="line"><span class="comment"># --m-barcodes-column           上述文件中barcode序列所在列的列名</span></span><br><span class="line"><span class="comment"># --o-per-sample-sequences      输出的结果</span></span><br><span class="line"><span class="comment"># --o-error-correction-details  barcode序列可能存在个别碱基的测序错误，</span></span><br><span class="line"><span class="comment">#                               此时程序可以尝试校正，这个文件即为校正的信息。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 注意拆分样本并不一定要把文件分成多个，而是要在序列ID处标注清楚样本的ID。</span></span><br></pre></td></tr></table></figure>
<p>在样本拆分完成之后，我们可以对生成的结果文件进行统计，以获得每个样本的序列数，以及序列的质量分布的情况。<u>注意，这个统计结果，对于双端测序数据采用 DADA2 分析流程的，这个统计结果特别重要</u>。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">qiime demux summarize \</span><br><span class="line">  --i-data demux.qza \</span><br><span class="line">  --o-visualization demux.qzv</span><br><span class="line">  </span><br><span class="line">## 可以将生产的demux.qzv文件拖入 view.qiime2.org 网站进行可视化</span><br><span class="line"></span><br><span class="line">## 此外，最新版本的QIIME2也支持使用脚本直接进行可视化：</span><br><span class="line"> </span><br><span class="line">qiime tools view demux.qzv</span><br><span class="line"></span><br><span class="line">## 但是，由于我们采用的docker环境没有安装可视化的支持，所以无法使用该脚本。如果是使用linux桌面版系统或MacOS系统原生安装QIIME2的，则可以使用该脚本。</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921185618246.png" alt="image-20200921185618246"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921185750183.png" alt="image-20200921185750183"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922092321221.png" alt="image-20200922092321221"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200921190040468.png" alt="image-20200921190040468"></p>
<h2><span id="质控与生成特征表">质控与生成特征表</span></h2>
<p>获得了每个样本的序列之后，我们接下来需要做的就是将 “<strong>存在测序错误的序列</strong>” 通过<u>生物信息学的方法</u>转化为 “<strong>可靠的序列</strong>” 的过程，其实也可以称之为<strong>质量控制</strong> (一般的序列聚类，从某种程度上看其实也是一种质控)。QIIME 2 提供的质控方法有很多：包括 <a href="https://www.ncbi.nlm.nih.gov/pubmed/27214047" target="_blank" rel="noopener">DADA2</a>, <a href="http://msystems.asm.org/content/2/2/e00191-16" target="_blank" rel="noopener">Deblur</a> 和 <a href="https://www.nature.com/nmeth/journal/v10/n1/abs/nmeth.2276.html" target="_blank" rel="noopener">basic quality-score-based filtering</a>。本教程使用 DADA2 和 Deblur 分别进行演示。实际分析中，我们需要根据自己数据的情况进行选用或试用。</p>
<p>通过这两种方法获得的 “<strong>可靠的序列</strong>” 包含两方面内容，一个是序列文件，一个是序列数绝对丰度表文件；它们通过一一对应的ID进行关联，并分别使用 QIIME 2 对象 <code>FeatureData[Sequence]</code> 和 <code>FeatureTable[Frequency]</code> 存放，它们相当于QIIME1 的 <em>representative sequences</em> 文件 (代表序列) 文件 和 OTU or BIOM table (OTU 表格) 文件。</p>
<h3><span id="1-dada2-流程">1. DADA2 流程</span></h3>
<p>DADA2 流程是用于检测、学习、校正和过滤 Illumina 扩增序列测序错误的工作流程，其核心是通过学习序列测序错误分布，对其进行校正，还原为正确的序列 (或者说是找到测序完全正确的母序列)。使用 <code>qiime dada2</code> 命令实现，这个质量控制过程将过滤掉在测序数据中识别的任何 <code>phiX</code> 序列 (通常存在于标记基因 Illumina 测序数据中，用于提高扩增子测序质量)，并同时过滤嵌合序列。</p>
<blockquote>
<p>注：DADA2 是斯坦福大学统计系教授 Susan P. Holmes 于 2016 年发表于 Nature Methods 的文章，知名的 R 包 “phyloseq” 也是他的作品。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">qiime dada2 denoise-single \</span><br><span class="line">  --i-demultiplexed-seqs demux.qza \</span><br><span class="line">  --p-trim-left 0 \</span><br><span class="line">  --p-trunc-len 120 \</span><br><span class="line">  --o-representative-sequences rep-seqs-dada2.qza \</span><br><span class="line">  --o-table table-dada2.qza \</span><br><span class="line">  --o-denoising-stats stats-dada2.qza</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 对于单端采用 denoise-single (第三级) 命令，</span></span><br><span class="line"><span class="comment">## 如果是双端，则需要采用 denoise-paired 命令，</span></span><br><span class="line"><span class="comment">## 一代采用 denoise-pyro 命令；</span></span><br><span class="line"><span class="comment">## 三代数据，我们公司采用的是自主编写的 denoise-pacbio 命令</span></span><br><span class="line"><span class="comment">## 这是由于 DADA2 本身已经能够支持三代数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line"><span class="comment">## --i-demultiplexed-seqs  输入拆分好样品的序列文件，即上一步的输出文件 </span></span><br><span class="line"><span class="comment">## --p-trim-left           序列左端 (5'端) 切除碱基长度。</span></span><br><span class="line"><span class="comment">##                         一般用于切除低质量碱基、引物(建议切除)或barcode(如有)。</span></span><br><span class="line"><span class="comment">## --p-trunc-len           序列右端 (3'端) 切除碱基，使得长度为该值。</span></span><br><span class="line"><span class="comment">##                         注意，如果本身长度已经低于该值，则该序列将被舍弃，</span></span><br><span class="line"><span class="comment">##                         所以不要设置得过高；设置为 0 不进行任何切除和过滤。 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">## --o-representative-sequences 输出 ASV 特征序列(代表序列)文件</span></span><br><span class="line"><span class="comment">## --o-table                    输出 ASV 特征表文件</span></span><br><span class="line"><span class="comment">## --o-denoising-stats          输出去噪的统计结果</span></span><br><span class="line"><span class="comment">## 其他参数请见实战流程</span></span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922112937366.png" alt="image-20200922112937366" style="zoom:150%;">
<p>我们看一看结果 (绿色为当前产生的文件)：</p>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922113442357.png" alt="image-20200922113442357" style="zoom:150%;">
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 我们再看一下去噪的情况，使用以下脚本</span></span><br><span class="line">qiime metadata tabulate \</span><br><span class="line">  --m-input-file stats-dada2.qza \</span><br><span class="line">  --o-visualization stats-dada2.qzv</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922114251640.png" alt="image-20200922114251640"></p>
<p>可以看到：对于单端数据，DADA2流程包括了：质量过滤、去噪、去嵌合体三个主要的数据处理步骤。</p>
<h3><span id="2-deblur-流程">2. Deblur 流程</span></h3>
<p>另外一种方法是 Deblur，由于我们后期主要还是使用 DADA2 进行实战分析，所以此方法只作为拓展学习。算法是虽然有所不同，但 Deblur 也是利用了序列的质量值来做文章的。它使用序列的质量值将存在测序错误的序列与真实生物序列（16S 为 88% 聚类的Green_Genes 13_8 数据库序列，其他类型的扩增子需要自行提供）相关联，从而得到高质量的 ASV 序列数据。</p>
<p>需要注意的是，目前 Deblur 只支持单端序列，双端序列需要先拼接后才能使用。</p>
<p>首先，需要生成序列错误配置文件，这里使用基于质量得分的质量过滤命令。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 过滤并产生 序列错误统计文件</span><br><span class="line">qiime quality-filter q-score \</span><br><span class="line"> --i-demux demux.qza \</span><br><span class="line"> --o-filtered-sequences demux-filtered.qza \</span><br><span class="line"> --o-filter-stats demux-filter-stats.qza</span><br><span class="line"></span><br><span class="line"># 查看序列错误统计结果</span><br><span class="line">qiime metadata tabulate \</span><br><span class="line">  --m-input-file demux-filter-stats.qza \</span><br><span class="line">  --o-visualization demux-filter-stats.qzv</span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922141253688.png" alt="image-20200922141253688" style="zoom:150%;">
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922141158119.png" alt="image-20200922141158119"></p>
<p>这之后，便可以使用 <code>qiime deblur denoise-16S</code> 命令进行去噪。此方法需要一个用于质量过滤的参数，即截断位置n长度的序列的 <code>--p-trim-length n</code>。通常，Deblur 开发人员建议将该值设置为质量分数中位数开始下降至低质量区时的长度。在本次数据上，质量图（在质量过滤之前）表明合理的选择是在115至130序列位置范围内。这是一个主观的评估。你可能不采用该建议的一种原因是存在多个批次测序的元分析时。在这种情况的元分析中，<strong>比较所有批次的序列长度是否相同，以避免人为引入特定的偏差，全局考虑这些是非常重要的</strong>。由于我们已经使用修剪长度为 120 bp用于<code>qiime dada2 denoise-single</code>分析，并且由于120 bp是基于质量图的结果，这里我们将使用<code>--p-trim-length 120</code>参数。下一个命令可能需要10分钟才能运行完成。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Deblur 去噪</span></span><br><span class="line">qiime deblur denoise-16S \</span><br><span class="line">  --i-demultiplexed-seqs demux-filtered.qza \</span><br><span class="line">  --p-trim-length 120 \</span><br><span class="line">  --o-representative-sequences rep-seqs-deblur.qza \</span><br><span class="line">  --o-table table-deblur.qza \</span><br><span class="line">  --p-sample-stats \</span><br><span class="line">  --o-stats deblur-stats.qza</span><br><span class="line"></span><br><span class="line"><span class="comment">## 参数说明</span></span><br><span class="line"><span class="comment">## --i-demultiplexed-seqs       分样并质控后的序列</span></span><br><span class="line"><span class="comment">## --p-trim-length              序列右端 (3'端) 切除碱基，使得长度为该值。</span></span><br><span class="line"><span class="comment">##                              注意，如果本身长度已经低于该值，则该序列将被舍弃，</span></span><br><span class="line"><span class="comment">##                              所以不要设置得过高；设置为 0 不进行任何切除和过滤。       </span></span><br><span class="line"><span class="comment">## --o-representative-sequences 输出 ASV 特征序列(代表序列)文件</span></span><br><span class="line"><span class="comment">## --o-table table-deblur.qza   输出 ASV 特征丰度表文件</span></span><br><span class="line"><span class="comment">## --p-sample-stats             指定对每个样本分别进行去噪结果的统计</span></span><br><span class="line"><span class="comment">## --o-stats deblur-stats.qza   去噪结果统计文件</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看去噪的情况</span></span><br><span class="line">qiime deblur visualize-stats \</span><br><span class="line">  --i-deblur-stats deblur-stats.qza \</span><br><span class="line">  --o-visualization deblur-stats.qzv</span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922143924885.png" alt="image-20200922143924885" style="zoom:150%;">
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922144200144.png" alt="image-20200922144200144" style="zoom:150%;">
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922144244927.png" alt="image-20200922144244927"></p>
<h2><span id="特征序列与特征表汇总">特征序列与特征表汇总</span></h2>
<h3><span id="二选一">二选一</span></h3>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" disabled type="checkbox"> 选择 Deblur 进行后续分析</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mv rep-seqs-deblur.qza rep-seqs.qza</span><br><span class="line">mv table-deblur.qza table.qza</span><br></pre></td></tr></table></figure>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked disabled type="checkbox"> 选择 DADA2 进行后续分析</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mv rep-seqs-dada2.qza rep-seqs.qza</span><br><span class="line">mv table-dada2.qza table.qza</span><br></pre></td></tr></table></figure>
<h3><span id="创建可视化摘要">创建可视化摘要</span></h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 汇总特征丰度表</span></span><br><span class="line">qiime feature-table summarize \</span><br><span class="line">  --i-table table.qza \</span><br><span class="line">  --o-visualization table.qzv \</span><br><span class="line">  --m-sample-metadata-file sample_metadata.tsv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 汇总特征序列  </span></span><br><span class="line">qiime feature-table tabulate-seqs \</span><br><span class="line">  --i-data rep-seqs.qza \</span><br><span class="line">  --o-visualization rep-seqs.qzv</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922155147390.png" alt="image-20200922155147390"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922155208293.png" alt="image-20200922155208293"></p>
<h3><span id="眼见为实">眼见为实</span></h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rm -rf table rep-seqs    <span class="comment">## 事先删除这两个文件夹 </span></span><br><span class="line"></span><br><span class="line">qiime tools <span class="built_in">export</span> \</span><br><span class="line">   --input-path table.qza \</span><br><span class="line">   --output-path table     </span><br><span class="line">   <span class="comment">## 在table文件夹中将产生feature-table.biom文件</span></span><br><span class="line"></span><br><span class="line">mv table/feature-table.biom table.biom  <span class="comment">## 把它移出来</span></span><br><span class="line"></span><br><span class="line">biom convert -i table.biom -o table.tsv --to-tsv  <span class="comment">## 转化为tsv格式</span></span><br><span class="line"></span><br><span class="line">qiime tools <span class="built_in">export</span> \</span><br><span class="line">   --input-path rep-seqs.qza \</span><br><span class="line">   --output-path rep-seqs  </span><br><span class="line">   <span class="comment">## 在rep-seqs文件夹中将产生dna-sequences.fasta文件</span></span><br><span class="line">   </span><br><span class="line">mv rep-seqs/dna-sequences.fasta rep-seqs.fasta  <span class="comment">## 把它移出来</span></span><br><span class="line"></span><br><span class="line">rm -rf table rep-seqs 删除</span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922162009833.png" alt="image-20200922162009833" style="zoom:150%;">
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922162045760.png" alt="image-20200922162045760" style="zoom:150%;">
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">## 可以使用</span><br><span class="line">## head 文件名     查看前几行</span><br><span class="line">## less -S 文件名  拖动查看文件，键盘按q键退出</span><br><span class="line">## wc -l 文件名    查看行数</span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922162217024.png" alt="image-20200922162217024" style="zoom:150%;">
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922162313599.png" alt="image-20200922162313599" style="zoom:150%;">
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922162329569.png" alt="image-20200922162329569" style="zoom:150%;">
<h2><span id="建树">建树</span></h2>
<p>进行多样性分析会使用到一些基于系统发育的多样性指数，包括<code>Faith’s Phylogenetic Diversity</code>、<code>weighted</code>和<code>unweighted UniFrac</code>。这些指数需要使用到由 ASV 序列文件构建的有根的进化树。这里使用的是 <code>qiime phylogeny</code> 命令的 <code>align-to-tree-mafft-fasttree</code> 流程。</p>
<p>从命令的命名也可以看出，该流程是首先调用 <code>mafft</code> 程序执行对 ASV 特征序列中的每条 ASV 序列进行多序列比对并对齐，创建 QIIME 2 对象 aligned-rep-seqs.qza (对齐的序列文件)。接下来，流程会对对齐的高度可变区 (高变区, 或者无意义的噪声区域) 进行 mask 或过滤。随后，调用 <code>FastTree</code> 程序基于 mask 后的对齐的序列文件生成系统发育树，该程序创建的是一个无根树，因此流程最后会使用 “根中点法” 将树的根放置在无根树中最长端到端距离的中点，从而形成有根树。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">qiime phylogeny align-to-tree-mafft-fasttree \</span><br><span class="line">  --i-sequences rep-seqs.qza \</span><br><span class="line">  --o-alignment aligned-rep-seqs.qza \</span><br><span class="line">  --o-masked-alignment masked-aligned-rep-seqs.qza \</span><br><span class="line">  --o-tree unrooted-tree.qza \</span><br><span class="line">  --o-rooted-tree rooted-tree.qza</span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line"><span class="comment">##  --i-sequences         输入特征序列文件</span></span><br><span class="line"><span class="comment">##  --o-alignment         输出对齐的序列文件</span></span><br><span class="line"><span class="comment">##  --o-masked-alignment  输出 mask 后的对齐的序列文件</span></span><br><span class="line"><span class="comment">##  --o-tree              输出无根数文件</span></span><br><span class="line"><span class="comment">##  --o-rooted-tree       输出有根数文件</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>warnings:</p>
<p>​    对于ITS项目，由于ITS序列的高可变性，因此往往难以对齐，也就不能进行常规的建树分析了。</p>
<p>​	对于功能基因项目，如需建树，一般考虑使用聚类后的蛋白序列进行建树。</p>
</blockquote>
<h2><span id="物种注释">物种注释</span></h2>
<p>QIIME 2 默认提供了三种物种注释的手段：局部比对注释 (blast)，全局比对注释 (vsearch) 以及本教程使用的经过预先训练的 <a href="https://data.qiime2.org/2020.8/common/gg-13-8-99-515-806-nb-classifier.qza" target="_blank" rel="noopener">Naive Bayes 分类器</a>，使用的命令是 <code>qiime feature-classifier classify-sklearn</code>。</p>
<blockquote>
<p>注：本教程的分类器是在基于 Greengenes 13_8 99% 序列训练的，这些序列首先被修剪 16S V4 区域，即引物 515F/806R 能够扩增到的序列区域范围。我们将把这个分类器应用到序列中，并且可以生成从序列到物种注释结果关联的可视化。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 请先将 gg-13-8-99-515-806-nb-classifier.qza </span></span><br><span class="line"><span class="comment"># 文件复制到 qiime2-moving-pictures-tutorial 文件夹中去。</span></span><br><span class="line"><span class="comment">## 机器学习物种注释</span></span><br><span class="line">qiime feature-classifier classify-sklearn \</span><br><span class="line">  --i-classifier gg-13-8-99-515-806-nb-classifier.qza \</span><br><span class="line">  --i-reads rep-seqs.qza \</span><br><span class="line">  --o-classification taxonomy.qza</span><br><span class="line"></span><br><span class="line"><span class="comment">## 参数说明</span></span><br><span class="line"><span class="comment">##  --i-classifier      输入 Naive Bayes 分类器</span></span><br><span class="line"><span class="comment">##  --i-reads           ASV特征序列文件</span></span><br><span class="line"><span class="comment">##  --o-classification  物种注释结果文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 物种注释结果可视化</span></span><br><span class="line">qiime metadata tabulate \</span><br><span class="line">  --m-input-file taxonomy.qza \</span><br><span class="line">  --o-visualization taxonomy.qzv</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922171443498.png" alt="image-20200922171443498"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922171654473.png" alt="image-20200922171654473"></p>
<h2><span id="统计分析">统计分析</span></h2>
<h3><span id="1-物种组成分析">1. 物种组成分析</span></h3>
<ul>
<li>绘制柱状图</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">qiime taxa barplot \</span><br><span class="line">  --i-table table.qza \</span><br><span class="line">  --i-taxonomy taxonomy.qza \</span><br><span class="line">  --m-metadata-file sample_metadata.tsv \</span><br><span class="line">  --o-visualization taxa-bar-plots.qzv</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922172544198.png" alt="image-20200922172544198"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922172142619.png" alt="image-20200922172142619"></p>
<h3><span id="2-alpha-和-beta-多样性分析">2. Alpha 和 Beta 多样性分析</span></h3>
<p>QIIME 2 的多样性分析使用 <code>qiime diversity</code> 命令，实现同时对几种最重要的 α 和 β 多样性指数进行计算，并可以使用分析和统计检验手段生成交互式可视化图表。</p>
<h4><span id="21-计算-alpha-多样性指数和-beta-多样性距离矩阵">2.1 计算 alpha 多样性指数和 Beta 多样性距离矩阵</span></h4>
<p>我们将使用 <code>core-metrics-phylogenetic</code> 流程，该流程首先将 ASV 特征表抽平到指定的测序深度，然后计算几种常用的 α 和 β 多样性指数，并调用 <code>Emperor</code> 程序为每个 β 多样性距离矩阵生成主坐标分析（PCoA）图。alpha 多样性指数和 Beta 多样性距离如下：</p>
<blockquote>
<ul>
<li>Alpha diversity
<ul>
<li><u>Shannon’s diversity index</u> (a quantitative measure of community richness)</li>
<li><u>Observed Features</u> (a qualitative measure of community richness)</li>
<li><u>Faith’s Phylogenetic Diversity</u> (a qualitiative measure of community richness that incorporates phylogenetic relationships between the features)</li>
<li><u>Evenness</u> (or Pielou’s Evenness; a measure of community evenness)</li>
</ul>
</li>
<li>Beta diversity
<ul>
<li><u>Jaccard distance</u> (a qualitative measure of community dissimilarity)</li>
<li><u>Bray-Curtis distance</u> (a quantitative measure of community dissimilarity)</li>
<li><u>unweighted UniFrac distance</u> (a qualitative measure of community dissimilarity that incorporates phylogenetic relationships between the features)</li>
<li><u>weighted UniFrac distance</u> (a quantitative measure of community dissimilarity that incorporates phylogenetic relationships between the features)</li>
</ul>
</li>
</ul>
</blockquote>
<p>文件中呈现的信息并<strong>选择一个尽可能高的值（因此每个样本保留更多的序列）同时尽可能少地排除样本来进行选择</strong>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">qiime diversity core-metrics-phylogenetic \</span><br><span class="line">  --i-phylogeny rooted-tree.qza \</span><br><span class="line">  --i-table table.qza \</span><br><span class="line">  --p-sampling-depth 1103 \</span><br><span class="line">  --m-metadata-file sample_metadata.tsv \</span><br><span class="line">  --output-dir core-metrics-results</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line"><span class="comment">##  --i-phylogeny      输入有根树文件</span></span><br><span class="line"><span class="comment">##  --i-table          输入ASV特征丰度表</span></span><br><span class="line"><span class="comment">##  --p-sampling-depth 指定抽平(即稀疏 rarefaction)深度;</span></span><br><span class="line"><span class="comment">##                     注意，如果任何样本的总丰度小于该值，</span></span><br><span class="line"><span class="comment">##                     这些样本将从该分析中删除。</span></span><br><span class="line"><span class="comment">##                     选择时可以参考table.qzv呈现的信息。</span></span><br><span class="line"><span class="comment">##                     对于当前的二代测序产品，由于通量极高,</span></span><br><span class="line"><span class="comment">##                     一般可以选择最小丰度值的90%-95%</span></span><br><span class="line"><span class="comment">##  --m-metadata-file  输入数据信息表，可以是之前使用的元数据表，也可以另建</span></span><br><span class="line"><span class="comment">##  --output-dir       指定输出结果文件的目录</span></span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922192759746.png" alt="image-20200922192759746"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922185220000.png" alt="image-20200922185220000"></p>
<h4><span id="22-alpha-多样性指数的组间差异分析">2.2 Alpha 多样性指数的组间差异分析</span></h4>
<p>我们可以先来看看 alpha 多样性指数在不同分组之间的差异，采用默认的 KW 秩和检验。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># faith-pd 注意下面代码，直接复制可能会有问题，请参考下面的图片</span></span><br><span class="line">qiime diversity alpha-group-significance \</span><br><span class="line">  --i-alpha-diversity core-metrics-results/faith_pd_vector.qza \</span><br><span class="line">  --m-metadata-file sample_metadata.tsv \</span><br><span class="line">  --o-visualization core-metrics-results/faith-pd-group-significance.qzv</span><br><span class="line"></span><br><span class="line"><span class="comment"># evenness  注意下面代码，直接复制可能会有问题，请参考下面的图片</span></span><br><span class="line">qiime diversity alpha-group-significance \</span><br><span class="line">  --i-alpha-diversity core-metrics-results/evenness_vector.qza \</span><br><span class="line">  --m-metadata-file sample_metadata.tsv \</span><br><span class="line">  --o-visualization core-metrics-results/evenness-group-significance.qzv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数说明										</span></span><br><span class="line"><span class="comment">## --i-alpha-diversity  输入 alpha 多样性指数文件</span></span><br><span class="line"><span class="comment">## --m-metadata-file    样本信息表,可使用元数据表</span></span><br><span class="line"><span class="comment">## --o-visualization    输出可视化结果路径</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Tips:</p>
<p>如果你的分组其实是时间序列或其他连续变量，那么可以使用 <code>qiime diversity alpha-correlation</code> 命令来探究 alpha 多样性指数与时间关联性。</p>
</blockquote>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922195924646.png" alt="image-20200922195924646"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922200117469.png" alt="image-20200922200117469"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922200131990.png" alt="image-20200922200131990"></p>
<h4><span id="23-beta-多样性指数的组间差异分析">2.3 Beta 多样性指数的组间差异分析</span></h4>
<p>对于 beta 多样性指数 (距离矩阵)，我们将使用 <code>beta-group-significance</code> 命令并选择 <a href="http://onlinelibrary.wiley.com/doi/10.1111/j.1442-9993.2001.01070.pp.x/full" target="_blank" rel="noopener">PERMANOVA</a> 的方法进行<u>组间差异分析与检验</u>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 组为body-site 注意下面代码，直接复制可能会有问题，请参考下面的图片</span></span><br><span class="line">qiime diversity beta-group-significance \</span><br><span class="line">  --i-distance-matrix core-metrics-results/unweighted_unifrac_distance_matrix.qza \</span><br><span class="line">  --m-metadata-file sample_metadata.tsv \</span><br><span class="line">  --m-metadata-column body-site \</span><br><span class="line">  --o-visualization core-metrics-results/unweighted-unifrac-body-site-significance.qzv \</span><br><span class="line">  --p-pairwise</span><br><span class="line"></span><br><span class="line"><span class="comment"># 组为subject 注意下面代码，直接复制可能会有问题，请参考下面的图片</span></span><br><span class="line">qiime diversity beta-group-significance \</span><br><span class="line">  --i-distance-matrix core-metrics-results/unweighted_unifrac_distance_matrix.qza \</span><br><span class="line">  --m-metadata-file sample_metadata.tsv \</span><br><span class="line">  --m-metadata-column subject \</span><br><span class="line">  --o-visualization core-metrics-results/unweighted-unifrac-subject-group-significance.qzv \</span><br><span class="line">  --p-pairwise</span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数说明										</span></span><br><span class="line"><span class="comment">## --i-distance-matrix  输入距离矩阵文件</span></span><br><span class="line"><span class="comment">## --m-metadata-file    样本信息表,可使用元数据表</span></span><br><span class="line"><span class="comment">## --m-metadata-column  要进行比较的组，即在样本信息表中的列名</span></span><br><span class="line"><span class="comment">## --o-visualization    输出可视化结果路径</span></span><br><span class="line"><span class="comment">## --p-pairwise		    进行组间的两两成对检验，不加这个参数则不会进行</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Tips:</p>
<p>如果你的分组其实是时间序列或其他连续变量，那么可以使用 qiime metadata distance-matrix<code> 命令配合</code>qiime diversity mantel<code>和</code>qiime diversity bioenv` 命令进行分析。</p>
</blockquote>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922200708970.png" alt="image-20200922200708970"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922200612495.png" alt="image-20200922200612495"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922200738565.png" alt="image-20200922200738565"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922200812413.png" alt="image-20200922200812413"></p>
<h4><span id="24-自定义-emperor-的第三轴">2.4 自定义 emperor 的第三轴</span></h4>
<p>排序，是在样本分组间探索微生物群落组成差异的常用方法。我们可以使用 <code>qiime emperor plot</code> 命令，在绘制三维 PCoA 图时，将自定义的连续型表量作为第三轴加入绘图。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># unweighted_unifrac 注意下面代码，直接复制可能会有问题，请参考下面的图片</span></span><br><span class="line">qiime emperor plot \</span><br><span class="line">  --i-pcoa core-metrics-results/unweighted_unifrac_pcoa_results.qza \</span><br><span class="line">  --m-metadata-file sample_metadata.tsv \</span><br><span class="line">  --p-custom-axes days-since-experiment-start \</span><br><span class="line">  --o-visualization core-metrics-results/unweighted-unifrac-emperor-days-since-experiment-start.qzv</span><br><span class="line"></span><br><span class="line"><span class="comment"># bray_curtis 注意下面代码，直接复制可能会有问题，请参考下面的图片</span></span><br><span class="line">qiime emperor plot \</span><br><span class="line">  --i-pcoa core-metrics-results/bray_curtis_pcoa_results.qza \</span><br><span class="line">  --m-metadata-file sample_metadata.tsv \</span><br><span class="line">  --p-custom-axes days-since-experiment-start \</span><br><span class="line">  --o-visualization core-metrics-results/bray-curtis-emperor-days-since-experiment-start.qzv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line"><span class="comment">##  --i-pcoa           输入PCoA结果文件</span></span><br><span class="line"><span class="comment">##  --m-metadata-file  样本信息表,可使用元数据表</span></span><br><span class="line"><span class="comment">##  --p-custom-axes    要指定 emperor 第三轴的列名，也是样本信息表中相应列的列名</span></span><br><span class="line"><span class="comment">##  --o-visualization  输出可视化结果的路径</span></span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922201754492.png" alt="image-20200922201754492" style="zoom:150%;">
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922193508459.png" alt="image-20200922193508459"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922194018003.png" alt="image-20200922194018003"></p>
<p>如上图，我们可以看到四个身体部位是如何随时间变化的。</p>
<h3><span id="3-alpha-稀疏曲线">3. Alpha 稀疏曲线</span></h3>
<p>使用 <code>qiime diversity alpha-rarefaction</code> 命令可以探索 α 多样性与采用深度之间的关系。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">qiime diversity alpha-rarefaction \</span><br><span class="line">  --i-table table.qza \</span><br><span class="line">  --i-phylogeny rooted-tree.qza \</span><br><span class="line">  --p-max-depth 4000 \</span><br><span class="line">  --m-metadata-file sample_metadata.tsv \</span><br><span class="line">  --o-visualization alpha-rarefaction.qzv</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line"><span class="comment">##  --i-table         输入特征丰度表文件</span></span><br><span class="line"><span class="comment">##  --i-phylogeny     有根树文件(用于计算Faith's PD)</span></span><br><span class="line"><span class="comment">##  --p-max-depth     最大的采样深度 (抽平深度)</span></span><br><span class="line"><span class="comment">##  --m-metadata-file 样本信息表,可使用元数据表</span></span><br><span class="line"><span class="comment">##  --o-visualization 输出可视化结果文件</span></span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922203126299.png" alt="image-20200922203126299" style="zoom:150%;">
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922203047964.png" alt="image-20200922203047964" style="zoom:150%;">
<h3><span id="4-ancom-物种差异分析">4. ANCOM 物种差异分析</span></h3>
<p><a href="https://www.ncbi.nlm.nih.gov/pubmed/26028277" target="_blank" rel="noopener">ANCOM</a> 可用于识别不同样本组间丰度显著差异的物种 (或 ASV)。ANCOM 是使用<code>qiime composition</code> 命令实现的。ANCOM 假设组间的物种只有很少（小于约 25%）的一部分发生了显著变化 (如果你发现多数的物种都发生了明显变化，你可能就需要尝试使用 <code>qiime gneiss</code> 命令来找出真正变化的物种了)。<strong>如果你认为在组与组之间有更多的物种发生了改变，那么就不应该使用 ANCOM</strong>，因为它更容易出错 (I类错误/假阴性错误和II类错误/假阳性错误都有可能增加)。</p>
<blockquote>
<p>注意：物种丰度差异分析是微生物组学研究中常用的分析方法。QIIME 2 提供了两种分析方法：<code>gneiss</code> 和 <code>composition</code> 。这里使用的是 <code>composition</code>。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 对丰度表进行过滤，只比较肠道样本组之间差异，这样更符合 ANCOM 假设</span></span><br><span class="line">qiime feature-table filter-samples \</span><br><span class="line">  --i-table table.qza \</span><br><span class="line">  --m-metadata-file sample_metadata.tsv \</span><br><span class="line">  --p-where <span class="string">"[body-site]='gut'"</span> \</span><br><span class="line">  --o-filtered-table gut-table.qza</span><br><span class="line">  </span><br><span class="line"><span class="comment">#  参数说明</span></span><br><span class="line"><span class="comment">## --i-table          输入特征丰度表</span></span><br><span class="line"><span class="comment">## --m-metadata-file  样本信息表,可使用元数据表</span></span><br><span class="line"><span class="comment">## --p-where          参数用双引号包围，[]中填写进行过滤要依据的列名，</span></span><br><span class="line"><span class="comment">##                    =号后面的''中填写该列名下进行过滤要保留的组名</span></span><br><span class="line"><span class="comment">## --o-filtered-table 输出过滤后的特征表</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 特征丰度表添加伪计数，消除零值</span></span><br><span class="line">qiime composition add-pseudocount \</span><br><span class="line">  --i-table gut-table.qza \</span><br><span class="line">  --o-composition-table comp-gut-table.qza</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line"><span class="comment">## --i-table 输入的特征表</span></span><br><span class="line"><span class="comment">## --o-composition-table 新的特征丰度表，ANCOM 要求所有的丰度都不为零。</span></span><br><span class="line"><span class="comment">##                       为此，需要对每个丰度值添加一个伪计数</span></span><br><span class="line"><span class="comment">##                       add-pseudocount(一种遗失值插补方法)，</span></span><br><span class="line"><span class="comment">##                       这将产生一个新的组成型特征丰度表。</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 进行 ancom 分析</span></span><br><span class="line">qiime composition ancom \</span><br><span class="line">  --i-table comp-gut-table.qza \</span><br><span class="line">  --m-metadata-file sample_metadata.tsv \</span><br><span class="line">  --m-metadata-column subject \</span><br><span class="line">  --o-visualization ancom-subject.qzv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line"><span class="comment">##  --i-table            输入特征丰度表 (经过add-pseudocount处理)</span></span><br><span class="line"><span class="comment">##  --m-metadata-file    样本信息表,可使用元数据表</span></span><br><span class="line"><span class="comment">##  --m-metadata-column  比较的分组名，即是样本信息表的列名</span></span><br><span class="line"><span class="comment">##  --o-visualization    输出可视化结果</span></span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922213738221.png" alt="image-20200922213738221" style="zoom:150%;">
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922214134978.png" alt="image-20200922214134978"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922214155565.png" alt="image-20200922214155565"></p>
<p>上面分析的是ASV水平的差异物种，如果要分析分类单元水平的差异物种呢？</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 对过滤后只保留肠道样本的特征丰度表进行汇总，获得属水平物种丰度表</span></span><br><span class="line">qiime taxa collapse \</span><br><span class="line">  --i-table gut-table.qza \</span><br><span class="line">  --i-taxonomy taxonomy.qza \</span><br><span class="line">  --p-level 6 \</span><br><span class="line">  --o-collapsed-table gut-table-l6.qza</span><br><span class="line"></span><br><span class="line"><span class="comment">## 参数说明</span></span><br><span class="line"><span class="comment">##  --i-table           输入特征丰度表</span></span><br><span class="line"><span class="comment">##  --i-taxonomy        输入物种注释信息表</span></span><br><span class="line"><span class="comment">##  --p-level           要汇总的分类学水平</span></span><br><span class="line"><span class="comment">##  --o-collapsed-table 输出某分类学水平的物种丰度表</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 丰度表添加伪计数，消除零值</span></span><br><span class="line">qiime composition add-pseudocount \</span><br><span class="line">  --i-table gut-table-l6.qza \</span><br><span class="line">  --o-composition-table comp-gut-table-l6.qza</span><br><span class="line"></span><br><span class="line"><span class="comment">##  参数说明</span></span><br><span class="line"><span class="comment">## --i-table 输入的丰度表</span></span><br><span class="line"><span class="comment">## --o-composition-table 新的丰度表，ANCOM 要求所有的丰度都不为零。</span></span><br><span class="line"><span class="comment">##                       为此，需要对每个丰度值添加一个伪计数</span></span><br><span class="line"><span class="comment">##                       add-pseudocount(一种遗失值插补方法)，</span></span><br><span class="line"><span class="comment">##                       这将产生一个新的组成型特征丰度表。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 进行 ancom 分析</span></span><br><span class="line">qiime composition ancom \</span><br><span class="line">  --i-table comp-gut-table-l6.qza \</span><br><span class="line">  --m-metadata-file sample_metadata.tsv \</span><br><span class="line">  --m-metadata-column subject \</span><br><span class="line">  --o-visualization l6-ancom-subject.qzv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line"><span class="comment">##  --i-table            输入特征丰度表 (经过add-pseudocount处理)</span></span><br><span class="line"><span class="comment">##  --m-metadata-file    样本信息表,可使用元数据表</span></span><br><span class="line"><span class="comment">##  --m-metadata-column  比较的分组名，即是样本信息表的列名</span></span><br><span class="line"><span class="comment">##  --o-visualization    输出可视化结果</span></span><br></pre></td></tr></table></figure>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922215042673.png" alt="image-20200922215042673" style="zoom:150%;">
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922215103351.png" alt="image-20200922215103351"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200922215118717.png" alt="image-20200922215118717"></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>扩增子</category>
      </categories>
      <tags>
        <tag>QIIME2</tag>
        <tag>扩增子</tag>
      </tags>
  </entry>
  <entry>
    <title>小家越住越大-玄关篇</title>
    <url>/20200818/small_house_big_home_(storage)/</url>
    <content><![CDATA[<blockquote><p>有舍，才有得。<br>
想要得到整体的“宽”<br>
必须先舍得局部的“窄”。</p>
<footer><strong>逯薇</strong><cite>《小家越住越大》</cite></footer></blockquote>
<p><br><br></p>
<p>本文为阅读逯薇《小家越住越大》三部曲的读书笔记。</p>
<p>本篇主要整理其中的客厅部分 (主要是介绍电视柜)。</p>
<a id="more"></a>
<!-- toc -->
<ul>
<li><a href="#%E5%B9%B3%E9%9D%A2%E5%B8%83%E5%B1%80%E5%9B%BE">平面布局图</a></li>
<li><a href="#%E8%B6%85%E7%BA%A7%E5%A4%A7%E6%9F%9C">超级大柜</a></li>
<li><a href="#%E5%AE%A2%E5%8E%85%E5%8D%B3%E6%98%AF%E4%B9%A6%E6%88%BF">客厅即是书房</a></li>
<li><a href="#%E5%90%84%E5%BD%92%E5%85%B6%E4%BD%8D%E6%9C%89%E9%9C%B2%E6%9C%89%E8%97%8F">各归其位，有露有藏</a>
<ul>
<li><a href="#%E7%B2%BE%E7%A5%9E%E4%BB%B7%E5%80%BC">精神价值</a>
<ul>
<li><a href="#%E5%AE%B6%E7%9A%84%E5%BE%85%E5%AE%A2%E4%B9%8B%E9%81%93">家的待客之道</a></li>
</ul>
</li>
<li><a href="#%E5%AE%9E%E7%94%A8%E4%BB%B7%E5%80%BC">实用价值</a></li>
<li><a href="#%E9%9E%8B%E6%9F%9C%E5%B0%BA%E5%AF%B8%E4%B8%8E%E6%AC%BE%E5%BC%8F">鞋柜尺寸与款式</a>
<ul>
<li><a href="#%E6%B7%B1%E5%BA%A6">深度</a></li>
<li><a href="#%E5%B1%82%E6%9D%BF%E9%97%B4%E8%B7%9D">层板间距</a></li>
<li><a href="#%E5%8F%AF%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%B1%82%E6%9D%BF">可活动的层板</a></li>
<li><a href="#%E9%9E%8B%E6%9F%9C%E7%9A%84%E6%9E%84%E6%88%90">鞋柜的构成</a></li>
<li><a href="#%E5%AE%B9%E9%87%8F%E4%BC%98%E5%85%88">容量优先</a></li>
<li><a href="#%E6%95%9E%E5%BC%80%E5%B8%B8%E9%9E%8B%E4%BD%8D">敞开“常鞋位”</a></li>
<li><a href="#%E5%B0%8F%E7%BA%A2%E4%B9%A6%E6%8E%A8%E8%8D%90%E6%AC%BE%E9%80%82%E7%94%A8%E4%BA%8E%E6%9C%AC%E4%BA%BA%E7%9A%84%E5%BC%80%E9%97%A8%E6%97%A0%E7%8E%84%E5%85%B3%E6%88%B7%E5%9E%8B">小红书推荐款（适用于本人的开门无玄关户型）</a></li>
<li><a href="#%E9%9E%8B%E7%9B%92-%E7%95%99%E4%B8%8E%E5%BC%83">鞋盒 留与弃</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h2><span id="平面布局图">平面布局图</span></h2>
<p>“沙发对着电视”的长方形空间，是最常见的客厅布局。</p>
<p>想要客厅真正的“显大”，秘诀就是：</p>
<ol>
<li>可以活动的家具尽量不买太大。</li>
<li>固定收纳却要尽量做大</li>
</ol>
<h2><span id="超级大柜">超级大柜</span></h2>
<p>一面长 3.9 米，宽 0.3 米的电视柜，相当于100个登记箱的容量。</p>
<p>作用：用于存放全家人的 70% 的公共物品：</p>
<p>1.书籍 (如果你没有书房，或者书架不够大)，孩子的绘本将是一个很大的收纳需求<br>
2.药品，不多，可以放在餐边柜。<br>
3.文具，包括一些闲置的笔记本电脑、手机等<br>
4.玩具 (如果你有孩子)<br>
5.文件，用<strong>两孔夹</strong><br>
6.影集，婚纱照片<br>
7.收藏，工艺品，乐高，高达，模型<br>
8.影音，CD，音响，PS4，相机，三脚架<br>
9.工具，吸尘器，五金工具，等也可以考虑放在这里</p>
<h2><span id="客厅即是书房">客厅即是书房</span></h2>
<p>个人认为，客厅可以放一些不需要特别认真看的书：比如小说、绘本、历史、科普、散文等“闲书”。</p>
<p>而对于一些经常使用的，专业、工作相关的，工具类的书籍，则可以放在书房/书架 (工作区)。比如IT类的书籍、考证用的书籍、字典等</p>
<p>书的数量需要控制，以“保留能放进客厅大柜的书”作为原则。</p>
<h2><span id="各归其位有露有藏">各归其位，有露有藏</span></h2>
<p>露：美丽的。</p>
<p>藏：“不美”的。</p>
<p><strong>藏的容器</strong>——宜家的透明收纳盒 (要买盖子)：透明可视、长方高效、自然摞放。</p>
<p>每格柜子的净尺寸宽 400 mm，高 350 mm，刚好可以放进去 4 个收纳盒。</p>
<h3><span id="精神价值">精神价值</span></h3>
<p>缓冲空间、第一印象、家的标志</p>
<h4><span id="家的待客之道">家的待客之道</span></h4>
<p>客鞋：从网上购买四星级酒店标准的白色布制拖鞋（10 双），压叠放在一起，节省空间，可机洗。</p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200823225112003.png" alt="image-20200823225112003"></p>
<h3><span id="实用价值">实用价值</span></h3>
<p>更换拖鞋，挂衣放包，放置钥匙雨伞</p>
<ul>
<li>
<p>基本功能是第一位的</p>
</li>
<li>
<p>鞋子的收纳永远是最令人头痛的，所以需要一个大鞋柜</p>
</li>
</ul>
<p>鞋子的数量统计：</p>
<ol>
<li>
<p>女主人：15-40 双；本人情况：40</p>
</li>
<li>
<p>男主人：8-15 双；本人情况：10</p>
</li>
<li>
<p>父母：5-8 双；本人情况：5*2</p>
</li>
<li>
<p>孩子：5-12 双；本人情况：未知，定为 10</p>
</li>
<li>
<p>客人：2-5 双；本人情况：10</p>
</li>
</ol>
<p>全家统计：35-80 双；本人情况：80</p>
<h3><span id="鞋柜尺寸与款式">鞋柜尺寸与款式</span></h3>
<h4><span id="深度">深度</span></h4>
<p>标准层板深度 350 mm (可平放45 码以内的鞋)</p>
<p>可放鞋盒 400 mm (普通鞋盒)</p>
<h4><span id="层板间距">层板间距</span></h4>
<p>以女性高跟鞋为参考标准</p>
<p>鞋帮 (40 mm) + 鞋跟(20~110 mm) = 单鞋高度 (最高150 mm)</p>
<p>故上下层板基准间距为 160 mm</p>
<h4><span id="可活动的层板">可活动的层板</span></h4>
<p>当进行鞋柜定制时，为了最大化利用鞋柜空间，可要求店家“<strong><u>打排钻</u></strong>”：通过排钻孔、卡件和层板实现灵活的层板高度。</p>
<h4><span id="鞋柜的构成">鞋柜的构成</span></h4>
<ul>
<li>基础配置：
<ul>
<li>地柜：H = 1100 mm 台面大，用途广，可配抽屉</li>
<li>吊柜：H = 1700 mm 放置非当季鞋子</li>
<li>高柜：H = 2360 mm 大容量首选，柜门可做全身镜子</li>
</ul>
</li>
<li>升级配置：
<ul>
<li>鞋凳：H = 450 mm 换鞋舒服，不尴尬</li>
<li>装饰柜：H = 2360 mm 家庭品味的展示：如有人放一些工艺品、乐高、高达</li>
</ul>
</li>
</ul>
<h4><span id="容量优先">容量优先</span></h4>
<p>即先保证基础配置，再考虑升级配置</p>
<h4><span id="敞开常鞋位">敞开“常鞋位”</span></h4>
<p>传统鞋柜，底层架空100 mm 放置常用鞋，其实位置不足；<br>
改良模式，底部两层为敞开隔板，不舍柜门，常用鞋位置充裕。</p>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200823221609606.png" alt="image-20200823221609606" style="zoom: 80%;">
<p>传统型，常鞋位不足（如果只能有一个地柜，就比较严重）</p>
<img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200823221656539.png" alt="image-20200823221656539" style="zoom: 80%;">
<p>改良型，常鞋位充足 (特别是在地柜只有一个的时候)</p>
<h4><span id="小红书推荐款适用于本人的开门无玄关户型">小红书推荐款（适用于本人的开门无玄关户型）</span></h4>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200823223138381.png" alt="image-20200823223138381"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200823223418308.png" alt="image-20200823223418308"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200823223630771.png" alt="image-20200823223630771"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200823223830769.png" alt="image-20200823223830769"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200823224024610.png" alt="image-20200823224024610"></p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200823224044011.png" alt="image-20200823224044011"></p>
<h4><span id="鞋盒-留与弃">鞋盒 留与弃</span></h4>
<p>鞋盒大小参差，摞放不齐，不清楚盒内情况</p>
<p>可购买**<u>防尘鞋袋</u>**，透明可视，轻巧省地，出差旅行也可使用</p>
<p><img src="https://gitee.com/microbiomecat/image_hosting/raw/master/img/image-20200823224635867.png" alt="image-20200823224635867"></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>生活</category>
        <category>装修</category>
      </categories>
      <tags>
        <tag>装修</tag>
        <tag>读书笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>装修需求说明</title>
    <url>/20201013/renovation_requirements/</url>
    <content><![CDATA[<p>本文为本人依据个人对新家装修的偏好，收集相关网络优质资源，整理而成，供个人及设计师参考。</p>
<p>其中大部分图片来自好好住 app，知乎，小红书 app，微信公众号、淘宝等网络资源，如有侵权请评论联系删除。</p>
<a id="more"></a>
<!-- toc -->
<ul>
<li><a href="#%E8%83%8C%E6%99%AF%E7%AE%80%E4%BB%8B">背景简介</a>
<ul>
<li><a href="#%E6%88%BF%E5%B1%8B%E7%8A%B6%E5%86%B5">房屋状况</a></li>
<li><a href="#%E5%B1%85%E4%BD%8F%E8%80%85%E8%82%96%E5%83%8F">居住者肖像</a></li>
</ul>
</li>
<li><a href="#%E8%A3%85%E4%BF%AE%E5%8E%9F%E5%88%99">装修原则</a></li>
<li><a href="#%E8%A3%85%E4%BF%AE%E9%A3%8E%E6%A0%BC">装修风格</a>
<ul>
<li><a href="#1%E8%89%B2%E8%B0%83%E5%88%86%E4%B8%BB%E6%AC%A1">1.色调分主次</a></li>
<li><a href="#2%E6%9C%A8%E8%89%B2%E4%BB%A5%E4%B8%AD%E7%AD%89%E6%B7%B1%E5%BA%A6-%E4%B8%AD%E6%80%A7%E6%B8%A9%E5%BA%A6%E4%B8%BA%E4%B8%BB%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%9C%89%E6%B7%B1%E6%B5%85%E5%B1%82%E6%AC%A1">2.木色以中等深度、中性温度为主，也可以有深浅层次。</a></li>
<li><a href="#3%E4%B8%B0%E5%AF%8C%E7%9A%84%E7%BA%BF%E6%9D%A1%E5%87%B8%E6%98%BE%E5%B1%82%E6%AC%A1%E6%84%9F%E7%AE%80%E5%8D%95%E4%B8%8D%E7%AE%80%E9%99%8B">3.丰富的线条，凸显层次感，简单不简陋。</a></li>
<li><a href="#3%E5%8A%A0%E5%85%A5%E8%BD%BB%E5%A5%A2%E5%85%83%E7%B4%A0">3.加入轻奢元素</a></li>
<li><a href="#4%E4%BA%AE%E7%82%B9%E4%B8%8E%E6%83%85%E8%B6%A3">4.亮点与情趣</a></li>
</ul>
</li>
<li><a href="#%E5%B8%83%E5%B1%80%E8%AE%BE%E6%83%B3">布局设想</a>
<ul>
<li><a href="#%E5%AE%A2%E5%8E%85%E5%B8%83%E5%B1%80">客厅布局</a>
<ul>
<li><a href="#1-%E6%95%B4%E9%9D%A2%E5%A2%99%E7%9A%84%E7%94%B5%E8%A7%86%E6%9F%9C">1. 整面墙的电视柜</a></li>
<li><a href="#2-%E4%B8%BB%E6%B2%99%E5%8F%9125%E7%B1%B3%E4%BB%A5%E5%86%85">2. 主沙发：2.5米以内，</a></li>
<li><a href="#3-%E4%B8%8D%E8%A6%81%E8%8C%B6%E5%87%A0%E4%BD%86%E5%8F%AF%E4%BB%A5%E6%9C%89%E8%BE%B9%E5%87%A0">3. 不要茶几，但可以有边几</a></li>
<li><a href="#4-%E6%B2%99%E5%8F%91%E5%89%8D%E9%93%BA%E5%9C%B0%E6%AF%AF%E6%89%AB%E5%9C%B0%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%A1%8C%E8%B5%B0%E6%97%A0%E9%9A%9C%E7%A2%8D">4. 沙发前铺地毯，扫地机器人行走无障碍</a></li>
<li><a href="#5-%E9%AB%98%E9%A2%9C%E5%80%BC-%E8%88%92%E9%80%82%E7%9A%84%E5%8D%95%E4%BA%BA%E6%B2%99%E5%8F%91%E6%9C%80%E5%A5%BD%E4%B8%8D%E6%80%95%E7%8C%AB%E7%88%AA">5. 高颜值、舒适的单人沙发，最好不怕猫爪</a></li>
<li><a href="#6-%E9%AB%98%E9%A2%9C%E5%80%BC%E7%9A%84%E8%90%BD%E5%9C%B0%E7%81%AF%E9%98%85%E8%AF%BB%E7%81%AF">6. 高颜值的落地灯/阅读灯</a></li>
<li><a href="#7-%E7%BB%BF%E8%89%B2%E6%A4%8D%E7%89%A9%E4%B8%8D%E4%B8%80%E5%AE%9A%E6%94%BE%E5%AE%A2%E5%8E%85%E5%AF%B9%E7%8C%AB%E6%97%A0%E6%AF%92%E5%A6%82%E7%90%B4%E5%8F%B6%E6%A6%95-%E4%BB%99%E4%BA%BA%E6%8E%8C-%E5%A4%9A%E8%82%89%E6%A4%8D%E7%89%A9%E7%AD%89">7. 绿色植物，不一定放客厅，对猫无毒，如琴叶榕、仙人掌、多肉植物等</a></li>
<li><a href="#8-%E6%97%A0%E4%B8%BB%E7%81%AF%E4%BB%A5%E5%B0%84%E7%81%AF%E7%AD%89%E5%BD%A2%E5%BC%8F%E4%B8%BA%E4%B8%BB%E4%B8%8D%E8%A6%81%E7%81%AF%E7%AE%B1%E5%8F%AF%E8%80%83%E8%99%91%E4%B8%8D%E5%81%9A%E5%90%8A%E9%A1%B6%E7%81%AF%E4%B8%8D%E7%94%A8%E5%A4%AA%E5%A4%9A">8. 无主灯，以射灯等形式为主，不要灯箱，可考虑不做吊顶，灯不用太多</a></li>
<li><a href="#9-%E5%9C%B0%E6%9D%BF%E5%B7%B2%E8%B4%AD%E9%80%9A%E9%93%BA%E5%AE%A2%E9%A4%90%E5%8E%85%E5%92%8C%E5%8D%A7%E5%AE%A4%E9%B1%BC%E9%AA%A8%E8%89%B2%E5%8F%B7%E5%A6%82%E4%B8%8B%E5%8F%AF%E9%80%89">9. 地板已购，通铺客餐厅和卧室，鱼骨，色号如下可选：</a></li>
</ul>
</li>
<li><a href="#%E9%A4%90%E5%8E%85%E5%B8%83%E5%B1%80">餐厅布局</a>
<ul>
<li><a href="#1-%E5%90%A7%E5%8F%B0%E5%B2%9B%E5%8F%B0%E5%88%86%E9%9A%94%E5%BC%80%E5%8E%A8%E6%88%BF%E4%B8%8E%E9%A4%90%E5%8E%85%E5%90%A7%E5%8F%B0%E8%80%83%E8%99%91%E6%94%BE%E7%BD%AE%E6%B0%B4%E6%A7%BD">1. 吧台/岛台，分隔开厨房与餐厅，吧台考虑放置水槽？</a></li>
<li><a href="#2-%E9%A4%90%E6%A1%8C">2. 餐桌</a></li>
<li><a href="#3-%E9%A4%90%E8%BE%B9%E6%9F%9C">3. 餐边柜</a></li>
<li><a href="#4-%E5%90%8A%E7%81%AF%E6%A1%8C%E9%9D%A2%E5%B0%84%E7%81%AF%E9%A4%90%E8%BE%B9%E6%9F%9C">4. 吊灯（桌面）+射灯（餐边柜）</a></li>
</ul>
</li>
<li><a href="#%E5%8E%A8%E6%88%BF%E5%B8%83%E5%B1%80">厨房布局</a>
<ul>
<li><a href="#1-%E8%BF%9E%E9%80%9A%E5%8C%97%E9%98%B3%E5%8F%B0">1. 连通北阳台</a></li>
<li><a href="#2-%E5%8F%AF%E7%94%A8%E6%8E%A8%E6%8B%89%E5%90%8A%E6%9F%9C%E7%8E%BB%E7%92%83%E9%97%A8%E4%B8%8E%E9%A4%90%E5%8E%85%E5%AE%8C%E5%85%A8%E9%9A%94%E6%96%AD">2. 可用推拉吊柜玻璃门与餐厅完全隔断</a></li>
<li><a href="#3-u%E5%9E%8B%E6%93%8D%E4%BD%9C%E5%8F%B0%E4%B8%80%E4%BE%A7%E4%B8%BA%E5%90%A7%E5%8F%B0">3. U型操作台，一侧为吧台</a></li>
<li><a href="#4-%E6%A9%B1%E6%9F%9C%E5%8F%AF%E8%80%83%E8%99%91%E4%B8%8A%E4%B8%8B%E4%B8%A4%E7%A7%8D%E9%A2%9C%E8%89%B2%E4%B8%8B%E7%99%BD%E8%89%B2-%E4%B8%8A%E6%9C%A8%E8%89%B2">4. 橱柜可考虑上下两种颜色，下白色、上木色</a></li>
<li><a href="#5-%E5%8F%B0%E9%9D%A2%E7%81%B6%E5%8F%B0%E5%92%8C%E6%93%8D%E4%BD%9C%E5%8F%B0%E9%AB%98%E5%BA%A6%E5%B7%AE">5. 台面灶台和操作台高度差</a></li>
<li><a href="#6-%E5%9C%B0%E7%A0%96%E8%80%90%E8%84%8F">6. 地砖耐脏</a></li>
<li><a href="#7-%E5%90%8A%E6%9F%9C%E4%B8%8D%E8%A6%81%E5%A4%AA%E5%A4%9A-%E9%B8%A1%E8%82%8B%E5%A4%84%E5%8F%AF%E7%94%A8%E9%9A%94%E6%9D%BF%E6%88%96%E7%95%99%E7%99%BD%E5%90%8A%E6%9F%9C%E4%B8%8B%E8%AE%BE%E7%BD%AE%E7%81%AF%E5%B8%A6">7. 吊柜不要太多、鸡肋处可用隔板或留白，吊柜下设置灯带</a></li>
<li><a href="#8-%E5%86%B0%E7%AE%B1%E5%B5%8C%E5%85%A5%E6%9F%9C%E5%AD%90">8. 冰箱嵌入柜子</a></li>
<li><a href="#9-%E5%8F%B0%E4%B8%8B%E7%9B%86%E5%A4%A7%E5%8D%95%E6%A7%BD">9. 台下盆+大单槽</a></li>
</ul>
</li>
<li><a href="#%E5%8D%AB%E7%94%9F%E9%97%B4%E5%B8%83%E5%B1%80">卫生间布局</a>
<ul>
<li><a href="#1-%E5%B0%BD%E9%87%8F%E5%AE%9E%E7%8E%B0%E5%8F%B0%E7%9B%86%E5%A4%96%E7%BD%AE%E5%B9%B2%E6%B9%BF%E5%88%86%E7%A6%BB">1. 尽量实现台盆外置，干湿分离</a></li>
<li><a href="#2-%E6%B7%8B%E6%B5%B4%E5%8C%BA%E9%95%BF%E6%96%B9%E5%BD%A2%E4%B8%BA%E4%BD%B3">2. 淋浴区长方形为佳</a></li>
<li><a href="#3-%E5%A3%81%E6%8C%82%E9%A9%AC%E6%A1%B6%E5%8F%AF%E8%AE%BE%E7%BD%AE%E5%81%87%E5%A2%99">3. 壁挂马桶，可设置假墙</a></li>
<li><a href="#4-%E5%A3%81%E9%BE%9B">4. 壁龛？</a></li>
<li><a href="#5-%E5%8F%B0%E7%9B%86%E4%B8%8B%E4%B8%BA%E6%8A%BD%E5%B1%89%E6%9F%9C%E4%B8%8A%E6%96%B9%E9%95%9C%E6%9F%9C">5. 台盆下为抽屉柜，上方镜柜</a></li>
</ul>
</li>
<li><a href="#%E4%B8%BB%E5%8D%A7%E5%B8%83%E5%B1%80">主卧布局</a>
<ul>
<li><a href="#1-18%E7%9A%84%E5%BA%8A">1. 1.8的床</a></li>
<li><a href="#2-%E8%A1%A3%E6%9F%9C">2. 衣柜</a></li>
<li><a href="#3-%E6%A2%B3%E5%A6%86%E5%8F%B0">3. 梳妆台</a></li>
<li><a href="#4-%E8%A1%A3%E6%9E%B6">4. 衣架</a></li>
<li><a href="#5-%E5%B0%84%E7%81%AF%E5%90%8A%E7%81%AF%E6%B0%9B%E5%9B%B4%E7%81%AF">5. 射灯+吊灯/氛围灯</a></li>
<li><a href="#6-%E6%84%9F%E5%BA%94%E7%81%AF%E5%B8%A6">6. 感应灯带</a></li>
</ul>
</li>
<li><a href="#%E6%AC%A1%E5%8D%A7%E5%B8%83%E5%B1%80">次卧布局</a>
<ul>
<li><a href="#1-15%E7%9A%84%E5%BA%8A">1. 1.5的床</a></li>
<li><a href="#2-%E5%8D%87%E9%99%8D%E5%8A%9E%E5%85%AC%E6%A1%8C%E5%8A%9E%E5%85%AC%E6%A4%85">2. 升降办公桌+办公椅</a></li>
<li><a href="#3-%E8%A1%A3%E6%9F%9C">3. 衣柜</a></li>
</ul>
</li>
<li><a href="#%E9%98%B3%E5%8F%B0%E5%B8%83%E5%B1%80">阳台布局</a>
<ul>
<li><a href="#1-%E6%B4%97%E8%A1%A3%E6%9C%BA%E7%83%98%E8%A1%A3%E6%9C%BA">1. 洗衣机烘衣机</a></li>
<li><a href="#2-%E6%B4%97%E8%A1%A3%E5%8F%B0%E7%9B%86%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%94%BE%E5%9C%A8%E5%8C%97%E9%98%B3%E5%8F%B0">2. 洗衣台盆（是否可以放在北阳台）</a></li>
<li><a href="#3-%E7%8C%AB%E9%9A%94%E9%97%B4%E7%8C%AB%E7%88%AC%E6%9E%B6">3. 猫隔间+猫爬架</a></li>
<li><a href="#4-%E9%98%B3%E5%8F%B0%E4%B8%8E%E5%AE%A2%E5%8E%85%E8%AE%BE%E7%BD%AE%E7%8E%BB%E7%92%83%E5%90%8A%E8%BD%A8%E6%8E%A8%E6%8B%89%E9%97%A8">4. 阳台与客厅设置玻璃吊轨推拉门</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E8%AE%BE%E5%A4%87-%E7%94%B5%E5%99%A8%E5%88%97%E8%A1%A8">设备、电器列表</a>
<ul>
<li><a href="#%E4%B8%80-%E8%88%92%E9%80%82%E7%B3%BB%E7%BB%9F">一、舒适系统：</a>
<ul>
<li><a href="#1-%E7%A9%BA%E8%B0%83%E5%A4%A7%E9%87%91%E5%B7%B2%E6%9C%89%E8%AE%BE%E5%A4%87%E5%B7%B2%E5%AE%89%E8%A3%85">1. 空调：大金，已有设备，已安装。</a></li>
<li><a href="#2-%E6%B0%B4%E5%9C%B0%E6%9A%96%E6%B2%83%E4%B9%90%E5%A4%AB-2k-%E7%82%89%E5%AD%90%E4%BD%93%E7%A7%AF%E8%BE%83%E5%A4%A7%E5%B7%B2%E8%B4%AD%E8%AE%BE%E5%A4%87">2. 水地暖：沃乐夫 2k 炉子（体积较大），已购设备</a></li>
<li><a href="#3-%E6%96%B0%E9%A3%8E%E6%9D%BE%E4%B8%8B%E4%B8%89%E8%BF%9B%E5%9B%9B%E5%87%BA%E5%B7%B2%E8%B4%AD%E8%AE%BE%E5%A4%8783-170w">3. 新风：松下，三进四出，已购设备，83-170w。</a></li>
<li><a href="#4-%E9%99%A4%E6%B9%BF%E6%9C%BA%E5%8F%AF%E7%A7%BB%E5%8A%A8%E5%BC%8F%E6%9C%AA%E8%B4%AD%E7%BD%AE%E8%80%83%E8%99%91%E6%B5%A6%E7%AB%8B%E9%80%82-prince-plus305w">4. 除湿机：可移动式，未购置，考虑浦立适 prince-plus，305W。</a></li>
<li><a href="#5-%E7%A9%BA%E6%B0%94%E5%87%80%E5%8C%96%E5%99%A8%E5%8D%9A%E4%B8%96%E9%99%A4%E7%94%B2%E9%86%9B%E6%AC%BE%E5%B7%B2%E6%9C%89%E8%AE%BE%E5%A4%8745w">5. 空气净化器：博世，除甲醛款，已有设备，45W。**</a></li>
<li><a href="#6-%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85%E6%9C%AA%E8%B4%AD%E5%85%A5%E5%8C%85%E6%8B%AC">6. 智能家居，未购入，包括：</a></li>
</ul>
</li>
<li><a href="#%E5%8E%A8%E6%88%BF">厨房</a>
<ul>
<li><a href="#1-%E5%86%B0%E7%AE%B1%E5%8D%9A%E4%B8%96%E7%BA%A4%E8%96%84%E6%AC%BE%E6%9C%AA%E8%B4%AD%E7%BD%AE1200w">1. 冰箱：博世纤薄款，未购置，1200w</a></li>
<li><a href="#2-%E6%B2%B9%E7%83%9F%E6%9C%BA%E6%96%B9%E5%A4%AA%E5%B7%B2%E8%B4%AD%E7%BD%AE268w">2. 油烟机：方太，已购置，268w</a></li>
<li><a href="#3-%E8%92%B8%E7%83%A4%E7%AE%B1%E7%BE%8E%E7%9A%84%E5%B7%B2%E8%B4%AD%E7%BD%AE3150w">3. 蒸烤箱：美的，已购置，3150w</a></li>
<li><a href="#4-%E6%B4%97%E7%A2%97%E6%9C%BA%E7%BE%8E%E7%9A%84%E5%B7%B2%E8%B4%AD%E7%BD%AE1760w">4. 洗碗机：美的，已购置，1760w</a></li>
<li><a href="#5-%E7%81%B6%E5%85%B7%E7%BE%8E%E7%9A%84%E5%B7%B2%E8%B4%AD%E7%BD%AE%E5%A4%A9%E7%84%B6%E6%B0%94">5. 灶具：美的，已购置，天然气</a></li>
<li><a href="#6-%E5%89%8D%E7%BD%AE%E8%BF%87%E6%BB%A4%E5%99%A8%E5%8D%9A%E4%B8%96-aq1200p%E6%9C%AA%E8%B4%AD%E7%BD%AE">6. 前置过滤器：博世 AQ1200P，未购置</a></li>
<li><a href="#7-%E8%BD%AF%E6%B0%B4%E6%9C%BA%E6%80%A1%E5%8F%A3%E5%B7%B2%E8%B4%AD%E7%BD%AE%E7%93%A6%E6%95%B0%E6%9C%AA%E7%9F%A5">7. 软水机：怡口，已购置，瓦数未知。</a></li>
<li><a href="#8-%E5%87%80%E6%B0%B4%E5%99%A8%E6%80%A1%E5%8F%A3%E5%B7%B2%E8%B4%AD%E7%BD%AE">8. 净水器：怡口，已购置</a></li>
<li><a href="#9-%E5%B0%8F%E5%8E%A8%E5%AE%9D%E5%8D%9A%E4%B8%9610l%E6%9C%AA%E8%B4%AD%E7%BD%AE">9. 小厨宝：博世10L，未购置</a></li>
<li><a href="#10-%E7%94%B5%E9%A5%AD%E7%85%B2%E5%B7%B2%E6%9C%89%E8%AE%BE%E5%A4%87380w%E5%90%8E%E7%BB%AD%E5%86%8D%E6%9B%B4%E6%8D%A2">10. 电饭煲：已有设备，380w，后续再更换</a></li>
<li><a href="#11-%E7%A0%B4%E5%A3%81%E6%9C%BA%E5%B7%B2%E6%9C%89%E8%AE%BE%E5%A4%87">11. 破壁机：已有设备</a></li>
<li><a href="#12-%E8%B1%86%E6%B5%86%E6%9C%BA%E5%B7%B2%E6%9C%89%E8%AE%BE%E5%A4%87">12. 豆浆机：已有设备</a></li>
</ul>
</li>
<li><a href="#%E9%A4%90%E5%8E%85">餐厅</a>
<ul>
<li><a href="#1-%E7%94%B5%E7%83%AD%E6%B0%B4%E5%A3%B6%E9%A5%AE%E6%B0%B4%E5%99%A8%E5%B7%B2%E8%B4%AD%E8%AE%BE%E5%A4%872200w">1. 电热水壶/饮水器：已购设备，2200w</a></li>
<li><a href="#2-%E9%83%A8%E5%88%86%E5%8E%A8%E6%88%BF%E7%94%B5%E5%99%A8%E4%B9%9F%E5%8F%AF%E4%BB%A5%E8%80%83%E8%99%91%E6%94%BE%E5%88%B0%E8%BF%99%E9%87%8C">2. 部分厨房电器也可以考虑放到这里</a></li>
</ul>
</li>
<li><a href="#%E9%98%B3%E5%8F%B0">阳台</a>
<ul>
<li><a href="#1-%E6%B4%97%E8%A1%A3%E6%9C%BA%E5%92%8C%E7%83%98%E8%A1%A3%E6%9C%BA%E5%B0%8F%E5%A4%A9%E9%B9%85%E5%B7%B2%E8%B4%AD%E7%BD%AE808w-36w">1. 洗衣机和烘衣机：小天鹅，已购置，808w? + 36w?</a></li>
<li><a href="#2-%E7%8C%AB%E7%88%AC%E6%9E%B6%E9%9C%80%E5%AE%9A%E5%88%B6%E6%9C%AA%E8%B4%AD%E7%BD%AE">2. 猫爬架：需定制，未购置</a></li>
<li><a href="#3-%E7%94%B5%E5%8A%A8%E6%99%BE%E8%A1%A3%E6%9E%B6%E6%9C%AA%E8%B4%AD%E7%BD%AE%E5%B7%B2%E6%9C%89">3. 电动晾衣架：未购置，已有？</a></li>
</ul>
</li>
<li><a href="#%E5%AE%A2%E5%8E%85">客厅</a>
<ul>
<li><a href="#1-%E7%94%B5%E8%A7%8649-55-%E5%AF%B8%E6%9C%AA%E8%B4%AD%E7%BD%AE%E8%80%83%E8%99%91%E5%A6%82%E4%B8%8B%E6%AC%BE">1. 电视：49-55 寸，未购置，考虑如下款</a></li>
<li><a href="#2-%E9%9F%B3%E5%93%8D%E5%B0%8F%E5%9E%8B%E4%BE%BF%E6%90%BA%E5%BC%8F%E5%90%8E%E7%BB%AD%E8%B4%AD%E7%BD%AE%E6%9A%82%E6%97%B6%E5%A4%A9%E7%8C%AB%E7%B2%BE%E7%81%B5%E7%BA%A2%E8%89%B2joy">2. 音响：小型便携式，后续购置，暂时天猫精灵（红色）😂</a></li>
<li><a href="#3-ps5%E5%90%8E%E7%BB%AD%E8%B4%AD%E7%BD%AE-%E9%81%A5%E9%81%A5%E6%97%A0%E6%9C%9Fcry">3. ps5：后续购置, 遥遥无期？😢</a></li>
<li><a href="#4-%E5%8D%AB%E7%94%9F%E9%97%B4">4. 卫生间</a></li>
<li><a href="#1-%E6%99%BA%E8%83%BD%E9%A9%AC%E6%A1%B6%E7%9B%96%E6%9C%AA%E8%B4%AD%E5%85%A5%E5%90%8E%E7%BB%AD%E8%B4%AD%E5%85%A5">1. 智能马桶盖：未购入，后续购入</a></li>
<li><a href="#2-%E7%94%B5%E7%83%AD%E6%AF%9B%E5%B7%BE%E6%9E%B6%E6%9C%AA%E8%B4%AD%E7%BD%AE">2. 电热毛巾架：未购置</a></li>
<li><a href="#3-%E5%A3%81%E6%8C%82%E6%B4%97%E8%A1%A3%E6%9C%BA%E6%9C%AA%E8%B4%AD%E7%BD%AE">3. 壁挂洗衣机：未购置</a></li>
</ul>
</li>
<li><a href="#%E6%B8%85%E6%B4%81%E5%8D%AB%E7%94%9F">清洁卫生</a>
<ul>
<li><a href="#1-%E6%89%AB%E5%9C%B0%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%A7%91%E6%B2%83%E5%85%B9%E5%B7%B2%E6%9C%89%E8%AE%BE%E5%A4%87">1. 扫地机器人：科沃兹，已有设备</a></li>
<li><a href="#2-%E6%97%A0%E7%BB%B3%E5%90%B8%E5%B0%98%E5%99%A8%E6%9D%BE%E4%B8%8B%E6%88%96%E6%88%B4%E6%A3%AE%E6%9C%AA%E8%B4%AD%E7%BD%AE">2. 无绳吸尘器：松下或戴森，未购置</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E5%85%B6%E4%BB%96">其他</a>
<ul>
<li><a href="#1-%E5%88%92%E8%88%B9%E6%9C%BA">1. 划船机</a></li>
<li><a href="#2-%E7%91%9C%E4%BC%BD%E5%9E%AB%E7%AD%89%E8%BF%90%E5%8A%A8%E5%99%A8%E6%9D%90">2. 瑜伽垫等运动器材</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h2><span id="背景简介">背景简介</span></h2>
<h3><span id="房屋状况">房屋状况</span></h3>
<p>小高层，处于高楼层，南北通透，光照较强、通风好、视野开阔；92 平建筑面积，套内 70 平，两室一厅一卫，带南北阳台；旧房改造。</p>
<h3><span id="居住者肖像">居住者肖像</span></h3>
<p>夫妻两，未来会有一个孩子（暂时只需考虑一个），都喜欢躺沙发。</p>
<ul>
<li>男主人：183 cm，做饭，家庭办公，使用笔记本工作。</li>
<li>女主人：160 cm，偶尔做饭，喜欢做饮品，收纳整理，看书，使用 pad。</li>
</ul>
<p>父母，男方或女方一方父母会经常来居住</p>
<ul>
<li>父亲：175 cm，做饭</li>
<li>母亲：155 cm，爱清洁，洁癖，嫌弃猫</li>
<li>岳父：170 cm，偶尔过来</li>
<li>岳母：162 cm，做饭，嫌弃猫</li>
</ul>
<p>宠物</p>
<ul>
<li>三三，缅因猫，大体型，蒲公英属性，战斗力强，吃喝拉撒玩需要满足。</li>
</ul>
<p><img src="%E4%B8%89%E4%B8%89.png" alt="三三"></p>
<h2><span id="装修原则">装修原则</span></h2>
<ul>
<li><strong>安全健康</strong>: 配电合理、材料环保耐用、家具固定稳固、无尖锐锋利物品。</li>
<li><strong>实用舒适</strong>：不能为了好看牺牲实用性，不能为了收纳而过分压缩人的空间；居住体验好：沙发靠着舒服、床躺着舒服、座椅坐着舒服、做菜舒服、淋浴舒服，打扫卫生轻松，工作环境适宜，夫妻两与父母、猫和谐相处。</li>
<li><strong>高颜值</strong>：美观、考虑便利的同时、兼顾美观，高颜值。</li>
<li><strong>无卫生死角</strong>：打扫方便，耐脏、不易磕碰、发霉、开裂、变形。</li>
<li><strong>收纳合理</strong>：要有一定的收纳空间（25-30% 投影面积），同时布局合理，考虑功能区划。</li>
<li><strong>近未来规划</strong>：考虑未来五年左右的居住使用，适当留白。</li>
<li><strong>合理预算</strong>：保证以上需求的同时，尽可能节约预算；可以后期添置的，不需要急于一步到位。</li>
<li><strong>计划详细、考虑周全</strong>。</li>
</ul>
<h2><span id="装修风格">装修风格</span></h2>
<p>极简风格，代表风格的简约、克制、内敛；但它的表现形式并不是单一的，而丰富多样的，如：原木极简风格，北欧极简风，高级灰极简风，混搭极简风。</p>
<p>以下为个人喜欢的风格：</p>
<p><img src="%E9%A3%8E%E6%A0%BC2.png" alt="好好住@yani的夏天"></p>
<p><img src="%E9%A3%8E%E6%A0%BC5.png" alt="大众点评@鸿鹄设计"></p>
<p><img src="%E9%A3%8E%E6%A0%BC8.png" alt="好好住@凡夫设计"></p>
<h3><span id="1色调分主次">1.色调分主次</span></h3>
<p>白色主色调，木色为次主色调，黑色为点缀色；同时，色调也可以有多个层次。</p>
<p><img src="%E8%89%B2%E8%B0%831.jpg" alt="白+木+黑，知乎@闫小匠"></p>
<p><img src="%E8%89%B2%E8%B0%832.jpg" alt="多种层次的白色，知乎@闫小匠"></p>
<h3><span id="2木色以中等深度-中性温度为主也可以有深浅层次">2.木色以中等深度、中性温度为主，也可以有深浅层次。</span></h3>
<p><img src="%E9%A3%8E%E6%A0%BC3.png" alt="墙面木色，小红书@文江Design"></p>
<p><img src="%E9%A3%8E%E6%A0%BC4.png" alt="地板木色，大众点评@鸿鹄设计"></p>
<h3><span id="3丰富的线条凸显层次感简单不简陋">3.丰富的线条，凸显层次感，简单不简陋。</span></h3>
<p><img src="%E9%A3%8E%E6%A0%BC6.png" alt="金属线条，大众点评@匠程设计"></p>
<p><img src="%E9%A3%8E%E6%A0%BC1.png" alt="长虹玻璃线条，好好住@yani的夏天"></p>
<h3><span id="3加入轻奢元素">3.加入轻奢元素</span></h3>
<p><img src="%E8%BD%BB%E5%A5%A21.jpg" alt="黄铜元素，知乎@闫小匠"></p>
<p><img src="%E8%BD%BB%E5%A5%A22.jpg" alt="岩板桌面，知乎@闫小匠"></p>
<h3><span id="4亮点与情趣">4.亮点与情趣</span></h3>
<p><img src="%E9%A3%8E%E6%A0%BC7.png" alt="蓝色+黄色元素，大众点评@匠程设计"></p>
<p><strong>总结：</strong></p>
<p><u>以现代简约为主要风格（但不需要拘泥于风格范式），色彩上以大面积的白+小面积的黑色(面或线条)+适当面积木饰面，并加入金属，透明玻璃元素，以及绿色 (植物)；高级但绝不冷淡，简约且克制，但也要允许生活与慵懒。</u></p>
<hr>
<h2><span id="布局设想">布局设想</span></h2>
<h3><span id="客厅布局">客厅布局</span></h3>
<h4><span id="1-整面墙的电视柜">1. 整面墙的电视柜</span></h4>
<ul>
<li>
<p>三七原则，有藏有露</p>
</li>
<li>
<p>白色柜门，电视后面为深色或黑色背板。</p>
</li>
</ul>
<h4><span id="2-主沙发25米以内">2. 主沙发：2.5米以内，</span></h4>
<ul>
<li>科技布材质</li>
<li>底部允许扫地机器人通过</li>
<li>高颜值<br>
比如：<br>
<img src="%E6%B2%99%E5%8F%911.jpg" alt="北欧表情，简约意式"><br>
<img src="%E6%B2%99%E5%8F%912.jpg" alt="北欧表情，简约意式"></li>
</ul>
<h4><span id="3-不要茶几但可以有边几">3. 不要茶几，但可以有边几</span></h4>
<h4><span id="4-沙发前铺地毯扫地机器人行走无障碍">4. 沙发前铺地毯，扫地机器人行走无障碍</span></h4>
<h4><span id="5-高颜值-舒适的单人沙发最好不怕猫爪">5. 高颜值、舒适的单人沙发，最好不怕猫爪</span></h4>
<h4><span id="6-高颜值的落地灯阅读灯">6. 高颜值的落地灯/阅读灯</span></h4>
<h4><span id="7-绿色植物不一定放客厅对猫无毒如琴叶榕-仙人掌-多肉植物等">7. 绿色植物，不一定放客厅，对猫无毒，如琴叶榕、仙人掌、多肉植物等</span></h4>
<p><img src="%E7%90%B4%E5%8F%B6%E6%A6%95.jpg" alt="琴叶榕"></p>
<p><img src="%E9%9D%92%E8%8B%B9%E6%9E%9C%E7%AB%B9%E8%8A%8B.jpg" alt="青苹果竹芋"></p>
<p><img src="%E6%B3%95%E5%B8%88%E5%A4%9A%E8%82%89.jpg" alt="法师多肉"></p>
<h4><span id="8-无主灯以射灯等形式为主不要灯箱可考虑不做吊顶灯不用太多">8. 无主灯，以射灯等形式为主，不要灯箱，可考虑不做吊顶，灯不用太多</span></h4>
<h4><span id="9-地板已购通铺客餐厅和卧室鱼骨色号如下可选">9. 地板已购，通铺客餐厅和卧室，鱼骨，色号如下可选：</span></h4>
<p><img src="%E5%9C%B0%E6%9D%BF1.jpg" alt="鱼骨地板EPL011"></p>
<p><img src="%E5%9C%B0%E6%9D%BF2.jpg" alt="鱼骨地板EPL012"></p>
<p><img src="%E5%9C%B0%E6%9D%BF3.jpg" alt="飞美旗舰店价格487的理论上都可以选"></p>
<p><img src="%E5%9C%B0%E6%9D%BF4.jpg" alt="非鱼骨地板EPL074"></p>
<h3><span id="餐厅布局">餐厅布局</span></h3>
<h4><span id="1-吧台岛台分隔开厨房与餐厅吧台考虑放置水槽">1. 吧台/岛台，分隔开厨房与餐厅，吧台考虑放置水槽？</span></h4>
<h4><span id="2-餐桌">2. 餐桌</span></h4>
<ul>
<li>兼顾平时的工作、看书、喝茶饮</li>
<li>岩板或符合风格的木质</li>
<li>靠着岛台</li>
</ul>
<p><img src="%E5%B2%9B%E5%8F%B0%E4%B8%8E%E9%A4%90%E6%A1%8C.jpg" alt="岛台与餐桌"></p>
<ul>
<li>一侧设计卡座，需适当考虑舒适性</li>
</ul>
<h4><span id="3-餐边柜">3. 餐边柜</span></h4>
<ul>
<li>
<p>可以和鞋柜连一起</p>
</li>
<li>
<p>吊柜可以不要，用隔板代替，不压抑，或者直接留白/挂画</p>
</li>
</ul>
<h4><span id="4-吊灯桌面射灯餐边柜">4. 吊灯（桌面）+射灯（餐边柜）</span></h4>
<h3><span id="厨房布局">厨房布局</span></h3>
<h4><span id="1-连通北阳台">1. 连通北阳台</span></h4>
<h4><span id="2-可用推拉吊柜玻璃门与餐厅完全隔断">2. 可用推拉吊柜玻璃门与餐厅完全隔断</span></h4>
<h4><span id="3-u型操作台一侧为吧台">3. U型操作台，一侧为吧台</span></h4>
<h4><span id="4-橱柜可考虑上下两种颜色下白色-上木色">4. 橱柜可考虑上下两种颜色，下白色、上木色</span></h4>
<h4><span id="5-台面灶台和操作台高度差">5. 台面灶台和操作台高度差</span></h4>
<h4><span id="6-地砖耐脏">6. 地砖耐脏</span></h4>
<h4><span id="7-吊柜不要太多-鸡肋处可用隔板或留白吊柜下设置灯带">7. 吊柜不要太多、鸡肋处可用隔板或留白，吊柜下设置灯带</span></h4>
<h4><span id="8-冰箱嵌入柜子">8. 冰箱嵌入柜子</span></h4>
<h4><span id="9-台下盆大单槽">9. 台下盆+大单槽</span></h4>
<h3><span id="卫生间布局">卫生间布局</span></h3>
<h4><span id="1-尽量实现台盆外置干湿分离">1. 尽量实现台盆外置，干湿分离</span></h4>
<h4><span id="2-淋浴区长方形为佳">2. 淋浴区长方形为佳</span></h4>
<h4><span id="3-壁挂马桶可设置假墙">3. 壁挂马桶，可设置假墙</span></h4>
<h4><span id="4-壁龛">4. 壁龛？</span></h4>
<h4><span id="5-台盆下为抽屉柜上方镜柜">5. 台盆下为抽屉柜，上方镜柜</span></h4>
<h3><span id="主卧布局">主卧布局</span></h3>
<h4><span id="1-18的床">1. 1.8的床</span></h4>
<h4><span id="2-衣柜">2. 衣柜</span></h4>
<h4><span id="3-梳妆台">3. 梳妆台</span></h4>
<h4><span id="4-衣架">4. 衣架</span></h4>
<h4><span id="5-射灯吊灯氛围灯">5. 射灯+吊灯/氛围灯</span></h4>
<h4><span id="6-感应灯带">6. 感应灯带</span></h4>
<h3><span id="次卧布局">次卧布局</span></h3>
<h4><span id="1-15的床">1. 1.5的床</span></h4>
<h4><span id="2-升降办公桌办公椅">2. 升降办公桌+办公椅</span></h4>
<h4><span id="3-衣柜">3. 衣柜</span></h4>
<h3><span id="阳台布局">阳台布局</span></h3>
<h4><span id="1-洗衣机烘衣机">1. 洗衣机烘衣机</span></h4>
<h4><span id="2-洗衣台盆是否可以放在北阳台">2. 洗衣台盆（是否可以放在北阳台）</span></h4>
<h4><span id="3-猫隔间猫爬架">3. 猫隔间+猫爬架</span></h4>
<h4><span id="4-阳台与客厅设置玻璃吊轨推拉门">4. 阳台与客厅设置玻璃吊轨推拉门</span></h4>
<hr>
<h2><span id="设备-电器列表">设备、电器列表</span></h2>
<h3><span id="一-舒适系统">一、舒适系统：</span></h3>
<h4><span id="1-空调大金已有设备已安装">1. 空调：大金，已有设备，已安装。</span></h4>
<p><br><br></p>
<h4><span id="2-水地暖沃乐夫-2k-炉子体积较大已购设备">2. 水地暖：沃乐夫 2k 炉子（体积较大），已购设备</span></h4>
<p><img src="%E9%87%87%E6%9A%96%E7%82%891.jpg" alt="产品型号"></p>
<p><img src="%E9%87%87%E6%9A%96%E7%82%892.jpg" alt="产品外观"></p>
<p><img src="%E9%87%87%E6%9A%96%E7%82%893.jpg" alt="安装尺寸"></p>
<p><big>注意：<u>水电定位，提前三天通知师傅上门</u></big>。</p>
<p><br><br></p>
<h4><span id="3-新风松下三进四出已购设备83-170w">3. 新风：松下，三进四出，已购设备，83-170w。</span></h4>
<p><img src="%E6%96%B0%E9%A3%8E1.jpg" alt="产品型号"></p>
<p><img src="%E6%96%B0%E9%A3%8E2.jpg" alt="产品尺寸"></p>
<p><img src="%E6%96%B0%E9%A3%8E3.jpg" alt="安装步骤"></p>
<p><big>注意：<u>水电定位，提前三天通知师傅上门</u></big>。</p>
<p><br><br></p>
<h4><span id="4-除湿机可移动式未购置考虑浦立适-prince-plus305w">4. 除湿机：可移动式，未购置，考虑浦立适 prince-plus，305W。</span></h4>
<p><img src="%E9%99%A4%E6%B9%BF%E5%99%A82.jpg" alt="产品型号"></p>
<p><img src="%E9%99%A4%E6%B9%BF%E5%99%A81.jpg" alt="产品外观"></p>
<p><br><br></p>
<h4><span id="5-空气净化器博世除甲醛款已有设备45w">5. 空气净化器：博世，除甲醛款，已有设备，45W。**</span></h4>
<p><img src="%E7%A9%BA%E6%B0%94%E5%87%80%E5%8C%96%E5%99%A81.jpg" alt="产品型号"></p>
<p><img src="%E7%A9%BA%E6%B0%94%E5%87%80%E5%8C%96%E5%99%A82.jpg" alt="产品外观"></p>
<p><br><br></p>
<h4><span id="6-智能家居未购入包括">6. 智能家居，未购入，包括：</span></h4>
<ul>
<li>摄像头</li>
<li>电子猫眼</li>
<li>电动窗帘（百叶）</li>
<li>人体感应灯</li>
<li>烟雾报警</li>
<li>全屋 ap</li>
</ul>
<p><br><br></p>
<h3><span id="厨房">厨房</span></h3>
<h4><span id="1-冰箱博世纤薄款未购置1200w">1. 冰箱：博世纤薄款，未购置，1200w</span></h4>
<p><img src="%E5%86%B0%E7%AE%B1.jpg" alt="产品外观与尺寸"></p>
<h4><span id="2-油烟机方太已购置268w">2. 油烟机：方太，已购置，268w</span></h4>
<p><img src="%E6%B2%B9%E7%83%9F%E6%9C%BA1.jpg" alt="产品外观"></p>
<p><img src="%E6%B2%B9%E7%83%9F%E6%9C%BA2.jpg" alt="产品信息"></p>
<p><img src="%E6%B2%B9%E7%83%9F%E6%9C%BA3.jpg" alt="安装示意图"></p>
<h4><span id="3-蒸烤箱美的已购置3150w">3. 蒸烤箱：美的，已购置，3150w</span></h4>
<p><img src="%E8%92%B8%E7%83%A4%E6%9C%BA1.jpg" alt="产品外观"></p>
<p><img src="%E8%92%B8%E7%83%A4%E6%9C%BA2.jpg" alt="产品尺寸"></p>
<h4><span id="4-洗碗机美的已购置1760w">4. 洗碗机：美的，已购置，1760w</span></h4>
<p><img src="%E6%B4%97%E7%A2%97%E6%9C%BA1.jpg" alt="产品外观"></p>
<p><img src="%E6%B4%97%E7%A2%97%E6%9C%BA2.jpg" alt="产品尺寸"></p>
<h4><span id="5-灶具美的已购置天然气">5. 灶具：美的，已购置，天然气</span></h4>
<p><img src="%E7%87%83%E6%B0%94%E7%81%B61.jpg" alt="产品外观"></p>
<p><img src="%E7%87%83%E6%B0%94%E7%81%B62.jpg" alt="产品信息"></p>
<p><img src="%E7%87%83%E6%B0%94%E7%81%B63.jpg" alt="安装示意图"></p>
<h4><span id="6-前置过滤器博世-aq1200p未购置">6. 前置过滤器：博世 AQ1200P，未购置</span></h4>
<p><img src="%E5%89%8D%E7%BD%AE%E8%BF%87%E6%BB%A4.jpg" alt="安装示意图"></p>
<h4><span id="7-软水机怡口已购置瓦数未知">7. 软水机：怡口，已购置，瓦数未知。</span></h4>
<p><img src="%E8%BD%AF%E6%B0%B4%E6%9C%BA.jpg" alt="产品外观与信息"></p>
<h4><span id="8-净水器怡口已购置">8. 净水器：怡口，已购置</span></h4>
<p><img src="%E7%BA%AF%E6%B0%B4%E6%9C%BA1.jpg" alt="产品外观1"></p>
<p><img src="%E7%BA%AF%E6%B0%B4%E6%9C%BA2.jpg" alt="产品外观2"></p>
<p><img src="%E7%BA%AF%E6%B0%B4%E6%9C%BA3.jpg" alt="产品尺寸与信息"></p>
<h4><span id="9-小厨宝博世10l未购置">9. 小厨宝：博世10L，未购置</span></h4>
<p><img src="%E5%B0%8F%E5%8E%A8%E5%AE%9D1.jpg" alt="产品外观1"></p>
<p><img src="%E5%B0%8F%E5%8E%A8%E5%AE%9D2.jpg" alt="产品尺寸与信息"></p>
<p><img src="%E5%B0%8F%E5%8E%A8%E5%AE%9D3.jpg" alt="安装示意图"></p>
<h4><span id="10-电饭煲已有设备380w后续再更换">10. 电饭煲：已有设备，380w，后续再更换</span></h4>
<h4><span id="11-破壁机已有设备">11. 破壁机：已有设备</span></h4>
<h4><span id="12-豆浆机已有设备">12. 豆浆机：已有设备</span></h4>
<h3><span id="餐厅">餐厅</span></h3>
<h4><span id="1-电热水壶饮水器已购设备2200w">1. 电热水壶/饮水器：已购设备，2200w</span></h4>
<p><img src="%E9%A5%AE%E6%B0%B4%E6%9C%BA.jpg" alt="安装示意图"></p>
<h4><span id="2-部分厨房电器也可以考虑放到这里">2. 部分厨房电器也可以考虑放到这里</span></h4>
<h3><span id="阳台">阳台</span></h3>
<h4><span id="1-洗衣机和烘衣机小天鹅已购置808w-36w">1. 洗衣机和烘衣机：小天鹅，已购置，808w? + 36w?</span></h4>
<p><img src="%E6%B4%97%E8%A1%A3%E6%9C%BA%E7%83%98%E8%A1%A3%E6%9C%BA.jpg" alt="洗衣机烘衣机"></p>
<p><img src="%E6%B4%97%E8%A1%A3%E6%9C%BA.jpg" alt="洗衣机"></p>
<p><img src="%E7%83%98%E8%A1%A3%E6%9C%BA.jpg" alt="烘衣机"></p>
<h4><span id="2-猫爬架需定制未购置">2. 猫爬架：需定制，未购置</span></h4>
<p>考虑在阳台一侧设置玻璃门，内部设置猫爬架</p>
<h4><span id="3-电动晾衣架未购置已有">3. 电动晾衣架：未购置，已有？</span></h4>
<p>但不能太大，也可以不是电动的，采用墙面固定的折叠式？</p>
<h3><span id="客厅">客厅</span></h3>
<h4><span id="1-电视49-55-寸未购置考虑如下款">1. 电视：49-55 寸，未购置，考虑如下款</span></h4>
<p><img src="%E7%94%B5%E8%A7%861.jpg" alt="电视机上墙"></p>
<p><img src="%E7%94%B5%E8%A7%862.jpg" alt="电视机放置"></p>
<p><img src="%E7%94%B5%E8%A7%863.jpg" alt="产品尺寸"></p>
<h4><span id="2-音响小型便携式后续购置暂时天猫精灵红色">2. 音响：小型便携式，后续购置，暂时天猫精灵（红色）😂</span></h4>
<h4><span id="3-ps5后续购置-遥遥无期">3. ps5：后续购置, 遥遥无期？😢</span></h4>
<p><img src="ps5.jpg" alt="ps5"></p>
<h4><span id="4-卫生间">4. 卫生间</span></h4>
<h4><span id="1-智能马桶盖未购入后续购入">1. 智能马桶盖：未购入，后续购入</span></h4>
<p><img src="%E9%A9%AC%E6%A1%B61.jpg" alt="马桶外观"></p>
<p><img src="%E9%A9%AC%E6%A1%B62.jpg" alt="安装图纸"></p>
<h4><span id="2-电热毛巾架未购置">2. 电热毛巾架：未购置</span></h4>
<p>暂时未选择</p>
<h4><span id="3-壁挂洗衣机未购置">3. 壁挂洗衣机：未购置</span></h4>
<p>暂时未选择</p>
<h3><span id="清洁卫生">清洁卫生</span></h3>
<h4><span id="1-扫地机器人科沃兹已有设备">1. 扫地机器人：科沃兹，已有设备</span></h4>
<h4><span id="2-无绳吸尘器松下或戴森未购置">2. 无绳吸尘器：松下或戴森，未购置</span></h4>
<h2><span id="其他">其他</span></h2>
<h4><span id="1-划船机">1. 划船机</span></h4>
<p><img src="%E5%88%92%E8%88%B9%E6%9C%BA.jpg" alt="产品外观"></p>
<h4><span id="2-瑜伽垫等运动器材">2. 瑜伽垫等运动器材</span></h4>
<p>考虑客厅收纳</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">]]></content>
      <categories>
        <category>生活</category>
        <category>装修</category>
      </categories>
      <tags>
        <tag>装修</tag>
      </tags>
  </entry>
</search>
